(()=>{var n={631:function(e){e.exports=function(){"use strict";var e=navigator.userAgent,t=navigator.platform,m=/gecko\/\d/i.test(e),n=/MSIE \d/.test(e),r=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),i=/Edge\/(\d+)/.exec(e),k=n||r||i,C=k&&(n?document.documentMode||6:+(i||r)[1]),g=!i&&/WebKit\//.test(e),o=g&&/Qt\/\d+\.\d+/.test(e),s=!i&&/Chrome\//.test(e),v=/Opera\//.test(e),c=/Apple Computer/.test(navigator.vendor),l=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),a=/PhantomJS/.test(e),u=!i&&/AppleWebKit/.test(e)&&(/Mobile\/\w+/.test(e)||navigator.maxTouchPoints>2),f=/Android/.test(e),p=u||f||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),y=u||/Mac/.test(t),h=/\bCrOS\b/.test(e),d=/win/i.test(t),A=v&&e.match(/Version\/(\d*\.\d*)/);if(A)A=Number(A[1]);if(A&&A>=15){v=false;g=true}var b=y&&(o||v&&(A==null||A<12.11)),w=m||k&&C>=9;function x(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var S=function(e,t){var n=e.className;var r=x(t).exec(n);if(r){var i=n.slice(r.index+r[0].length);e.className=n.slice(0,r.index)+(i?r[1]+i:"")}},E;function M(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function T(e,t){return M(e).appendChild(t)}function O(e,t,n,r){var i=document.createElement(e);if(n)i.className=n;if(r)i.style.cssText=r;if(typeof t=="string")i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function B(e,t,n,r){var i=O(e,t,n,r);i.setAttribute("role","presentation");return i}if(document.createRange)E=function(e,t,n,r){var i=document.createRange();i.setEnd(r||e,n);i.setStart(e,t);return i};else E=function(e,t,n){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch(e){return r}r.collapse(true);r.moveEnd("character",n);r.moveStart("character",t);return r};function L(e,t){if(t.nodeType==3)t=t.parentNode;if(e.contains)return e.contains(t);do{if(t.nodeType==11)t=t.host;if(t==e)return true}while(t=t.parentNode)}function F(){var t;try{t=document.activeElement}catch(e){t=document.body||null}while(t&&t.shadowRoot&&t.shadowRoot.activeElement)t=t.shadowRoot.activeElement;return t}function D(e,t){var n=e.className;if(!x(t).test(n))e.className+=(n?" ":"")+t}function N(e,t){var n=e.split(" ");for(var r=0;r<n.length;r++)if(n[r]&&!x(n[r]).test(t))t+=" "+n[r];return t}var P=function(e){e.select()};if(u)P=function(e){e.selectionStart=0;e.selectionEnd=e.value.length};else if(k)P=function(e){try{e.select()}catch(e){}};function W(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function R(e,t,n){if(!t)t={};for(var r in e)if(e.hasOwnProperty(r)&&(n!==false||!t.hasOwnProperty(r)))t[r]=e[r];return t}function z(e,t,n,r,i){if(t==null){t=e.search(/[^\s\u00a0]/);if(t==-1)t=e.length}for(var o=r||0,s=i||0;;){var l=e.indexOf("\t",o);if(l<0||l>=t)return s+(t-o);s+=l-o;s+=n-s%n;o=l+1}}var H=function(){this.id=null;this.f=null;this.time=0;this.handler=W(this.onTimeout,this)};function I(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}H.prototype.onTimeout=function(e){e.id=0;if(e.time<=+new Date)e.f();else setTimeout(e.handler,e.time-+new Date)},H.prototype.set=function(e,t){this.f=t;var n=+new Date+e;if(!this.id||n<this.time){clearTimeout(this.id);this.id=setTimeout(this.handler,e);this.time=n}};var U=50,j={toString:function(){return"CodeMirror.Pass"}},q={scroll:false},K={origin:"*mouse"},_={origin:"+move"};function V(e,t,n){for(var r=0,i=0;;){var o=e.indexOf("\t",r);if(o==-1)o=e.length;var s=o-r;if(o==e.length||i+s>=t)return r+Math.min(s,t-i);i+=o-r;i+=n-i%n;r=o+1;if(i>=t)return r}}var G=[""];function X(e){while(G.length<=e)G.push(Q(G)+" ");return G[e]}function Q(e){return e[e.length-1]}function $(e,t){var n=[];for(var r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function Y(e,t,n){var r=0,i=n(t);while(r<e.length&&n(e[r])<=i)r++;e.splice(r,0,t)}function Z(){}function J(e,t){var n;if(Object.create)n=Object.create(e);else{Z.prototype=e;n=new Z}if(t)R(t,n);return n}var ee=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function te(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||ee.test(e))}function ne(e,t){if(!t)return te(e);if(t.source.indexOf("\\w")>-1&&te(e))return true;return t.test(e)}function re(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return false;return true}var ie=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function oe(e){return e.charCodeAt(0)>=768&&ie.test(e)}function se(e,t,n){while((n<0?t>0:t<e.length)&&oe(e.charAt(t)))t+=n;return t}function le(e,t,n){var r=t>n?-1:1;for(;;){if(t==n)return t;var i=(t+n)/2,o=r<0?Math.ceil(i):Math.floor(i);if(o==t)return e(o)?t:n;if(e(o))n=o;else t=o+r}}function ae(e,t,n,r){if(!e)return r(t,n,"ltr",0);var i=false;for(var o=0;o<e.length;++o){var s=e[o];if(s.from<n&&s.to>t||t==n&&s.to==t){r(Math.max(s.from,t),Math.min(s.to,n),s.level==1?"rtl":"ltr",o);i=true}}if(!i)r(t,n,"ltr")}var ue=null;function ce(e,t,n){var r;ue=null;for(var i=0;i<e.length;++i){var o=e[i];if(o.from<t&&o.to>t)return i;if(o.to==t)if(o.from!=o.to&&n=="before")r=i;else ue=i;if(o.from==t)if(o.from!=o.to&&n!="before")r=i;else ue=i}return r!=null?r:ue}var fe=function(){var t="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var n="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function z(e){if(e<=247)return t.charAt(e);else if(1424<=e&&e<=1524)return"R";else if(1536<=e&&e<=1785)return n.charAt(e-1536);else if(1774<=e&&e<=2220)return"r";else if(8192<=e&&e<=8203)return"w";else if(e==8204)return"b";else return"L"}var H=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var I=/[stwN]/,U=/[LRr]/,j=/[Lb1n]/,q=/[1n]/;function K(e,t,n){this.level=e;this.from=t;this.to=n}return function(e,t){var n=t=="ltr"?"L":"R";if(e.length==0||t=="ltr"&&!H.test(e))return false;var r=e.length,i=[];for(var o=0;o<r;++o)i.push(z(e.charCodeAt(o)));for(var s=0,l=n;s<r;++s){var a=i[s];if(a=="m")i[s]=l;else l=a}for(var u=0,c=n;u<r;++u){var f=i[u];if(f=="1"&&c=="r")i[u]="n";else if(U.test(f)){c=f;if(f=="r")i[u]="R"}}for(var p=1,h=i[0];p<r-1;++p){var d=i[p];if(d=="+"&&h=="1"&&i[p+1]=="1")i[p]="1";else if(d==","&&h==i[p+1]&&(h=="1"||h=="n"))i[p]=h;h=d}for(var m=0;m<r;++m){var g=i[m];if(g==",")i[m]="N";else if(g=="%"){var v=void 0;for(v=m+1;v<r&&i[v]=="%";++v);var y=m&&i[m-1]=="!"||v<r&&i[v]=="1"?"1":"N";for(var A=m;A<v;++A)i[A]=y;m=v-1}}for(var b=0,C=n;b<r;++b){var w=i[b];if(C=="L"&&w=="1")i[b]="L";else if(U.test(w))C=w}for(var x=0;x<r;++x)if(I.test(i[x])){var k=void 0;for(k=x+1;k<r&&I.test(i[k]);++k);var S=(x?i[x-1]:n)=="L";var E=(k<r?i[k]:n)=="L";var M=S==E?S?"L":"R":n;for(var T=x;T<k;++T)i[T]=M;x=k-1}var B=[],L;for(var O=0;O<r;)if(j.test(i[O])){var F=O;for(++O;O<r&&j.test(i[O]);++O);B.push(new K(0,F,O))}else{var D=O,N=B.length,P=t=="rtl"?1:0;for(++O;O<r&&i[O]!="L";++O);for(var W=D;W<O;)if(q.test(i[W])){if(D<W){B.splice(N,0,new K(1,D,W));N+=P}var R=W;for(++W;W<O&&q.test(i[W]);++W);B.splice(N,0,new K(2,R,W));N+=P;D=W}else++W;if(D<O)B.splice(N,0,new K(1,D,O))}if(t=="ltr"){if(B[0].level==1&&(L=e.match(/^\s+/))){B[0].from=L[0].length;B.unshift(new K(0,0,L[0].length))}if(Q(B).level==1&&(L=e.match(/\s+$/))){Q(B).to-=L[0].length;B.push(new K(0,r-L[0].length,r))}}return t=="rtl"?B.reverse():B}}();function pe(e,t){var n=e.order;if(n==null)n=e.order=fe(e.text,t);return n}var he=[],de=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,false);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||he).concat(n)}};function me(e,t){return e._handlers&&e._handlers[t]||he}function ge(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,false);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers,i=r&&r[t];if(i){var o=I(i,n);if(o>-1)r[t]=i.slice(0,o).concat(i.slice(o+1))}}}function ve(e,t){var n=me(e,t);if(!n.length)return;var r=Array.prototype.slice.call(arguments,2);for(var i=0;i<n.length;++i)n[i].apply(null,r)}function ye(e,t,n){if(typeof t=="string")t={type:t,preventDefault:function(){this.defaultPrevented=true}};ve(e,n||t.type,e,t);return ke(t)||t.codemirrorIgnore}function Ae(e){var t=e._handlers&&e._handlers.cursorActivity;if(!t)return;var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]);for(var r=0;r<t.length;++r)if(I(n,t[r])==-1)n.push(t[r])}function be(e,t){return me(e,t).length>0}function Ce(e){e.prototype.on=function(e,t){de(this,e,t)};e.prototype.off=function(e,t){ge(this,e,t)}}function we(e){if(e.preventDefault)e.preventDefault();else e.returnValue=false}function xe(e){if(e.stopPropagation)e.stopPropagation();else e.cancelBubble=true}function ke(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==false}function Se(e){we(e);xe(e)}function Ee(e){return e.target||e.srcElement}function Me(e){var t=e.which;if(t==null)if(e.button&1)t=1;else if(e.button&2)t=3;else if(e.button&4)t=2;if(y&&e.ctrlKey&&t==1)t=3;return t}var Te=function(){if(k&&C<9)return false;var e=O("div");return"draggable"in e||"dragDrop"in e}(),Be,Le;function Oe(e){if(Be==null){var t=O("span","​");T(e,O("span",[t,document.createTextNode("x")]));if(e.firstChild.offsetHeight!=0)Be=t.offsetWidth<=1&&t.offsetHeight>2&&!(k&&C<8)}var n=Be?O("span","​"):O("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");n.setAttribute("cm-text","");return n}function Fe(e){if(Le!=null)return Le;var t=T(e,document.createTextNode("AخA"));var n=E(t,0,1).getBoundingClientRect();var r=E(t,1,2).getBoundingClientRect();M(e);if(!n||n.left==n.right)return false;return Le=r.right-n.right<3}var De="\n\nb".split(/\n/).length!=3?function(e){var t=0,n=[],r=e.length;while(t<=r){var i=e.indexOf("\n",t);if(i==-1)i=e.length;var o=e.slice(t,e.charAt(i-1)=="\r"?i-1:i);var s=o.indexOf("\r");if(s!=-1){n.push(o.slice(0,s));t+=s+1}else{n.push(o);t=i+1}}return n}:function(e){return e.split(/\r\n?|\n/)},Ne=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return false}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}if(!t||t.parentElement()!=e)return false;return t.compareEndPoints("StartToEnd",t)!=0},Pe=function(){var e=O("div");if("oncopy"in e)return true;e.setAttribute("oncopy","return;");return typeof e.oncopy=="function"}(),We=null;function Re(e){if(We!=null)return We;var t=T(e,O("span","x"));var n=t.getBoundingClientRect();var r=E(t,0,1).getBoundingClientRect();return We=Math.abs(n.left-r.left)>1}var ze={},He={};function Ie(e,t){if(2<arguments.length)t.dependencies=Array.prototype.slice.call(arguments,2);ze[e]=t}function Ue(e,t){He[e]=t}function je(e){if(typeof e=="string"&&He.hasOwnProperty(e))e=He[e];else if(e&&typeof e.name=="string"&&He.hasOwnProperty(e.name)){var t=He[e.name];if(typeof t=="string")t={name:t};e=J(t,e);e.name=t.name}else if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return je("application/xml");else if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return je("application/json");if(typeof e=="string")return{name:e};else return e||{name:"null"}}function qe(e,t){t=je(t);var n=ze[t.name];if(!n)return qe(e,"text/plain");var r=n(e,t);if(Ke.hasOwnProperty(t.name)){var i=Ke[t.name];for(var o in i){if(!i.hasOwnProperty(o))continue;if(r.hasOwnProperty(o))r["_"+o]=r[o];r[o]=i[o]}}r.name=t.name;if(t.helperType)r.helperType=t.helperType;if(t.modeProps)for(var s in t.modeProps)r[s]=t.modeProps[s];return r}var Ke={};function _e(e,t){var n=Ke.hasOwnProperty(e)?Ke[e]:Ke[e]={};R(t,n)}function Ve(e,t){if(t===true)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];if(i instanceof Array)i=i.concat([]);n[r]=i}return n}function Ge(e,t){var n;while(e.innerMode){n=e.innerMode(t);if(!n||n.mode==e)break;t=n.state;e=n.mode}return n||{mode:e,state:t}}function Xe(e,t,n){return e.startState?e.startState(t,n):true}var Qe=function(e,t,n){this.pos=this.start=0;this.string=e;this.tabSize=t||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0;this.lineOracle=n};function $e(e,t){t-=e.first;if(t<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");var n=e;while(!n.lines)for(var r=0;;++r){var i=n.children[r],o=i.chunkSize();if(t<o){n=i;break}t-=o}return n.lines[t]}function Ye(e,n,r){var i=[],o=n.line;e.iter(n.line,r.line+1,function(e){var t=e.text;if(o==r.line)t=t.slice(0,r.ch);if(o==n.line)t=t.slice(n.ch);i.push(t);++o});return i}function Ze(e,t,n){var r=[];e.iter(t,n,function(e){r.push(e.text)});return r}function Je(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function et(e){if(e.parent==null)return null;var t=e.parent,n=I(t.lines,e);for(var r=t.parent;r;t=r,r=r.parent)for(var i=0;;++i){if(r.children[i]==t)break;n+=r.children[i].chunkSize()}return n+t.first}function tt(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],o=i.height;if(t<o){e=i;continue e}t-=o;n+=i.chunkSize()}return n}while(!e.lines);var s=0;for(;s<e.lines.length;++s){var l=e.lines[s],a=l.height;if(t<a)break;t-=a}return n+s}function nt(e,t){return t>=e.first&&t<e.first+e.size}function rt(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function it(e,t,n){if(n===void 0)n=null;if(!(this instanceof it))return new it(e,t,n);this.line=e;this.ch=t;this.sticky=n}function ot(e,t){return e.line-t.line||e.ch-t.ch}function st(e,t){return e.sticky==t.sticky&&ot(e,t)==0}function lt(e){return it(e.line,e.ch)}function at(e,t){return ot(e,t)<0?t:e}function ut(e,t){return ot(e,t)<0?e:t}function ct(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function ft(e,t){if(t.line<e.first)return it(e.first,0);var n=e.first+e.size-1;if(t.line>n)return it(n,$e(e,n).text.length);return pt(t,$e(e,t.line).text.length)}function pt(e,t){var n=e.ch;if(n==null||n>t)return it(e.line,t);else if(n<0)return it(e.line,0);else return e}function ht(e,t){var n=[];for(var r=0;r<t.length;r++)n[r]=ft(e,t[r]);return n}Qe.prototype.eol=function(){return this.pos>=this.string.length},Qe.prototype.sol=function(){return this.pos==this.lineStart},Qe.prototype.peek=function(){return this.string.charAt(this.pos)||undefined},Qe.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Qe.prototype.eat=function(e){var t=this.string.charAt(this.pos);var n;if(typeof e=="string")n=t==e;else n=t&&(e.test?e.test(t):e(t));if(n){++this.pos;return t}},Qe.prototype.eatWhile=function(e){var t=this.pos;while(this.eat(e));return this.pos>t},Qe.prototype.eatSpace=function(){var e=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>e},Qe.prototype.skipToEnd=function(){this.pos=this.string.length},Qe.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1){this.pos=t;return true}},Qe.prototype.backUp=function(e){this.pos-=e},Qe.prototype.column=function(){if(this.lastColumnPos<this.start){this.lastColumnValue=z(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?z(this.string,this.lineStart,this.tabSize):0)},Qe.prototype.indentation=function(){return z(this.string,null,this.tabSize)-(this.lineStart?z(this.string,this.lineStart,this.tabSize):0)},Qe.prototype.match=function(e,t,n){if(typeof e=="string"){var r=function(e){return n?e.toLowerCase():e};var i=this.string.substr(this.pos,e.length);if(r(i)==r(e)){if(t!==false)this.pos+=e.length;return true}}else{var o=this.string.slice(this.pos).match(e);if(o&&o.index>0)return null;if(o&&t!==false)this.pos+=o[0].length;return o}},Qe.prototype.current=function(){return this.string.slice(this.start,this.pos)},Qe.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Qe.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Qe.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var dt=function(e,t){this.state=e;this.lookAhead=t},mt=function(e,t,n,r){this.state=t;this.doc=e;this.line=n;this.maxLookAhead=r||0;this.baseTokens=null;this.baseTokenPos=1};function gt(t,n,r,e){var a=[t.state.modeGen],i={};St(t,n.text,t.doc.mode,r,function(e,t){return a.push(e,t)},i,e);var u=r.state;var o=function(e){r.baseTokens=a;var o=t.state.overlays[e],s=1,l=0;r.state=true;St(t,n.text,o.mode,r,function(e,t){var n=s;while(l<e){var r=a[s];if(r>e)a.splice(s,1,e,a[s+1],r);s+=2;l=Math.min(e,r)}if(!t)return;if(o.opaque){a.splice(n,s-n,e,"overlay "+t);s=n+2}else for(;n<s;n+=2){var i=a[n+1];a[n+1]=(i?i+" ":"")+"overlay "+t}},i);r.state=u;r.baseTokens=null;r.baseTokenPos=1};for(var s=0;s<t.state.overlays.length;++s)o(s);return{styles:a,classes:i.bgClass||i.textClass?i:null}}function vt(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=yt(e,et(t));var i=t.text.length>e.options.maxHighlightLength&&Ve(e.doc.mode,r.state);var o=gt(e,t,r);if(i)r.state=i;t.stateAfter=r.save(!i);t.styles=o.styles;if(o.classes)t.styleClasses=o.classes;else if(t.styleClasses)t.styleClasses=null;if(n===e.doc.highlightFrontier)e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier)}return t.styles}function yt(n,r,e){var t=n.doc,i=n.display;if(!t.mode.startState)return new mt(t,true,r);var o=Et(n,r,e);var s=o>t.first&&$e(t,o-1).stateAfter;var l=s?mt.fromSaved(t,s,o):new mt(t,Xe(t.mode),o);t.iter(o,r,function(e){At(n,e.text,l);var t=l.line;e.stateAfter=t==r-1||t%5==0||t>=i.viewFrom&&t<i.viewTo?l.save():null;l.nextLine()});if(e)t.modeFrontier=l.line;return l}function At(e,t,n,r){var i=e.doc.mode;var o=new Qe(t,e.options.tabSize,n);o.start=o.pos=r||0;if(t=="")bt(i,n.state);while(!o.eol()){Ct(i,o,n.state);o.start=o.pos}}function bt(e,t){if(e.blankLine)return e.blankLine(t);if(!e.innerMode)return;var n=Ge(e,t);if(n.mode.blankLine)return n.mode.blankLine(n.state)}function Ct(e,t,n,r){for(var i=0;i<10;i++){if(r)r[0]=Ge(e,n).mode;var o=e.token(t,n);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}mt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);if(t!=null&&e>this.maxLookAhead)this.maxLookAhead=e;return t},mt.prototype.baseToken=function(e){if(!this.baseTokens)return null;while(this.baseTokens[this.baseTokenPos]<=e)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},mt.prototype.nextLine=function(){this.line++;if(this.maxLookAhead>0)this.maxLookAhead--},mt.fromSaved=function(e,t,n){if(t instanceof dt)return new mt(e,Ve(e.mode,t.state),n,t.lookAhead);else return new mt(e,Ve(e.mode,t),n)},mt.prototype.save=function(e){var t=e!==false?Ve(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new dt(t,this.maxLookAhead):t};var wt=function(e,t,n){this.start=e.start;this.end=e.pos;this.string=e.current();this.type=t||null;this.state=n};function xt(e,t,n,r){var i=e.doc,o=i.mode,s;t=ft(i,t);var l=$e(i,t.line),a=yt(e,t.line,n);var u=new Qe(l.text,e.options.tabSize,a),c;if(r)c=[];while((r||u.pos<t.ch)&&!u.eol()){u.start=u.pos;s=Ct(o,u,a.state);if(r)c.push(new wt(u,s,Ve(i.mode,a.state)))}return r?c:new wt(u,s,a.state)}function kt(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";if(t[r]==null)t[r]=n[2];else if(!new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(t[r]))t[r]+=" "+n[2]}return e}function St(e,t,n,r,i,o,s){var l=n.flattenSpans;if(l==null)l=e.options.flattenSpans;var a=0,u=null;var c=new Qe(t,e.options.tabSize,r),f;var p=e.options.addModeClass&&[null];if(t=="")kt(bt(n,r.state),o);while(!c.eol()){if(c.pos>e.options.maxHighlightLength){l=false;if(s)At(e,t,r,c.pos);c.pos=t.length;f=null}else f=kt(Ct(n,c,r.state,p),o);if(p){var h=p[0].name;if(h)f="m-"+(f?h+" "+f:h)}if(!l||u!=f){while(a<c.start){a=Math.min(c.start,a+5e3);i(a,u)}u=f}c.start=c.pos}while(a<c.pos){var d=Math.min(c.pos,a+5e3);i(d,u);a=d}}function Et(e,t,n){var r,i,o=e.doc;var s=n?-1:t-(e.doc.mode.innerMode?1e3:100);for(var l=t;l>s;--l){if(l<=o.first)return o.first;var a=$e(o,l-1),u=a.stateAfter;if(u&&(!n||l+(u instanceof dt?u.lookAhead:0)<=o.modeFrontier))return l;var c=z(a.text,null,e.options.tabSize);if(i==null||r>c){i=l-1;r=c}}return i}function Mt(e,t){e.modeFrontier=Math.min(e.modeFrontier,t);if(e.highlightFrontier<t-10)return;var n=e.first;for(var r=t-1;r>n;r--){var i=$e(e,r).stateAfter;if(i&&(!(i instanceof dt)||r+i.lookAhead<t)){n=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}var Tt=false,Bt=false;function Lt(){Tt=true}function Ot(){Bt=true}function Ft(e,t,n){this.marker=e;this.from=t;this.to=n}function Dt(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function Nt(e,t){var n;for(var r=0;r<e.length;++r)if(e[r]!=t)(n||(n=[])).push(e[r]);return n}function Pt(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t];t.marker.attachLine(e)}function Wt(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var o=e[i],s=o.marker;var l=o.from==null||(s.inclusiveLeft?o.from<=t:o.from<t);if(l||o.from==t&&s.type=="bookmark"&&(!n||!o.marker.insertLeft)){var a=o.to==null||(s.inclusiveRight?o.to>=t:o.to>t);(r||(r=[])).push(new Ft(s,o.from,a?null:o.to))}}return r}function Rt(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var o=e[i],s=o.marker;var l=o.to==null||(s.inclusiveRight?o.to>=t:o.to>t);if(l||o.from==t&&s.type=="bookmark"&&(!n||o.marker.insertLeft)){var a=o.from==null||(s.inclusiveLeft?o.from<=t:o.from<t);(r||(r=[])).push(new Ft(s,a?null:o.from-t,o.to==null?null:o.to-t))}}return r}function zt(e,t){if(t.full)return null;var n=nt(e,t.from.line)&&$e(e,t.from.line).markedSpans;var r=nt(e,t.to.line)&&$e(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,o=t.to.ch,s=ot(t.from,t.to)==0;var l=Wt(n,i,s);var a=Rt(r,o,s);var u=t.text.length==1,c=Q(t.text).length+(u?i:0);if(l)for(var f=0;f<l.length;++f){var p=l[f];if(p.to==null){var h=Dt(a,p.marker);if(!h)p.to=i;else if(u)p.to=h.to==null?null:h.to+c}}if(a)for(var d=0;d<a.length;++d){var m=a[d];if(m.to!=null)m.to+=c;if(m.from==null){var g=Dt(l,m.marker);if(!g){m.from=c;if(u)(l||(l=[])).push(m)}}else{m.from+=c;if(u)(l||(l=[])).push(m)}}if(l)l=Ht(l);if(a&&a!=l)a=Ht(a);var v=[l];if(!u){var y=t.text.length-2,A;if(y>0&&l)for(var b=0;b<l.length;++b)if(l[b].to==null)(A||(A=[])).push(new Ft(l[b].marker,null,null));for(var C=0;C<y;++C)v.push(A);v.push(a)}return v}function Ht(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.from!=null&&n.from==n.to&&n.marker.clearWhenEmpty!==false)e.splice(t--,1)}if(!e.length)return null;return e}function It(e,t,n){var r=null;e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;if(n.readOnly&&(!r||I(r,n)==-1))(r||(r=[])).push(n)}});if(!r)return null;var i=[{from:t,to:n}];for(var o=0;o<r.length;++o){var s=r[o],l=s.find(0);for(var a=0;a<i.length;++a){var u=i[a];if(ot(u.to,l.from)<0||ot(u.from,l.to)>0)continue;var c=[a,1],f=ot(u.from,l.from),p=ot(u.to,l.to);if(f<0||!s.inclusiveLeft&&!f)c.push({from:u.from,to:l.from});if(p>0||!s.inclusiveRight&&!p)c.push({from:l.to,to:u.to});i.splice.apply(i,c);a+=c.length-3}}return i}function Ut(e){var t=e.markedSpans;if(!t)return;for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}function jt(e,t){if(!t)return;for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}function qt(e){return e.inclusiveLeft?-1:0}function Kt(e){return e.inclusiveRight?1:0}function _t(e,t){var n=e.lines.length-t.lines.length;if(n!=0)return n;var r=e.find(),i=t.find();var o=ot(r.from,i.from)||qt(e)-qt(t);if(o)return-o;var s=ot(r.to,i.to)||Kt(e)-Kt(t);if(s)return s;return t.id-e.id}function Vt(e,t){var n=Bt&&e.markedSpans,r;if(n)for(var i=void 0,o=0;o<n.length;++o){i=n[o];if(i.marker.collapsed&&(t?i.from:i.to)==null&&(!r||_t(r,i.marker)<0))r=i.marker}return r}function Gt(e){return Vt(e,true)}function Xt(e){return Vt(e,false)}function Qt(e,t){var n=Bt&&e.markedSpans,r;if(n)for(var i=0;i<n.length;++i){var o=n[i];if(o.marker.collapsed&&(o.from==null||o.from<t)&&(o.to==null||o.to>t)&&(!r||_t(r,o.marker)<0))r=o.marker}return r}function $t(e,t,n,r,i){var o=$e(e,t);var s=Bt&&o.markedSpans;if(s)for(var l=0;l<s.length;++l){var a=s[l];if(!a.marker.collapsed)continue;var u=a.marker.find(0);var c=ot(u.from,n)||qt(a.marker)-qt(i);var f=ot(u.to,r)||Kt(a.marker)-Kt(i);if(c>=0&&f<=0||c<=0&&f>=0)continue;if(c<=0&&(a.marker.inclusiveRight&&i.inclusiveLeft?ot(u.to,n)>=0:ot(u.to,n)>0)||c>=0&&(a.marker.inclusiveRight&&i.inclusiveLeft?ot(u.from,r)<=0:ot(u.from,r)<0))return true}}function Yt(e){var t;while(t=Gt(e))e=t.find(-1,true).line;return e}function Zt(e){var t;while(t=Xt(e))e=t.find(1,true).line;return e}function Jt(e){var t,n;while(t=Xt(e)){e=t.find(1,true).line;(n||(n=[])).push(e)}return n}function en(e,t){var n=$e(e,t),r=Yt(n);if(n==r)return t;return et(r)}function tn(e,t){if(t>e.lastLine())return t;var n=$e(e,t),r;if(!nn(e,n))return t;while(r=Xt(n))n=r.find(1,true).line;return et(n)+1}function nn(e,t){var n=Bt&&t.markedSpans;if(n)for(var r=void 0,i=0;i<n.length;++i){r=n[i];if(!r.marker.collapsed)continue;if(r.from==null)return true;if(r.marker.widgetNode)continue;if(r.from==0&&r.marker.inclusiveLeft&&rn(e,t,r))return true}}function rn(e,t,n){if(n.to==null){var r=n.marker.find(1,true);return rn(e,r.line,Dt(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return true;for(var i=void 0,o=0;o<t.markedSpans.length;++o){i=t.markedSpans[o];if(i.marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(i.to==null||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&rn(e,t,i))return true}}function on(e){e=Yt(e);var t=0,n=e.parent;for(var r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;else t+=i.height}for(var o=n.parent;o;n=o,o=n.parent)for(var s=0;s<o.children.length;++s){var l=o.children[s];if(l==n)break;else t+=l.height}return t}function sn(e){if(e.height==0)return 0;var t=e.text.length,n,r=e;while(n=Gt(r)){var i=n.find(0,true);r=i.from.line;t+=i.from.ch-i.to.ch}r=e;while(n=Xt(r)){var o=n.find(0,true);t-=r.text.length-o.from.ch;r=o.to.line;t+=r.text.length-o.to.ch}return t}function ln(e){var n=e.display,t=e.doc;n.maxLine=$e(t,t.first);n.maxLineLength=sn(n.maxLine);n.maxLineChanged=true;t.iter(function(e){var t=sn(e);if(t>n.maxLineLength){n.maxLineLength=t;n.maxLine=e}})}var an=function(e,t,n){this.text=e;jt(this,t);this.height=n?n(this):1};function un(e,t,n,r){e.text=t;if(e.stateAfter)e.stateAfter=null;if(e.styles)e.styles=null;if(e.order!=null)e.order=null;Ut(e);jt(e,n);var i=r?r(e):1;if(i!=e.height)Je(e,i)}function cn(e){e.parent=null;Ut(e)}an.prototype.lineNo=function(){return et(this)},Ce(an);var fn={},pn={};function hn(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?pn:fn;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function dn(e,t){var n=B("span",null,null,g?"padding-right: .1px":null);var r={pre:B("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:false,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var o=i?t.rest[i-1]:t.line,s=void 0;r.pos=0;r.addToken=gn;if(Fe(e.display.measure)&&(s=pe(o,e.doc.direction)))r.addToken=yn(r.addToken,s);r.map=[];var l=t!=e.display.externalMeasured&&et(o);bn(o,r,vt(e,o,l));if(o.styleClasses){if(o.styleClasses.bgClass)r.bgClass=N(o.styleClasses.bgClass,r.bgClass||"");if(o.styleClasses.textClass)r.textClass=N(o.styleClasses.textClass,r.textClass||"")}if(r.map.length==0)r.map.push(0,0,r.content.appendChild(Oe(e.display.measure)));if(i==0){t.measure.map=r.map;t.measure.cache={}}else{(t.measure.maps||(t.measure.maps=[])).push(r.map);(t.measure.caches||(t.measure.caches=[])).push({})}}if(g){var a=r.content.lastChild;if(/\bcm-tab\b/.test(a.className)||a.querySelector&&a.querySelector(".cm-tab"))r.content.className="cm-tab-wrap-hack"}ve(e,"renderLine",e,t.line,r.pre);if(r.pre.className)r.textClass=N(r.pre.className,r.textClass||"");return r}function mn(e){var t=O("span","•","cm-invalidchar");t.title="\\u"+e.charCodeAt(0).toString(16);t.setAttribute("aria-label",t.title);return t}function gn(e,t,n,r,i,o,s){if(!t)return;var l=e.splitSpaces?vn(t,e.trailingSpace):t;var a=e.cm.state.specialChars,u=false;var c;if(!a.test(t)){e.col+=t.length;c=document.createTextNode(l);e.map.push(e.pos,e.pos+t.length,c);if(k&&C<9)u=true;e.pos+=t.length}else{c=document.createDocumentFragment();var f=0;while(true){a.lastIndex=f;var p=a.exec(t);var h=p?p.index-f:t.length-f;if(h){var d=document.createTextNode(l.slice(f,f+h));if(k&&C<9)c.appendChild(O("span",[d]));else c.appendChild(d);e.map.push(e.pos,e.pos+h,d);e.col+=h;e.pos+=h}if(!p)break;f+=h+1;var m=void 0;if(p[0]=="\t"){var g=e.cm.options.tabSize,v=g-e.col%g;m=c.appendChild(O("span",X(v),"cm-tab"));m.setAttribute("role","presentation");m.setAttribute("cm-text","\t");e.col+=v}else if(p[0]=="\r"||p[0]=="\n"){m=c.appendChild(O("span",p[0]=="\r"?"␍":"␤","cm-invalidchar"));m.setAttribute("cm-text",p[0]);e.col+=1}else{m=e.cm.options.specialCharPlaceholder(p[0]);m.setAttribute("cm-text",p[0]);if(k&&C<9)c.appendChild(O("span",[m]));else c.appendChild(m);e.col+=1}e.map.push(e.pos,e.pos+1,m);e.pos++}}e.trailingSpace=l.charCodeAt(t.length-1)==32;if(n||r||i||u||o||s){var y=n||"";if(r)y+=r;if(i)y+=i;var A=O("span",[c],y,o);if(s)for(var b in s)if(s.hasOwnProperty(b)&&b!="style"&&b!="class")A.setAttribute(b,s[b]);return e.content.appendChild(A)}e.content.appendChild(c)}function vn(e,t){if(e.length>1&&!/  /.test(e))return e;var n=t,r="";for(var i=0;i<e.length;i++){var o=e.charAt(i);if(o==" "&&n&&(i==e.length-1||e.charCodeAt(i+1)==32))o=" ";r+=o;n=o==" "}return r}function yn(f,p){return function(e,t,n,r,i,o,s){n=n?n+" cm-force-border":"cm-force-border";var l=e.pos,a=l+t.length;for(;;){var u=void 0;for(var c=0;c<p.length;c++){u=p[c];if(u.to>l&&u.from<=l)break}if(u.to>=a)return f(e,t,n,r,i,o,s);f(e,t.slice(0,u.to-l),n,r,null,o,s);r=null;t=t.slice(u.to-l);l=u.to}}}function An(e,t,n,r){var i=!r&&n.widgetNode;if(i)e.map.push(e.pos,e.pos+t,i);if(!r&&e.cm.display.input.needsContentAttribute){if(!i)i=e.content.appendChild(document.createElement("span"));i.setAttribute("cm-marker",n.id)}if(i){e.cm.display.input.setUneditable(i);e.content.appendChild(i)}e.pos+=t;e.trailingSpace=false}function bn(e,t,n){var r=e.markedSpans,i=e.text,o=0;if(!r){for(var s=1;s<n.length;s+=2)t.addToken(t,i.slice(o,o=n[s]),hn(n[s+1],t.cm.options));return}var l=i.length,a=0,u=1,c="",f,p;var h=0,d,m,g,v,y;for(;;){if(h==a){d=m=g=p="";y=null;v=null;h=Infinity;var A=[],b=void 0;for(var C=0;C<r.length;++C){var w=r[C],x=w.marker;if(x.type=="bookmark"&&w.from==a&&x.widgetNode)A.push(x);else if(w.from<=a&&(w.to==null||w.to>a||x.collapsed&&w.to==a&&w.from==a)){if(w.to!=null&&w.to!=a&&h>w.to){h=w.to;m=""}if(x.className)d+=" "+x.className;if(x.css)p=(p?p+";":"")+x.css;if(x.startStyle&&w.from==a)g+=" "+x.startStyle;if(x.endStyle&&w.to==h)(b||(b=[])).push(x.endStyle,w.to);if(x.title)(y||(y={})).title=x.title;if(x.attributes)for(var k in x.attributes)(y||(y={}))[k]=x.attributes[k];if(x.collapsed&&(!v||_t(v.marker,x)<0))v=w}else if(w.from>a&&h>w.from)h=w.from}if(b)for(var S=0;S<b.length;S+=2)if(b[S+1]==h)m+=" "+b[S];if(!v||v.from==a)for(var E=0;E<A.length;++E)An(t,0,A[E]);if(v&&(v.from||0)==a){An(t,(v.to==null?l+1:v.to)-a,v.marker,v.from==null);if(v.to==null)return;if(v.to==a)v=false}}if(a>=l)break;var M=Math.min(l,h);while(true){if(c){var T=a+c.length;if(!v){var B=T>M?c.slice(0,M-a):c;t.addToken(t,B,f?f+d:d,g,a+B.length==h?m:"",p,y)}if(T>=M){c=c.slice(M-a);a=M;break}a=T;g=""}c=i.slice(o,o=n[u++]);f=hn(n[u++],t.cm.options)}}}function Cn(e,t,n){this.line=t;this.rest=Jt(t);this.size=this.rest?et(Q(this.rest))-n+1:1;this.node=this.text=null;this.hidden=nn(e,t)}function wn(e,t,n){var r=[],i;for(var o=t;o<n;o=i){var s=new Cn(e.doc,$e(e.doc,o),o);i=o+s.size;r.push(s)}return r}var xn=null;function kn(e){if(xn)xn.ops.push(e);else e.ownsGroup=xn={ops:[e],delayedCallbacks:[]}}function Sn(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)while(i.cursorActivityCalled<i.cursorActivityHandlers.length)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<t.length)}function En(e,t){var n=e.ownsGroup;if(!n)return;try{Sn(n)}finally{xn=null;t(n)}}var Mn=null;function Tn(e,t){var n=me(e,t);if(!n.length)return;var r=Array.prototype.slice.call(arguments,2),i;if(xn)i=xn.delayedCallbacks;else if(Mn)i=Mn;else{i=Mn=[];setTimeout(Bn,0)}var o=function(e){i.push(function(){return n[e].apply(null,r)})};for(var s=0;s<n.length;++s)o(s)}function Bn(){var e=Mn;Mn=null;for(var t=0;t<e.length;++t)e[t]()}function Ln(e,t,n,r){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];if(o=="text")Nn(e,t);else if(o=="gutter")Wn(e,t,n,r);else if(o=="class")Pn(e,t);else if(o=="widget")Rn(e,t,r)}t.changes=null}function On(e){if(e.node==e.text){e.node=O("div",null,null,"position: relative");if(e.text.parentNode)e.text.parentNode.replaceChild(e.node,e.text);e.node.appendChild(e.text);if(k&&C<8)e.node.style.zIndex=2}return e.node}function Fn(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n)n+=" CodeMirror-linebackground";if(t.background)if(n)t.background.className=n;else{t.background.parentNode.removeChild(t.background);t.background=null}else if(n){var r=On(t);t.background=r.insertBefore(O("div",null,n),r.firstChild);e.display.input.setUneditable(t.background)}}function Dn(e,t){var n=e.display.externalMeasured;if(n&&n.line==t.line){e.display.externalMeasured=null;t.measure=n.measure;return n.built}return dn(e,t)}function Nn(e,t){var n=t.text.className;var r=Dn(e,t);if(t.text==t.node)t.node=r.pre;t.text.parentNode.replaceChild(r.pre,t.text);t.text=r.pre;if(r.bgClass!=t.bgClass||r.textClass!=t.textClass){t.bgClass=r.bgClass;t.textClass=r.textClass;Pn(e,t)}else if(n)t.text.className=n}function Pn(e,t){Fn(e,t);if(t.line.wrapClass)On(t).className=t.line.wrapClass;else if(t.node!=t.text)t.node.className="";var n=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=n||""}function Wn(e,t,n,r){if(t.gutter){t.node.removeChild(t.gutter);t.gutter=null}if(t.gutterBackground){t.node.removeChild(t.gutterBackground);t.gutterBackground=null}if(t.line.gutterClass){var i=On(t);t.gutterBackground=O("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px");e.display.input.setUneditable(t.gutterBackground);i.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var s=On(t);var l=t.gutter=O("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");e.display.input.setUneditable(l);s.insertBefore(l,t.text);if(t.line.gutterClass)l.className+=" "+t.line.gutterClass;if(e.options.lineNumbers&&(!o||!o["CodeMirror-linenumbers"]))t.lineNumber=l.appendChild(O("div",rt(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"));if(o)for(var a=0;a<e.display.gutterSpecs.length;++a){var u=e.display.gutterSpecs[a].className,c=o.hasOwnProperty(u)&&o[u];if(c)l.appendChild(O("div",[c],"CodeMirror-gutter-elt","left: "+r.gutterLeft[u]+"px; width: "+r.gutterWidth[u]+"px"))}}}function Rn(e,t,n){if(t.alignable)t.alignable=null;var r=x("CodeMirror-linewidget");for(var i=t.node.firstChild,o=void 0;i;i=o){o=i.nextSibling;if(r.test(i.className))t.node.removeChild(i)}Hn(e,t,n)}function zn(e,t,n,r){var i=Dn(e,t);t.text=t.node=i.pre;if(i.bgClass)t.bgClass=i.bgClass;if(i.textClass)t.textClass=i.textClass;Pn(e,t);Wn(e,t,n,r);Hn(e,t,r);return t.node}function Hn(e,t,n){In(e,t.line,t,n,true);if(t.rest)for(var r=0;r<t.rest.length;r++)In(e,t.rest[r],t,n,false)}function In(e,t,n,r,i){if(!t.widgets)return;var o=On(n);for(var s=0,l=t.widgets;s<l.length;++s){var a=l[s],u=O("div",[a.node],"CodeMirror-linewidget"+(a.className?" "+a.className:""));if(!a.handleMouseEvents)u.setAttribute("cm-ignore-events","true");Un(a,u,n,r);e.display.input.setUneditable(u);if(i&&a.above)o.insertBefore(u,n.gutter||n.text);else o.appendChild(u);Tn(a,"redraw")}}function Un(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px";if(!e.coverGutter){i-=r.gutterTotalWidth;t.style.paddingLeft=r.gutterTotalWidth+"px"}t.style.width=i+"px"}if(e.coverGutter){t.style.zIndex=5;t.style.position="relative";if(!e.noHScroll)t.style.marginLeft=-r.gutterTotalWidth+"px"}}function jn(e){if(e.height!=null)return e.height;var t=e.doc.cm;if(!t)return 0;if(!L(document.body,e.node)){var n="position: relative;";if(e.coverGutter)n+="margin-left: -"+t.display.gutters.offsetWidth+"px;";if(e.noHScroll)n+="width: "+t.display.wrapper.clientWidth+"px;";T(t.display.measure,O("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function qn(e,t){for(var n=Ee(t);n!=e.wrapper;n=n.parentNode)if(!n||n.nodeType==1&&n.getAttribute("cm-ignore-events")=="true"||n.parentNode==e.sizer&&n!=e.mover)return true}function Kn(e){return e.lineSpace.offsetTop}function _n(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Vn(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=T(e.measure,O("pre","x","CodeMirror-line-like"));var n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle;var r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};if(!isNaN(r.left)&&!isNaN(r.right))e.cachedPaddingH=r;return r}function Gn(e){return U-e.display.nativeBarWidth}function Xn(e){return e.display.scroller.clientWidth-Gn(e)-e.display.barWidth}function Qn(e){return e.display.scroller.clientHeight-Gn(e)-e.display.barHeight}function $n(e,t,n){var r=e.options.lineWrapping;var i=r&&Xn(e);if(!t.measure.heights||r&&t.measure.width!=i){var o=t.measure.heights=[];if(r){t.measure.width=i;var s=t.text.firstChild.getClientRects();for(var l=0;l<s.length-1;l++){var a=s[l],u=s[l+1];if(Math.abs(a.bottom-u.bottom)>2)o.push((a.bottom+u.top)/2-n.top)}}o.push(n.bottom-n.top)}}function Yn(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var i=0;i<e.rest.length;i++)if(et(e.rest[i])>n)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:true}}function Zn(e,t){t=Yt(t);var n=et(t);var r=e.display.externalMeasured=new Cn(e.doc,t,n);r.lineN=n;var i=r.built=dn(e,r);r.text=i.pre;T(e.display.lineMeasure,i.pre);return r}function Jn(e,t,n,r){return nr(e,tr(e,t),n,r)}function er(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Pr(e,t)];var n=e.display.externalMeasured;if(n&&t>=n.lineN&&t<n.lineN+n.size)return n}function tr(e,t){var n=et(t);var r=er(e,n);if(r&&!r.text)r=null;else if(r&&r.changes){Ln(e,r,n,Lr(e));e.curOp.forceUpdate=true}if(!r)r=Zn(e,t);var i=Yn(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:false}}function nr(e,t,n,r,i){if(t.before)n=-1;var o=n+(r||""),s;if(t.cache.hasOwnProperty(o))s=t.cache[o];else{if(!t.rect)t.rect=t.view.text.getBoundingClientRect();if(!t.hasHeights){$n(e,t.view,t.rect);t.hasHeights=true}s=lr(e,t,n,r);if(!s.bogus)t.cache[o]=s}return{left:s.left,right:s.right,top:i?s.rtop:s.top,bottom:i?s.rbottom:s.bottom}}var rr={left:0,right:0,top:0,bottom:0},ir;function or(e,t,n){var r,i,o,s,l,a;for(var u=0;u<e.length;u+=3){l=e[u];a=e[u+1];if(t<l){i=0;o=1;s="left"}else if(t<a){i=t-l;o=i+1}else if(u==e.length-3||t==a&&e[u+3]>t){o=a-l;i=o-1;if(t>=a)s="right"}if(i!=null){r=e[u+2];if(l==a&&n==(r.insertLeft?"left":"right"))s=n;if(n=="left"&&i==0)while(u&&e[u-2]==e[u-3]&&e[u-1].insertLeft){r=e[(u-=3)+2];s="left"}if(n=="right"&&i==a-l)while(u<e.length-3&&e[u+3]==e[u+4]&&!e[u+5].insertLeft){r=e[(u+=3)+2];s="right"}break}}return{node:r,start:i,end:o,collapse:s,coverStart:l,coverEnd:a}}function sr(e,t){var n=rr;if(t=="left"){for(var r=0;r<e.length;r++)if((n=e[r]).left!=n.right)break}else for(var i=e.length-1;i>=0;i--)if((n=e[i]).left!=n.right)break;return n}function lr(e,t,n,r){var i=or(t.map,n,r);var o=i.node,s=i.start,l=i.end,a=i.collapse;var u;if(o.nodeType==3){for(var c=0;c<4;c++){while(s&&oe(t.line.text.charAt(i.coverStart+s)))--s;while(i.coverStart+l<i.coverEnd&&oe(t.line.text.charAt(i.coverStart+l)))++l;if(k&&C<9&&s==0&&l==i.coverEnd-i.coverStart)u=o.parentNode.getBoundingClientRect();else u=sr(E(o,s,l).getClientRects(),r);if(u.left||u.right||s==0)break;l=s;s=s-1;a="right"}if(k&&C<11)u=ar(e.display.measure,u)}else{if(s>0)a=r="right";var f;if(e.options.lineWrapping&&(f=o.getClientRects()).length>1)u=f[r=="right"?f.length-1:0];else u=o.getBoundingClientRect()}if(k&&C<9&&!s&&(!u||!u.left&&!u.right)){var p=o.parentNode.getClientRects()[0];if(p)u={left:p.left,right:p.left+Br(e.display),top:p.top,bottom:p.bottom};else u=rr}var h=u.top-t.rect.top,d=u.bottom-t.rect.top;var m=(h+d)/2;var g=t.view.measure.heights;var v=0;for(;v<g.length-1;v++)if(m<g[v])break;var y=v?g[v-1]:0,A=g[v];var b={left:(a=="right"?u.right:u.left)-t.rect.left,right:(a=="left"?u.left:u.right)-t.rect.left,top:y,bottom:A};if(!u.left&&!u.right)b.bogus=true;if(!e.options.singleCursorHeightPerLine){b.rtop=h;b.rbottom=d}return b}function ar(e,t){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Re(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI;var r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}function ur(e){if(e.measure){e.measure.cache={};e.measure.heights=null;if(e.rest)for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}}function cr(e){e.display.externalMeasure=null;M(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)ur(e.display.view[t])}function fr(e){cr(e);e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null;if(!e.options.lineWrapping)e.display.maxLineChanged=true;e.display.lineNumChars=null}function pr(){if(s&&f)return-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft));return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function hr(){if(s&&f)return-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop));return window.pageYOffset||(document.documentElement||document.body).scrollTop}function dr(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)if(e.widgets[n].above)t+=jn(e.widgets[n]);return t}function mr(e,t,n,r,i){if(!i){var o=dr(t);n.top+=o;n.bottom+=o}if(r=="line")return n;if(!r)r="local";var s=on(t);if(r=="local")s+=Kn(e.display);else s-=e.display.viewOffset;if(r=="page"||r=="window"){var l=e.display.lineSpace.getBoundingClientRect();s+=l.top+(r=="window"?0:hr());var a=l.left+(r=="window"?0:pr());n.left+=a;n.right+=a}n.top+=s;n.bottom+=s;return n}function gr(e,t,n){if(n=="div")return t;var r=t.left,i=t.top;if(n=="page"){r-=pr();i-=hr()}else if(n=="local"||!n){var o=e.display.sizer.getBoundingClientRect();r+=o.left;i+=o.top}var s=e.display.lineSpace.getBoundingClientRect();return{left:r-s.left,top:i-s.top}}function vr(e,t,n,r,i){if(!r)r=$e(e.doc,t.line);return mr(e,r,Jn(e,r,t.ch,i),n)}function yr(r,e,i,o,s,l){o=o||$e(r.doc,e.line);if(!s)s=tr(r,o);function a(e,t){var n=nr(r,s,e,t?"right":"left",l);if(t)n.left=n.right;else n.right=n.left;return mr(r,o,n,i)}var u=pe(o,r.doc.direction),t=e.ch,n=e.sticky;if(t>=o.text.length){t=o.text.length;n="before"}else if(t<=0){t=0;n="after"}if(!u)return a(n=="before"?t-1:t,n=="before");function c(e,t,n){var r=u[t],i=r.level==1;return a(n?e-1:e,i!=n)}var f=ce(u,t,n);var p=ue;var h=c(t,f,n=="before");if(p!=null)h.other=c(t,p,n!="before");return h}function Ar(e,t){var n=0;t=ft(e.doc,t);if(!e.options.lineWrapping)n=Br(e.display)*t.ch;var r=$e(e.doc,t.line);var i=on(r)+Kn(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function br(e,t,n,r,i){var o=it(e,t,n);o.xRel=i;if(r)o.outside=r;return o}function Cr(e,t,n){var r=e.doc;n+=e.display.viewOffset;if(n<0)return br(r.first,0,null,-1,-1);var i=tt(r,n),o=r.first+r.size-1;if(i>o)return br(r.first+r.size-1,$e(r,o).text.length,null,1,1);if(t<0)t=0;var s=$e(r,i);for(;;){var l=Sr(e,s,i,t,n);var a=Qt(s,l.ch+(l.xRel>0||l.outside>0?1:0));if(!a)return l;var u=a.find(1);if(u.line==i)return u;s=$e(r,i=u.line)}}function wr(t,e,n,r){r-=dr(e);var i=e.text.length;var o=le(function(e){return nr(t,n,e-1).bottom<=r},i,0);i=le(function(e){return nr(t,n,e).top>r},o,i);return{begin:o,end:i}}function xr(e,t,n,r){if(!n)n=tr(e,t);var i=mr(e,t,nr(e,n,r),"line").top;return wr(e,t,n,i)}function kr(e,t,n,r){return e.bottom<=n?false:e.top>n?true:(r?e.left:e.right)>t}function Sr(n,e,t,r,i){i-=on(e);var o=tr(n,e);var s=dr(e);var l=0,a=e.text.length,u=true;var c=pe(e,n.doc.direction);if(c){var f=(n.options.lineWrapping?Mr:Er)(n,e,t,o,c,r,i);u=f.level!=1;l=u?f.from:f.to-1;a=u?f.to:f.from-1}var p=null,h=null;var d=le(function(e){var t=nr(n,o,e);t.top+=s;t.bottom+=s;if(!kr(t,r,i,false))return false;if(t.top<=i&&t.left<=r){p=e;h=t}return true},l,a);var m,g,v=false;if(h){var y=r-h.left<h.right-r,A=y==u;d=p+(A?0:1);g=A?"after":"before";m=y?h.left:h.right}else{if(!u&&(d==a||d==l))d++;g=d==0?"after":d==e.text.length?"before":nr(n,o,d-(u?1:0)).bottom+s<=i==u?"after":"before";var b=yr(n,it(t,d,g),"line",e,o);m=b.left;v=i<b.top?-1:i>=b.bottom?1:0}d=se(e.text,d,1);return br(t,d,g,v,r-m)}function Er(r,i,o,s,l,a,u){var e=le(function(e){var t=l[e],n=t.level!=1;return kr(yr(r,it(o,n?t.to:t.from,n?"before":"after"),"line",i,s),a,u,true)},0,l.length-1);var t=l[e];if(e>0){var n=t.level!=1;var c=yr(r,it(o,n?t.from:t.to,n?"after":"before"),"line",i,s);if(kr(c,a,u,true)&&c.top>u)t=l[e-1]}return t}function Mr(e,t,n,r,i,o,s){var l=wr(e,t,r,s);var a=l.begin;var u=l.end;if(/\s/.test(t.text.charAt(u-1)))u--;var c=null,f=null;for(var p=0;p<i.length;p++){var h=i[p];if(h.from>=u||h.to<=a)continue;var d=h.level!=1;var m=nr(e,r,d?Math.min(u,h.to)-1:Math.max(a,h.from)).right;var g=m<o?o-m+1e9:m-o;if(!c||f>g){c=h;f=g}}if(!c)c=i[i.length-1];if(c.from<a)c={from:a,to:c.to,level:c.level};if(c.to>u)c={from:c.from,to:u,level:c.level};return c}function Tr(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(ir==null){ir=O("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t){ir.appendChild(document.createTextNode("x"));ir.appendChild(O("br"))}ir.appendChild(document.createTextNode("x"))}T(e.measure,ir);var n=ir.offsetHeight/50;if(n>3)e.cachedTextHeight=n;M(e.measure);return n||1}function Br(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var t=O("span","xxxxxxxxxx");var n=O("pre",[t],"CodeMirror-line-like");T(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;if(i>2)e.cachedCharWidth=i;return i||10}function Lr(e){var t=e.display,n={},r={};var i=t.gutters.clientLeft;for(var o=t.gutters.firstChild,s=0;o;o=o.nextSibling,++s){var l=e.display.gutterSpecs[s].className;n[l]=o.offsetLeft+o.clientLeft+i;r[l]=o.clientWidth}return{fixedPos:Or(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function Or(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Fr(r){var i=Tr(r.display),o=r.options.lineWrapping;var s=o&&Math.max(5,r.display.scroller.clientWidth/Br(r.display)-3);return function(e){if(nn(r.doc,e))return 0;var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;n++)if(e.widgets[n].height)t+=e.widgets[n].height;if(o)return t+(Math.ceil(e.text.length/s)||1)*i;else return t+i}}function Dr(e){var t=e.doc,n=Fr(e);t.iter(function(e){var t=n(e);if(t!=e.height)Je(e,t)})}function Nr(e,t,n,r){var i=e.display;if(!n&&Ee(t).getAttribute("cm-not-content")=="true")return null;var o,s,l=i.lineSpace.getBoundingClientRect();try{o=t.clientX-l.left;s=t.clientY-l.top}catch(e){return null}var a=Cr(e,o,s),u;if(r&&a.xRel>0&&(u=$e(e.doc,a.line).text).length==a.ch){var c=z(u,u.length,e.options.tabSize)-u.length;a=it(a.line,Math.max(0,Math.round((o-Vn(e.display).left)/Br(e.display))-c))}return a}function Pr(e,t){if(t>=e.display.viewTo)return null;t-=e.display.viewFrom;if(t<0)return null;var n=e.display.view;for(var r=0;r<n.length;r++){t-=n[r].size;if(t<0)return r}}function Wr(e,t,n,r){if(t==null)t=e.doc.first;if(n==null)n=e.doc.first+e.doc.size;if(!r)r=0;var i=e.display;if(r&&n<i.viewTo&&(i.updateLineNumbers==null||i.updateLineNumbers>t))i.updateLineNumbers=t;e.curOp.viewChanged=true;if(t>=i.viewTo){if(Bt&&en(e.doc,t)<i.viewTo)zr(e)}else if(n<=i.viewFrom)if(Bt&&tn(e.doc,n+r)>i.viewFrom)zr(e);else{i.viewFrom+=r;i.viewTo+=r}else if(t<=i.viewFrom&&n>=i.viewTo)zr(e);else if(t<=i.viewFrom){var o=Hr(e,n,n+r,1);if(o){i.view=i.view.slice(o.index);i.viewFrom=o.lineN;i.viewTo+=r}else zr(e)}else if(n>=i.viewTo){var s=Hr(e,t,t,-1);if(s){i.view=i.view.slice(0,s.index);i.viewTo=s.lineN}else zr(e)}else{var l=Hr(e,t,t,-1);var a=Hr(e,n,n+r,1);if(l&&a){i.view=i.view.slice(0,l.index).concat(wn(e,l.lineN,a.lineN)).concat(i.view.slice(a.index));i.viewTo+=r}else zr(e)}var u=i.externalMeasured;if(u)if(n<u.lineN)u.lineN+=r;else if(t<u.lineN+u.size)i.externalMeasured=null}function Rr(e,t,n){e.curOp.viewChanged=true;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size)r.externalMeasured=null;if(t<r.viewFrom||t>=r.viewTo)return;var o=r.view[Pr(e,t)];if(o.node==null)return;var s=o.changes||(o.changes=[]);if(I(s,n)==-1)s.push(n)}function zr(e){e.display.viewFrom=e.display.viewTo=e.doc.first;e.display.view=[];e.display.viewOffset=0}function Hr(e,t,n,r){var i=Pr(e,t),o,s=e.display.view;if(!Bt||n==e.doc.first+e.doc.size)return{index:i,lineN:n};var l=e.display.viewFrom;for(var a=0;a<i;a++)l+=s[a].size;if(l!=t){if(r>0){if(i==s.length-1)return null;o=l+s[i].size-t;i++}else o=l-t;t+=o;n+=o}while(en(e.doc,n)!=n){if(i==(r<0?0:s.length-1))return null;n+=r*s[i-(r<0?1:0)].size;i+=r}return{index:i,lineN:n}}function Ir(e,t,n){var r=e.display,i=r.view;if(i.length==0||t>=r.viewTo||n<=r.viewFrom){r.view=wn(e,t,n);r.viewFrom=t}else{if(r.viewFrom>t)r.view=wn(e,t,r.viewFrom).concat(r.view);else if(r.viewFrom<t)r.view=r.view.slice(Pr(e,t));r.viewFrom=t;if(r.viewTo<n)r.view=r.view.concat(wn(e,r.viewTo,n));else if(r.viewTo>n)r.view=r.view.slice(0,Pr(e,n))}r.viewTo=n}function Ur(e){var t=e.display.view,n=0;for(var r=0;r<t.length;r++){var i=t[r];if(!i.hidden&&(!i.node||i.changes))++n}return n}function jr(e){e.display.input.showSelection(e.display.input.prepareSelection())}function qr(e,t){if(t===void 0)t=true;var n=e.doc,r={};var i=r.cursors=document.createDocumentFragment();var o=r.selection=document.createDocumentFragment();for(var s=0;s<n.sel.ranges.length;s++){if(!t&&s==n.sel.primIndex)continue;var l=n.sel.ranges[s];if(l.from().line>=e.display.viewTo||l.to().line<e.display.viewFrom)continue;var a=l.empty();if(a||e.options.showCursorWhenSelecting)Kr(e,l.head,i);if(!a)Vr(e,l,o)}return r}function Kr(e,t,n){var r=yr(e,t,"div",null,null,!e.options.singleCursorHeightPerLine);var i=n.appendChild(O("div"," ","CodeMirror-cursor"));i.style.left=r.left+"px";i.style.top=r.top+"px";i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px";if(r.other){var o=n.appendChild(O("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="";o.style.left=r.other.left+"px";o.style.top=r.other.top+"px";o.style.height=(r.other.bottom-r.other.top)*.85+"px"}}function _r(e,t){return e.top-t.top||e.left-t.left}function Vr(l,e,t){var n=l.display,r=l.doc;var i=document.createDocumentFragment();var o=Vn(l.display),M=o.left;var T=Math.max(n.sizerWidth,Xn(l)-n.sizer.offsetLeft)-o.right;var B=r.direction=="ltr";function L(e,t,n,r){if(t<0)t=0;t=Math.round(t);r=Math.round(r);i.appendChild(O("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(n==null?T-e:n)+"px;\n                             height: "+(r-t)+"px"))}function s(n,A,b){var s=$e(r,n);var C=s.text.length;var w,x;function k(e,t){return vr(l,it(n,e),"div",s,t)}function S(e,t,n){var r=xr(l,s,null,e);var i=t=="ltr"==(n=="after")?"left":"right";var o=n=="after"?r.begin:r.end-(/\s/.test(s.text.charAt(r.end-1))?2:1);return k(o,i)[i]}var E=pe(s,r.direction);ae(E,A||0,b==null?C:b,function(e,t,n,r){var i=n=="ltr";var o=k(e,i?"left":"right");var s=k(t-1,i?"right":"left");var l=A==null&&e==0,a=b==null&&t==C;var u=r==0,c=!E||r==E.length-1;if(s.top-o.top<=3){var f=(B?l:a)&&u;var p=(B?a:l)&&c;var h=f?M:(i?o:s).left;var d=p?T:(i?s:o).right;L(h,o.top,d-h,o.bottom)}else{var m,g,v,y;if(i){m=B&&l&&u?M:o.left;g=B?T:S(e,n,"before");v=B?M:S(t,n,"after");y=B&&a&&c?T:s.right}else{m=!B?M:S(e,n,"before");g=!B&&l&&u?T:o.right;v=!B&&a&&c?M:s.left;y=!B?T:S(t,n,"after")}L(m,o.top,g-m,o.bottom);if(o.bottom<s.top)L(M,o.bottom,null,s.top);L(v,s.top,y-v,s.bottom)}if(!w||_r(o,w)<0)w=o;if(_r(s,w)<0)w=s;if(!x||_r(o,x)<0)x=o;if(_r(s,x)<0)x=s});return{start:w,end:x}}var a=e.from(),u=e.to();if(a.line==u.line)s(a.line,a.ch,u.ch);else{var c=$e(r,a.line),f=$e(r,u.line);var p=Yt(c)==Yt(f);var h=s(a.line,a.ch,p?c.text.length+1:null).end;var d=s(u.line,p?0:null,u.ch).start;if(p)if(h.top<d.top-2){L(h.right,h.top,null,h.bottom);L(M,d.top,d.left,d.bottom)}else L(h.right,h.top,d.left-h.right,h.bottom);if(h.bottom<d.top)L(M,h.bottom,null,d.top)}t.appendChild(i)}function Gr(e){if(!e.state.focused)return;var t=e.display;clearInterval(t.blinker);var n=true;t.cursorDiv.style.visibility="";if(e.options.cursorBlinkRate>0)t.blinker=setInterval(function(){if(!e.hasFocus())Yr(e);t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate);else if(e.options.cursorBlinkRate<0)t.cursorDiv.style.visibility="hidden"}function Xr(e){if(!e.hasFocus()){e.display.input.focus();if(!e.state.focused)$r(e)}}function Qr(e){e.state.delayingBlurEvent=true;setTimeout(function(){if(e.state.delayingBlurEvent){e.state.delayingBlurEvent=false;if(e.state.focused)Yr(e)}},100)}function $r(e,t){if(e.state.delayingBlurEvent&&!e.state.draggingText)e.state.delayingBlurEvent=false;if(e.options.readOnly=="nocursor")return;if(!e.state.focused){ve(e,"focus",e,t);e.state.focused=true;D(e.display.wrapper,"CodeMirror-focused");if(!e.curOp&&e.display.selForContextMenu!=e.doc.sel){e.display.input.reset();if(g)setTimeout(function(){return e.display.input.reset(true)},20)}e.display.input.receivedFocus()}Gr(e)}function Yr(e,t){if(e.state.delayingBlurEvent)return;if(e.state.focused){ve(e,"blur",e,t);e.state.focused=false;S(e.display.wrapper,"CodeMirror-focused")}clearInterval(e.display.blinker);setTimeout(function(){if(!e.state.focused)e.display.shift=false},150)}function Zr(e){var t=e.display;var n=t.lineDiv.offsetTop;for(var r=0;r<t.view.length;r++){var i=t.view[r],o=e.options.lineWrapping;var s=void 0,l=0;if(i.hidden)continue;if(k&&C<8){var a=i.node.offsetTop+i.node.offsetHeight;s=a-n;n=a}else{var u=i.node.getBoundingClientRect();s=u.bottom-u.top;if(!o&&i.text.firstChild)l=i.text.firstChild.getBoundingClientRect().right-u.left-1}var c=i.line.height-s;if(c>.005||c<-.005){Je(i.line,s);Jr(i.line);if(i.rest)for(var f=0;f<i.rest.length;f++)Jr(i.rest[f])}if(l>e.display.sizerWidth){var p=Math.ceil(l/Br(e.display));if(p>e.display.maxLineLength){e.display.maxLineLength=p;e.display.maxLine=i.line;e.display.maxLineChanged=true}}}}function Jr(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],r=n.node.parentNode;if(r)n.height=r.offsetHeight}}function ei(e,t,n){var r=n&&n.top!=null?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-Kn(e));var i=n&&n.bottom!=null?n.bottom:r+e.wrapper.clientHeight;var o=tt(t,r),s=tt(t,i);if(n&&n.ensure){var l=n.ensure.from.line,a=n.ensure.to.line;if(l<o){o=l;s=tt(t,on($e(t,l))+e.wrapper.clientHeight)}else if(Math.min(a,t.lastLine())>=s){o=tt(t,on($e(t,a))-e.wrapper.clientHeight);s=a}}return{from:o,to:Math.max(s,o+1)}}function ti(e,t){if(ye(e,"scrollCursorIntoView"))return;var n=e.display,r=n.sizer.getBoundingClientRect(),i=null;if(t.top+r.top<0)i=true;else if(t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight))i=false;if(i!=null&&!a){var o=O("div","​",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-Kn(e.display))+"px;\n                         height: "+(t.bottom-t.top+Gn(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(o);o.scrollIntoView(i);e.display.lineSpace.removeChild(o)}}function ni(e,t,n,r){if(r==null)r=0;var i;if(!e.options.lineWrapping&&t==n){t=t.ch?it(t.line,t.sticky=="before"?t.ch-1:t.ch,"after"):t;n=t.sticky=="before"?it(t.line,t.ch+1,"before"):t}for(var o=0;o<5;o++){var s=false;var l=yr(e,t);var a=!n||n==t?l:yr(e,n);i={left:Math.min(l.left,a.left),top:Math.min(l.top,a.top)-r,right:Math.max(l.left,a.left),bottom:Math.max(l.bottom,a.bottom)+r};var u=ii(e,i);var c=e.doc.scrollTop,f=e.doc.scrollLeft;if(u.scrollTop!=null){fi(e,u.scrollTop);if(Math.abs(e.doc.scrollTop-c)>1)s=true}if(u.scrollLeft!=null){hi(e,u.scrollLeft);if(Math.abs(e.doc.scrollLeft-f)>1)s=true}if(!s)break}return i}function ri(e,t){var n=ii(e,t);if(n.scrollTop!=null)fi(e,n.scrollTop);if(n.scrollLeft!=null)hi(e,n.scrollLeft)}function ii(e,t){var n=e.display,r=Tr(e.display);if(t.top<0)t.top=0;var i=e.curOp&&e.curOp.scrollTop!=null?e.curOp.scrollTop:n.scroller.scrollTop;var o=Qn(e),s={};if(t.bottom-t.top>o)t.bottom=t.top+o;var l=e.doc.height+_n(n);var a=t.top<r,u=t.bottom>l-r;if(t.top<i)s.scrollTop=a?0:t.top;else if(t.bottom>i+o){var c=Math.min(t.top,(u?l:t.bottom)-o);if(c!=i)s.scrollTop=c}var f=e.options.fixedGutter?0:n.gutters.offsetWidth;var p=e.curOp&&e.curOp.scrollLeft!=null?e.curOp.scrollLeft:n.scroller.scrollLeft-f;var h=Xn(e)-n.gutters.offsetWidth;var d=t.right-t.left>h;if(d)t.right=t.left+h;if(t.left<10)s.scrollLeft=0;else if(t.left<p)s.scrollLeft=Math.max(0,t.left+f-(d?0:10));else if(t.right>h+p-3)s.scrollLeft=t.right+(d?0:10)-h;return s}function oi(e,t){if(t==null)return;ui(e);e.curOp.scrollTop=(e.curOp.scrollTop==null?e.doc.scrollTop:e.curOp.scrollTop)+t}function si(e){ui(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function li(e,t,n){if(t!=null||n!=null)ui(e);if(t!=null)e.curOp.scrollLeft=t;if(n!=null)e.curOp.scrollTop=n}function ai(e,t){ui(e);e.curOp.scrollToPos=t}function ui(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var n=Ar(e,t.from),r=Ar(e,t.to);ci(e,n,r,t.margin)}}function ci(e,t,n,r){var i=ii(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-r,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+r});li(e,i.scrollLeft,i.scrollTop)}function fi(e,t){if(Math.abs(e.doc.scrollTop-t)<2)return;if(!m)ji(e,{top:t});pi(e,t,true);if(m)ji(e);Ni(e,100)}function pi(e,t,n){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t));if(e.display.scroller.scrollTop==t&&!n)return;e.doc.scrollTop=t;e.display.scrollbars.setScrollTop(t);if(e.display.scroller.scrollTop!=t)e.display.scroller.scrollTop=t}function hi(e,t,n,r){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth));if((n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r)return;e.doc.scrollLeft=t;Vi(e);if(e.display.scroller.scrollLeft!=t)e.display.scroller.scrollLeft=t;e.display.scrollbars.setScrollLeft(t)}function di(e){var t=e.display,n=t.gutters.offsetWidth;var r=Math.round(e.doc.height+_n(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+Gn(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var mi=function(e,t,n){this.cm=n;var r=this.vert=O("div",[O("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");var i=this.horiz=O("div",[O("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=i.tabIndex=-1;e(r);e(i);de(r,"scroll",function(){if(r.clientHeight)t(r.scrollTop,"vertical")});de(i,"scroll",function(){if(i.clientWidth)t(i.scrollLeft,"horizontal")});this.checkedZeroWidth=false;if(k&&C<8)this.horiz.style.minHeight=this.vert.style.minWidth="18px"};mi.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1;var n=e.scrollHeight>e.clientHeight+1;var r=e.nativeBarWidth;if(n){this.vert.style.display="block";this.vert.style.bottom=t?r+"px":"0";var i=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+"px"}else{this.vert.style.display="";this.vert.firstChild.style.height="0"}if(t){this.horiz.style.display="block";this.horiz.style.right=n?r+"px":"0";this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(n?r:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+o)+"px"}else{this.horiz.style.display="";this.horiz.firstChild.style.width="0"}if(!this.checkedZeroWidth&&e.clientHeight>0){if(r==0)this.zeroWidthHack();this.checkedZeroWidth=true}return{right:n?r:0,bottom:t?r:0}},mi.prototype.setScrollLeft=function(e){if(this.horiz.scrollLeft!=e)this.horiz.scrollLeft=e;if(this.disableHoriz)this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},mi.prototype.setScrollTop=function(e){if(this.vert.scrollTop!=e)this.vert.scrollTop=e;if(this.disableVert)this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},mi.prototype.zeroWidthHack=function(){var e=y&&!l?"12px":"18px";this.horiz.style.height=this.vert.style.width=e;this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none";this.disableHoriz=new H;this.disableVert=new H},mi.prototype.enableZeroWidthBar=function(n,r,i){n.style.pointerEvents="auto";function o(){var e=n.getBoundingClientRect();var t=i=="vert"?document.elementFromPoint(e.right-1,(e.top+e.bottom)/2):document.elementFromPoint((e.right+e.left)/2,e.bottom-1);if(t!=n)n.style.pointerEvents="none";else r.set(1e3,o)}r.set(1e3,o)},mi.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz);e.removeChild(this.vert)};var gi=function(){};function vi(e,t){if(!t)t=di(e);var n=e.display.barWidth,r=e.display.barHeight;yi(e,t);for(var i=0;i<4&&n!=e.display.barWidth||r!=e.display.barHeight;i++){if(n!=e.display.barWidth&&e.options.lineWrapping)Zr(e);yi(e,di(e));n=e.display.barWidth;r=e.display.barHeight}}function yi(e,t){var n=e.display;var r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px";n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px";n.heightForcer.style.borderBottom=r.bottom+"px solid transparent";if(r.right&&r.bottom){n.scrollbarFiller.style.display="block";n.scrollbarFiller.style.height=r.bottom+"px";n.scrollbarFiller.style.width=r.right+"px"}else n.scrollbarFiller.style.display="";if(r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter){n.gutterFiller.style.display="block";n.gutterFiller.style.height=r.bottom+"px";n.gutterFiller.style.width=t.gutterWidth+"px"}else n.gutterFiller.style.display=""}gi.prototype.update=function(){return{bottom:0,right:0}},gi.prototype.setScrollLeft=function(){},gi.prototype.setScrollTop=function(){},gi.prototype.clear=function(){};var Ai={native:mi,null:gi};function bi(n){if(n.display.scrollbars){n.display.scrollbars.clear();if(n.display.scrollbars.addClass)S(n.display.wrapper,n.display.scrollbars.addClass)}n.display.scrollbars=new Ai[n.options.scrollbarStyle](function(e){n.display.wrapper.insertBefore(e,n.display.scrollbarFiller);de(e,"mousedown",function(){if(n.state.focused)setTimeout(function(){return n.display.input.focus()},0)});e.setAttribute("cm-not-content","true")},function(e,t){if(t=="horizontal")hi(n,e);else fi(n,e)},n);if(n.display.scrollbars.addClass)D(n.display.wrapper,n.display.scrollbars.addClass)}var Ci=0;function wi(e){e.curOp={cm:e,viewChanged:false,startHeight:e.doc.height,forceUpdate:false,updateInput:0,typing:false,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:false,updateMaxLine:false,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:false,id:++Ci};kn(e.curOp)}function xi(e){var t=e.curOp;if(t)En(t,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;ki(e)})}function ki(e){var t=e.ops;for(var n=0;n<t.length;n++)Si(t[n]);for(var r=0;r<t.length;r++)Ei(t[r]);for(var i=0;i<t.length;i++)Mi(t[i]);for(var o=0;o<t.length;o++)Ti(t[o]);for(var s=0;s<t.length;s++)Bi(t[s])}function Si(e){var t=e.cm,n=t.display;Ri(t);if(e.updateMaxLine)ln(t);e.mustUpdate=e.viewChanged||e.forceUpdate||e.scrollTop!=null||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping;e.update=e.mustUpdate&&new Wi(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Ei(e){e.updatedDisplay=e.mustUpdate&&Ii(e.cm,e.update)}function Mi(e){var t=e.cm,n=t.display;if(e.updatedDisplay)Zr(t);e.barMeasure=di(t);if(n.maxLineChanged&&!t.options.lineWrapping){e.adjustWidthTo=Jn(t,n.maxLine,n.maxLine.text.length).left+3;t.display.sizerWidth=e.adjustWidthTo;e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Gn(t)+t.display.barWidth);e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Xn(t))}if(e.updatedDisplay||e.selectionChanged)e.preparedSelection=n.input.prepareSelection()}function Ti(e){var t=e.cm;if(e.adjustWidthTo!=null){t.display.sizer.style.minWidth=e.adjustWidthTo+"px";if(e.maxScrollLeft<t.doc.scrollLeft)hi(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),true);t.display.maxLineChanged=false}var n=e.focus&&e.focus==F();if(e.preparedSelection)t.display.input.showSelection(e.preparedSelection,n);if(e.updatedDisplay||e.startHeight!=t.doc.height)vi(t,e.barMeasure);if(e.updatedDisplay)_i(t,e.barMeasure);if(e.selectionChanged)Gr(t);if(t.state.focused&&e.updateInput)t.display.input.reset(e.typing);if(n)Xr(e.cm)}function Bi(e){var t=e.cm,n=t.display,r=t.doc;if(e.updatedDisplay)Ui(t,e.update);if(n.wheelStartX!=null&&(e.scrollTop!=null||e.scrollLeft!=null||e.scrollToPos))n.wheelStartX=n.wheelStartY=null;if(e.scrollTop!=null)pi(t,e.scrollTop,e.forceScroll);if(e.scrollLeft!=null)hi(t,e.scrollLeft,true,true);if(e.scrollToPos){var i=ni(t,ft(r,e.scrollToPos.from),ft(r,e.scrollToPos.to),e.scrollToPos.margin);ti(t,i)}var o=e.maybeHiddenMarkers,s=e.maybeUnhiddenMarkers;if(o)for(var l=0;l<o.length;++l)if(!o[l].lines.length)ve(o[l],"hide");if(s)for(var a=0;a<s.length;++a)if(s[a].lines.length)ve(s[a],"unhide");if(n.wrapper.offsetHeight)r.scrollTop=t.display.scroller.scrollTop;if(e.changeObjs)ve(t,"changes",t,e.changeObjs);if(e.update)e.update.finish()}function Li(e,t){if(e.curOp)return t();wi(e);try{return t()}finally{xi(e)}}function Oi(e,t){return function(){if(e.curOp)return t.apply(e,arguments);wi(e);try{return t.apply(e,arguments)}finally{xi(e)}}}function Fi(e){return function(){if(this.curOp)return e.apply(this,arguments);wi(this);try{return e.apply(this,arguments)}finally{xi(this)}}}function Di(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);wi(e);try{return t.apply(this,arguments)}finally{xi(e)}}}function Ni(e,t){if(e.doc.highlightFrontier<e.display.viewTo)e.state.highlight.set(t,W(Pi,e))}function Pi(a){var u=a.doc;if(u.highlightFrontier>=a.display.viewTo)return;var c=+new Date+a.options.workTime;var f=yt(a,u.highlightFrontier);var p=[];u.iter(f.line,Math.min(u.first+u.size,a.display.viewTo+500),function(e){if(f.line>=a.display.viewFrom){var t=e.styles;var n=e.text.length>a.options.maxHighlightLength?Ve(u.mode,f.state):null;var r=gt(a,e,f,true);if(n)f.state=n;e.styles=r.styles;var i=e.styleClasses,o=r.classes;if(o)e.styleClasses=o;else if(i)e.styleClasses=null;var s=!t||t.length!=e.styles.length||i!=o&&(!i||!o||i.bgClass!=o.bgClass||i.textClass!=o.textClass);for(var l=0;!s&&l<t.length;++l)s=t[l]!=e.styles[l];if(s)p.push(f.line);e.stateAfter=f.save();f.nextLine()}else{if(e.text.length<=a.options.maxHighlightLength)At(a,e.text,f);e.stateAfter=f.line%5==0?f.save():null;f.nextLine()}if(+new Date>c){Ni(a,a.options.workDelay);return true}});u.highlightFrontier=f.line;u.modeFrontier=Math.max(u.modeFrontier,f.line);if(p.length)Li(a,function(){for(var e=0;e<p.length;e++)Rr(a,p[e],"text")})}var Wi=function(e,t,n){var r=e.display;this.viewport=t;this.visible=ei(r,e.doc,t);this.editorIsHidden=!r.wrapper.offsetWidth;this.wrapperHeight=r.wrapper.clientHeight;this.wrapperWidth=r.wrapper.clientWidth;this.oldDisplayWidth=Xn(e);this.force=n;this.dims=Lr(e);this.events=[]};function Ri(e){var t=e.display;if(!t.scrollbarsClipped&&t.scroller.offsetWidth){t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth;t.heightForcer.style.height=Gn(e)+"px";t.sizer.style.marginBottom=-t.nativeBarWidth+"px";t.sizer.style.borderRightWidth=Gn(e)+"px";t.scrollbarsClipped=true}}function zi(e){if(e.hasFocus())return null;var t=F();if(!t||!L(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var r=window.getSelection();if(r.anchorNode&&r.extend&&L(e.display.lineDiv,r.anchorNode)){n.anchorNode=r.anchorNode;n.anchorOffset=r.anchorOffset;n.focusNode=r.focusNode;n.focusOffset=r.focusOffset}}return n}function Hi(e){if(!e||!e.activeElt||e.activeElt==F())return;e.activeElt.focus();if(!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&L(document.body,e.anchorNode)&&L(document.body,e.focusNode)){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset);n.collapse(false);t.removeAllRanges();t.addRange(n);t.extend(e.focusNode,e.focusOffset)}}function Ii(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden){zr(e);return false}if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(n.updateLineNumbers==null||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&Ur(e)==0)return false;if(Gi(e)){zr(e);t.dims=Lr(e)}var i=r.first+r.size;var o=Math.max(t.visible.from-e.options.viewportMargin,r.first);var s=Math.min(i,t.visible.to+e.options.viewportMargin);if(n.viewFrom<o&&o-n.viewFrom<20)o=Math.max(r.first,n.viewFrom);if(n.viewTo>s&&n.viewTo-s<20)s=Math.min(i,n.viewTo);if(Bt){o=en(e.doc,o);s=tn(e.doc,s)}var l=o!=n.viewFrom||s!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;Ir(e,o,s);n.viewOffset=on($e(e.doc,n.viewFrom));e.display.mover.style.top=n.viewOffset+"px";var a=Ur(e);if(!l&&a==0&&!t.force&&n.renderedView==n.view&&(n.updateLineNumbers==null||n.updateLineNumbers>=n.viewTo))return false;var u=zi(e);if(a>4)n.lineDiv.style.display="none";qi(e,n.updateLineNumbers,t.dims);if(a>4)n.lineDiv.style.display="";n.renderedView=n.view;Hi(u);M(n.cursorDiv);M(n.selectionDiv);n.gutters.style.height=n.sizer.style.minHeight=0;if(l){n.lastWrapHeight=t.wrapperHeight;n.lastWrapWidth=t.wrapperWidth;Ni(e,400)}n.updateLineNumbers=null;return true}function Ui(e,t){var n=t.viewport;for(var r=true;;r=false){if(!r||!e.options.lineWrapping||t.oldDisplayWidth==Xn(e)){if(n&&n.top!=null)n={top:Math.min(e.doc.height+_n(e.display)-Qn(e),n.top)};t.visible=ei(e.display,e.doc,n);if(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break}else if(r)t.visible=ei(e.display,e.doc,n);if(!Ii(e,t))break;Zr(e);var i=di(e);jr(e);vi(e,i);_i(e,i);t.force=false}t.signal(e,"update",e);if(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo){t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo);e.display.reportedViewFrom=e.display.viewFrom;e.display.reportedViewTo=e.display.viewTo}}function ji(e,t){var n=new Wi(e,t);if(Ii(e,n)){Zr(e);Ui(e,n);var r=di(e);jr(e);vi(e,r);_i(e,r);n.finish()}}function qi(n,e,t){var r=n.display,i=n.options.lineNumbers;var o=r.lineDiv,s=o.firstChild;function l(e){var t=e.nextSibling;if(g&&y&&n.display.currentWheelTarget==e)e.style.display="none";else e.parentNode.removeChild(e);return t}var a=r.view,u=r.viewFrom;for(var c=0;c<a.length;c++){var f=a[c];if(f.hidden);else if(!f.node||f.node.parentNode!=o){var p=zn(n,f,u,t);o.insertBefore(p,s)}else{while(s!=f.node)s=l(s);var h=i&&e!=null&&e<=u&&f.lineNumber;if(f.changes){if(I(f.changes,"gutter")>-1)h=false;Ln(n,f,u,t)}if(h){M(f.lineNumber);f.lineNumber.appendChild(document.createTextNode(rt(n.options,u)))}s=f.node.nextSibling}u+=f.size}while(s)s=l(s)}function Ki(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px"}function _i(e,t){e.display.sizer.style.minHeight=t.docHeight+"px";e.display.heightForcer.style.top=t.docHeight+"px";e.display.gutters.style.height=t.docHeight+e.display.barHeight+Gn(e)+"px"}function Vi(e){var t=e.display,n=t.view;if(!t.alignWidgets&&(!t.gutters.firstChild||!e.options.fixedGutter))return;var r=Or(t)-t.scroller.scrollLeft+e.doc.scrollLeft;var i=t.gutters.offsetWidth,o=r+"px";for(var s=0;s<n.length;s++)if(!n[s].hidden){if(e.options.fixedGutter){if(n[s].gutter)n[s].gutter.style.left=o;if(n[s].gutterBackground)n[s].gutterBackground.style.left=o}var l=n[s].alignable;if(l)for(var a=0;a<l.length;a++)l[a].style.left=o}if(e.options.fixedGutter)t.gutters.style.left=r+i+"px"}function Gi(e){if(!e.options.lineNumbers)return false;var t=e.doc,n=rt(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(O("div",[O("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var o=i.firstChild.offsetWidth,s=i.offsetWidth-o;r.lineGutter.style.width="";r.lineNumInnerWidth=Math.max(o,r.lineGutter.offsetWidth-s)+1;r.lineNumWidth=r.lineNumInnerWidth+s;r.lineNumChars=r.lineNumInnerWidth?n.length:-1;r.lineGutter.style.width=r.lineNumWidth+"px";Ki(e.display);return true}return false}function Xi(e,t){var n=[],r=false;for(var i=0;i<e.length;i++){var o=e[i],s=null;if(typeof o!="string"){s=o.style;o=o.className}if(o=="CodeMirror-linenumbers")if(!t)continue;else r=true;n.push({className:o,style:s})}if(t&&!r)n.push({className:"CodeMirror-linenumbers",style:null});return n}function Qi(e){var t=e.gutters,n=e.gutterSpecs;M(t);e.lineGutter=null;for(var r=0;r<n.length;++r){var i=n[r];var o=i.className;var s=i.style;var l=t.appendChild(O("div",null,"CodeMirror-gutter "+o));if(s)l.style.cssText=s;if(o=="CodeMirror-linenumbers"){e.lineGutter=l;l.style.width=(e.lineNumWidth||1)+"px"}}t.style.display=n.length?"":"none";Ki(e)}function $i(e){Qi(e.display);Wr(e);Vi(e)}function Yi(e,t,n,r){var i=this;this.input=n;i.scrollbarFiller=O("div",null,"CodeMirror-scrollbar-filler");i.scrollbarFiller.setAttribute("cm-not-content","true");i.gutterFiller=O("div",null,"CodeMirror-gutter-filler");i.gutterFiller.setAttribute("cm-not-content","true");i.lineDiv=B("div",null,"CodeMirror-code");i.selectionDiv=O("div",null,null,"position: relative; z-index: 1");i.cursorDiv=O("div",null,"CodeMirror-cursors");i.measure=O("div",null,"CodeMirror-measure");i.lineMeasure=O("div",null,"CodeMirror-measure");i.lineSpace=B("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none");var o=B("div",[i.lineSpace],"CodeMirror-lines");i.mover=O("div",[o],null,"position: relative");i.sizer=O("div",[i.mover],"CodeMirror-sizer");i.sizerWidth=null;i.heightForcer=O("div",null,null,"position: absolute; height: "+U+"px; width: 1px;");i.gutters=O("div",null,"CodeMirror-gutters");i.lineGutter=null;i.scroller=O("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll");i.scroller.setAttribute("tabIndex","-1");i.wrapper=O("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror");if(k&&C<8){i.gutters.style.zIndex=-1;i.scroller.style.paddingRight=0}if(!g&&!(m&&p))i.scroller.draggable=true;if(e)if(e.appendChild)e.appendChild(i.wrapper);else e(i.wrapper);i.viewFrom=i.viewTo=t.first;i.reportedViewFrom=i.reportedViewTo=t.first;i.view=[];i.renderedView=null;i.externalMeasured=null;i.viewOffset=0;i.lastWrapHeight=i.lastWrapWidth=0;i.updateLineNumbers=null;i.nativeBarWidth=i.barHeight=i.barWidth=0;i.scrollbarsClipped=false;i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null;i.alignWidgets=false;i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null;i.maxLine=null;i.maxLineLength=0;i.maxLineChanged=false;i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null;i.shift=false;i.selForContextMenu=null;i.activeTouch=null;i.gutterSpecs=Xi(r.gutters,r.lineNumbers);Qi(i);n.init(i)}Wi.prototype.signal=function(e,t){if(be(e,t))this.events.push(arguments)},Wi.prototype.finish=function(){for(var e=0;e<this.events.length;e++)ve.apply(null,this.events[e])};var Zi=0,Ji=null;if(k)Ji=-.53;else if(m)Ji=15;else if(s)Ji=-.7;else if(c)Ji=-1/3;function eo(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;if(t==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS)t=e.detail;if(n==null&&e.detail&&e.axis==e.VERTICAL_AXIS)n=e.detail;else if(n==null)n=e.wheelDelta;return{x:t,y:n}}function to(e){var t=eo(e);t.x*=Ji;t.y*=Ji;return t}function no(e,t){var n=eo(t),r=n.x,i=n.y;var o=e.display,s=o.scroller;var l=s.scrollWidth>s.clientWidth;var a=s.scrollHeight>s.clientHeight;if(!(r&&l||i&&a))return;if(i&&y&&g)e:for(var u=t.target,c=o.view;u!=s;u=u.parentNode)for(var f=0;f<c.length;f++)if(c[f].node==u){e.display.currentWheelTarget=u;break e}if(r&&!m&&!v&&Ji!=null){if(i&&a)fi(e,Math.max(0,s.scrollTop+i*Ji));hi(e,Math.max(0,s.scrollLeft+r*Ji));if(!i||i&&a)we(t);o.wheelStartX=null;return}if(i&&Ji!=null){var p=i*Ji;var h=e.doc.scrollTop,d=h+o.wrapper.clientHeight;if(p<0)h=Math.max(0,h+p-50);else d=Math.min(e.doc.height,d+p+50);ji(e,{top:h,bottom:d})}if(Zi<20)if(o.wheelStartX==null){o.wheelStartX=s.scrollLeft;o.wheelStartY=s.scrollTop;o.wheelDX=r;o.wheelDY=i;setTimeout(function(){if(o.wheelStartX==null)return;var e=s.scrollLeft-o.wheelStartX;var t=s.scrollTop-o.wheelStartY;var n=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null;if(!n)return;Ji=(Ji*Zi+n)/(Zi+1);++Zi},200)}else{o.wheelDX+=r;o.wheelDY+=i}}var ro=function(e,t){this.ranges=e;this.primIndex=t};ro.prototype.primary=function(){return this.ranges[this.primIndex]},ro.prototype.equals=function(e){if(e==this)return true;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return false;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(!st(n.anchor,r.anchor)||!st(n.head,r.head))return false}return true},ro.prototype.deepCopy=function(){var e=[];for(var t=0;t<this.ranges.length;t++)e[t]=new io(lt(this.ranges[t].anchor),lt(this.ranges[t].head));return new ro(e,this.primIndex)},ro.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return true;return false},ro.prototype.contains=function(e,t){if(!t)t=e;for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(ot(t,r.from())>=0&&ot(e,r.to())<=0)return n}return-1};var io=function(e,t){this.anchor=e;this.head=t};function oo(e,t,n){var r=e&&e.options.selectionsMayTouch;var i=t[n];t.sort(function(e,t){return ot(e.from(),t.from())});n=I(t,i);for(var o=1;o<t.length;o++){var s=t[o],l=t[o-1];var a=ot(l.to(),s.from());if(r&&!s.empty()?a>0:a>=0){var u=ut(l.from(),s.from()),c=at(l.to(),s.to());var f=l.empty()?s.from()==s.head:l.from()==l.head;if(o<=n)--n;t.splice(--o,2,new io(f?c:u,f?u:c))}}return new ro(t,n)}function so(e,t){return new ro([new io(e,t||e)],0)}function lo(e){if(!e.text)return e.to;return it(e.from.line+e.text.length-1,Q(e.text).length+(e.text.length==1?e.from.ch:0))}function ao(e,t){if(ot(e,t.from)<0)return e;if(ot(e,t.to)<=0)return lo(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;if(e.line==t.to.line)r+=lo(t).ch-t.to.ch;return it(n,r)}function uo(e,t){var n=[];for(var r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new io(ao(i.anchor,t),ao(i.head,t)))}return oo(e.cm,n,e.sel.primIndex)}function co(e,t,n){if(e.line==t.line)return it(n.line,e.ch-t.ch+n.ch);else return it(n.line+(e.line-t.line),e.ch)}function fo(e,t,n){var r=[];var i=it(e.first,0),o=i;for(var s=0;s<t.length;s++){var l=t[s];var a=co(l.from,i,o);var u=co(lo(l),i,o);i=l.to;o=u;if(n=="around"){var c=e.sel.ranges[s],f=ot(c.head,c.anchor)<0;r[s]=new io(f?u:a,f?a:u)}else r[s]=new io(a,a)}return new ro(r,e.sel.primIndex)}function po(e){e.doc.mode=qe(e.options,e.doc.modeOption);ho(e)}function ho(e){e.doc.iter(function(e){if(e.stateAfter)e.stateAfter=null;if(e.styles)e.styles=null});e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first;Ni(e,100);e.state.modeGen++;if(e.curOp)Wr(e)}function mo(e,t){return t.from.ch==0&&t.to.ch==0&&Q(t.text)==""&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function go(e,r,t,i){function o(e){return t?t[e]:null}function n(e,t,n){un(e,t,n,i);Tn(e,"change",e,r)}function s(e,t){var n=[];for(var r=e;r<t;++r)n.push(new an(u[r],o(r),i));return n}var l=r.from,a=r.to,u=r.text;var c=$e(e,l.line),f=$e(e,a.line);var p=Q(u),h=o(u.length-1),d=a.line-l.line;if(r.full){e.insert(0,s(0,u.length));e.remove(u.length,e.size-u.length)}else if(mo(e,r)){var m=s(0,u.length-1);n(f,f.text,h);if(d)e.remove(l.line,d);if(m.length)e.insert(l.line,m)}else if(c==f)if(u.length==1)n(c,c.text.slice(0,l.ch)+p+c.text.slice(a.ch),h);else{var g=s(1,u.length-1);g.push(new an(p+c.text.slice(a.ch),h,i));n(c,c.text.slice(0,l.ch)+u[0],o(0));e.insert(l.line+1,g)}else if(u.length==1){n(c,c.text.slice(0,l.ch)+u[0]+f.text.slice(a.ch),o(0));e.remove(l.line+1,d)}else{n(c,c.text.slice(0,l.ch)+u[0],o(0));n(f,p+f.text.slice(a.ch),h);var v=s(1,u.length-1);if(d>1)e.remove(l.line+1,d-1);e.insert(l.line+1,v)}Tn(e,"change",e,r)}function vo(e,s,l){function a(e,t,n){if(e.linked)for(var r=0;r<e.linked.length;++r){var i=e.linked[r];if(i.doc==t)continue;var o=n&&i.sharedHist;if(l&&!o)continue;s(i.doc,o);a(i.doc,e,o)}}a(e,null,true)}function yo(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t;t.cm=e;Dr(e);po(e);Ao(e);if(!e.options.lineWrapping)ln(e);e.options.mode=t.modeOption;Wr(e)}function Ao(e){(e.doc.direction=="rtl"?D:S)(e.display.lineDiv,"CodeMirror-rtl")}function bo(e){Li(e,function(){Ao(e);Wr(e)})}function Co(e){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=e||1}function wo(e,t){var n={from:lt(t.from),to:lo(t),text:Ye(e,t.from,t.to)};Bo(e,n,t.from.line,t.to.line+1);vo(e,function(e){return Bo(e,n,t.from.line,t.to.line+1)},true);return n}function xo(e){while(e.length){var t=Q(e);if(t.ranges)e.pop();else break}}function ko(e,t){if(t){xo(e.done);return Q(e.done)}else if(e.done.length&&!Q(e.done).ranges)return Q(e.done);else if(e.done.length>1&&!e.done[e.done.length-2].ranges){e.done.pop();return Q(e.done)}}function So(e,t,n,r){var i=e.history;i.undone.length=0;var o=+new Date,s;var l;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&(t.origin.charAt(0)=="+"&&i.lastModTime>o-(e.cm?e.cm.options.historyEventDelay:500)||t.origin.charAt(0)=="*"))&&(s=ko(i,i.lastOp==r))){l=Q(s.changes);if(ot(t.from,t.to)==0&&ot(t.from,l.to)==0)l.to=lo(t);else s.changes.push(wo(e,t))}else{var a=Q(i.done);if(!a||!a.ranges)To(e.sel,i.done);s={changes:[wo(e,t)],generation:i.generation};i.done.push(s);while(i.done.length>i.undoDepth){i.done.shift();if(!i.done[0].ranges)i.done.shift()}}i.done.push(n);i.generation=++i.maxGeneration;i.lastModTime=i.lastSelTime=o;i.lastOp=i.lastSelOp=r;i.lastOrigin=i.lastSelOrigin=t.origin;if(!l)ve(e,"historyAdded")}function Eo(e,t,n,r){var i=t.charAt(0);return i=="*"||i=="+"&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Mo(e,t,n,r){var i=e.history,o=r&&r.origin;if(n==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||Eo(e,o,Q(i.done),t)))i.done[i.done.length-1]=t;else To(t,i.done);i.lastSelTime=+new Date;i.lastSelOrigin=o;i.lastSelOp=n;if(r&&r.clearRedo!==false)xo(i.undone)}function To(e,t){var n=Q(t);if(!(n&&n.ranges&&n.equals(e)))t.push(e)}function Bo(t,n,e,r){var i=n["spans_"+t.id],o=0;t.iter(Math.max(t.first,e),Math.min(t.first+t.size,r),function(e){if(e.markedSpans)(i||(i=n["spans_"+t.id]={}))[o]=e.markedSpans;++o})}function Lo(e){if(!e)return null;var t;for(var n=0;n<e.length;++n)if(e[n].marker.explicitlyCleared){if(!t)t=e.slice(0,n)}else if(t)t.push(e[n]);return!t?e:t.length?t:null}function Oo(e,t){var n=t["spans_"+e.id];if(!n)return null;var r=[];for(var i=0;i<t.text.length;++i)r.push(Lo(n[i]));return r}function Fo(e,t){var n=Oo(e,t);var r=zt(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],s=r[i];if(o&&s)e:for(var l=0;l<s.length;++l){var a=s[l];for(var u=0;u<o.length;++u)if(o[u].marker==a.marker)continue e;o.push(a)}else if(s)n[i]=s}return n}function Do(e,t,n){var r=[];for(var i=0;i<e.length;++i){var o=e[i];if(o.ranges){r.push(n?ro.prototype.deepCopy.call(o):o);continue}var s=o.changes,l=[];r.push({changes:l});for(var a=0;a<s.length;++a){var u=s[a],c=void 0;l.push({from:u.from,to:u.to,text:u.text});if(t)for(var f in u)if(c=f.match(/^spans_(\d+)$/))if(I(t,Number(c[1]))>-1){Q(l)[f]=u[f];delete u[f]}}}return r}function No(e,t,n,r){if(r){var i=e.anchor;if(n){var o=ot(t,i)<0;if(o!=ot(n,i)<0){i=t;t=n}else if(o!=ot(t,n)<0)t=n}return new io(i,t)}else return new io(n||t,t)}function Po(e,t,n,r,i){if(i==null)i=e.cm&&(e.cm.display.shift||e.extend);Uo(e,new ro([No(e.sel.primary(),t,n,i)],0),r)}function Wo(e,t,n){var r=[];var i=e.cm&&(e.cm.display.shift||e.extend);for(var o=0;o<e.sel.ranges.length;o++)r[o]=No(e.sel.ranges[o],t[o],null,i);var s=oo(e.cm,r,e.sel.primIndex);Uo(e,s,n)}function Ro(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n;Uo(e,oo(e.cm,i,e.sel.primIndex),r)}function zo(e,t,n,r){Uo(e,so(t,n),r)}function Ho(n,e,t){var r={ranges:e.ranges,update:function(e){this.ranges=[];for(var t=0;t<e.length;t++)this.ranges[t]=new io(ft(n,e[t].anchor),ft(n,e[t].head))},origin:t&&t.origin};ve(n,"beforeSelectionChange",n,r);if(n.cm)ve(n.cm,"beforeSelectionChange",n.cm,r);if(r.ranges!=e.ranges)return oo(n.cm,r.ranges,r.ranges.length-1);else return e}function Io(e,t,n){var r=e.history.done,i=Q(r);if(i&&i.ranges){r[r.length-1]=t;jo(e,t,n)}else Uo(e,t,n)}function Uo(e,t,n){jo(e,t,n);Mo(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function jo(e,t,n){if(be(e,"beforeSelectionChange")||e.cm&&be(e.cm,"beforeSelectionChange"))t=Ho(e,t,n);var r=n&&n.bias||(ot(t.primary().head,e.sel.primary().head)<0?-1:1);qo(e,_o(e,t,r,true));if(!(n&&n.scroll===false)&&e.cm)si(e.cm)}function qo(e,t){if(t.equals(e.sel))return;e.sel=t;if(e.cm){e.cm.curOp.updateInput=1;e.cm.curOp.selectionChanged=true;Ae(e.cm)}Tn(e,"cursorActivity",e)}function Ko(e){qo(e,_o(e,e.sel,null,false))}function _o(e,t,n,r){var i;for(var o=0;o<t.ranges.length;o++){var s=t.ranges[o];var l=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o];var a=Go(e,s.anchor,l&&l.anchor,n,r);var u=Go(e,s.head,l&&l.head,n,r);if(i||a!=s.anchor||u!=s.head){if(!i)i=t.ranges.slice(0,o);i[o]=new io(a,u)}}return i?oo(e.cm,i,t.primIndex):t}function Vo(e,t,n,r,i){var o=$e(e,t.line);if(o.markedSpans)for(var s=0;s<o.markedSpans.length;++s){var l=o.markedSpans[s],a=l.marker;var u="selectLeft"in a?!a.selectLeft:a.inclusiveLeft;var c="selectRight"in a?!a.selectRight:a.inclusiveRight;if((l.from==null||(u?l.from<=t.ch:l.from<t.ch))&&(l.to==null||(c?l.to>=t.ch:l.to>t.ch))){if(i){ve(a,"beforeCursorEnter");if(a.explicitlyCleared)if(!o.markedSpans)break;else{--s;continue}}if(!a.atomic)continue;if(n){var f=a.find(r<0?1:-1),p=void 0;if(r<0?c:u)f=Xo(e,f,-r,f&&f.line==t.line?o:null);if(f&&f.line==t.line&&(p=ot(f,n))&&(r<0?p<0:p>0))return Vo(e,f,t,r,i)}var h=a.find(r<0?-1:1);if(r<0?u:c)h=Xo(e,h,r,h.line==t.line?o:null);return h?Vo(e,h,t,r,i):null}}return t}function Go(e,t,n,r,i){var o=r||1;var s=Vo(e,t,n,o,i)||!i&&Vo(e,t,n,o,true)||Vo(e,t,n,-o,i)||!i&&Vo(e,t,n,-o,true);if(!s){e.cantEdit=true;return it(e.first,0)}return s}function Xo(e,t,n,r){if(n<0&&t.ch==0)if(t.line>e.first)return ft(e,it(t.line-1));else return null;else if(n>0&&t.ch==(r||$e(e,t.line)).text.length)if(t.line<e.first+e.size-1)return it(t.line+1,0);else return null;else return new it(t.line,t.ch+n)}function Qo(e){e.setSelection(it(e.firstLine(),0),it(e.lastLine()),q)}function $o(i,e,t){var o={canceled:false,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){return o.canceled=true}};if(t)o.update=function(e,t,n,r){if(e)o.from=ft(i,e);if(t)o.to=ft(i,t);if(n)o.text=n;if(r!==undefined)o.origin=r};ve(i,"beforeChange",i,o);if(i.cm)ve(i.cm,"beforeChange",i.cm,o);if(o.canceled){if(i.cm)i.cm.curOp.updateInput=2;return null}return{from:o.from,to:o.to,text:o.text,origin:o.origin}}function Yo(e,t,n){if(e.cm){if(!e.cm.curOp)return Oi(e.cm,Yo)(e,t,n);if(e.cm.state.suppressEdits)return}if(be(e,"beforeChange")||e.cm&&be(e.cm,"beforeChange")){t=$o(e,t,true);if(!t)return}var r=Tt&&!n&&It(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)Zo(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text,origin:t.origin});else Zo(e,t)}function Zo(e,n){if(n.text.length==1&&n.text[0]==""&&ot(n.from,n.to)==0)return;var t=uo(e,n);So(e,n,t,e.cm?e.cm.curOp.id:NaN);ts(e,n,t,zt(e,n));var r=[];vo(e,function(e,t){if(!t&&I(r,e.history)==-1){ss(e.history,n);r.push(e.history)}ts(e,n,null,zt(e,n))})}function Jo(i,o,e){var t=i.cm&&i.cm.state.suppressEdits;if(t&&!e)return;var n=i.history,s,r=i.sel;var l=o=="undo"?n.done:n.undone,a=o=="undo"?n.undone:n.done;var u=0;for(;u<l.length;u++){s=l[u];if(e?s.ranges&&!s.equals(i.sel):!s.ranges)break}if(u==l.length)return;n.lastOrigin=n.lastSelOrigin=null;for(;;){s=l.pop();if(s.ranges){To(s,a);if(e&&!s.equals(i.sel)){Uo(i,s,{clearRedo:false});return}r=s}else if(t){l.push(s);return}else break}var c=[];To(r,a);a.push({changes:c,generation:n.generation});n.generation=s.generation||++n.maxGeneration;var f=be(i,"beforeChange")||i.cm&&be(i.cm,"beforeChange");var p=function(e){var n=s.changes[e];n.origin=o;if(f&&!$o(i,n,false)){l.length=0;return{}}c.push(wo(i,n));var t=e?uo(i,n):Q(l);ts(i,n,t,Fo(i,n));if(!e&&i.cm)i.cm.scrollIntoView({from:n.from,to:lo(n)});var r=[];vo(i,function(e,t){if(!t&&I(r,e.history)==-1){ss(e.history,n);r.push(e.history)}ts(e,n,null,Fo(e,n))})};for(var h=s.changes.length-1;h>=0;--h){var d=p(h);if(d)return d.v}}function es(e,t){if(t==0)return;e.first+=t;e.sel=new ro($(e.sel.ranges,function(e){return new io(it(e.anchor.line+t,e.anchor.ch),it(e.head.line+t,e.head.ch))}),e.sel.primIndex);if(e.cm){Wr(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)Rr(e.cm,r,"gutter")}}function ts(e,t,n,r){if(e.cm&&!e.cm.curOp)return Oi(e.cm,ts)(e,t,n,r);if(t.to.line<e.first){es(e,t.text.length-1-(t.to.line-t.from.line));return}if(t.from.line>e.lastLine())return;if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);es(e,i);t={from:it(e.first,0),to:it(t.to.line+i,t.to.ch),text:[Q(t.text)],origin:t.origin}}var o=e.lastLine();if(t.to.line>o)t={from:t.from,to:it(o,$e(e,o).text.length),text:[t.text[0]],origin:t.origin};t.removed=Ye(e,t.from,t.to);if(!n)n=uo(e,t);if(e.cm)ns(e.cm,t,r);else go(e,t,r);jo(e,n,q);if(e.cantEdit&&Go(e,it(e.firstLine(),0)))e.cantEdit=false}function ns(e,t,n){var r=e.doc,i=e.display,o=t.from,s=t.to;var l=false,a=o.line;if(!e.options.lineWrapping){a=et(Yt($e(r,o.line)));r.iter(a,s.line+1,function(e){if(e==i.maxLine){l=true;return true}})}if(r.sel.contains(t.from,t.to)>-1)Ae(e);go(r,t,n,Fr(e));if(!e.options.lineWrapping){r.iter(a,o.line+t.text.length,function(e){var t=sn(e);if(t>i.maxLineLength){i.maxLine=e;i.maxLineLength=t;i.maxLineChanged=true;l=false}});if(l)e.curOp.updateMaxLine=true}Mt(r,o.line);Ni(e,400);var u=t.text.length-(s.line-o.line)-1;if(t.full)Wr(e);else if(o.line==s.line&&t.text.length==1&&!mo(e.doc,t))Rr(e,o.line,"text");else Wr(e,o.line,s.line+1,u);var c=be(e,"changes"),f=be(e,"change");if(f||c){var p={from:o,to:s,text:t.text,removed:t.removed,origin:t.origin};if(f)Tn(e,"change",e,p);if(c)(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(p)}e.display.selForContextMenu=null}function rs(e,t,n,r,i){var o;if(!r)r=n;if(ot(r,n)<0)o=[r,n],n=o[0],r=o[1];if(typeof t=="string")t=e.splitLines(t);Yo(e,{from:n,to:r,text:t,origin:i})}function is(e,t,n,r){if(n<e.line)e.line+=r;else if(t<e.line){e.line=t;e.ch=0}}function os(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i],s=true;if(o.ranges){if(!o.copied){o=e[i]=o.deepCopy();o.copied=true}for(var l=0;l<o.ranges.length;l++){is(o.ranges[l].anchor,t,n,r);is(o.ranges[l].head,t,n,r)}continue}for(var a=0;a<o.changes.length;++a){var u=o.changes[a];if(n<u.from.line){u.from=it(u.from.line+r,u.from.ch);u.to=it(u.to.line+r,u.to.ch)}else if(t<=u.to.line){s=false;break}}if(!s){e.splice(0,i+1);i=0}}}function ss(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;os(e.done,n,r,i);os(e.undone,n,r,i)}function ls(e,t,n,r){var i=t,o=t;if(typeof t=="number")o=$e(e,ct(e,t));else i=et(t);if(i==null)return null;if(r(o,i)&&e.cm)Rr(e.cm,i,n);return o}function as(e){this.lines=e;this.parent=null;var t=0;for(var n=0;n<e.length;++n){e[n].parent=this;t+=e[n].height}this.height=t}function us(e){this.children=e;var t=0,n=0;for(var r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize();n+=i.height;i.parent=this}this.size=t;this.height=n;this.parent=null}io.prototype.from=function(){return ut(this.anchor,this.head)},io.prototype.to=function(){return at(this.anchor,this.head)},io.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},as.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;n<r;++n){var i=this.lines[n];this.height-=i.height;cn(i);Tn(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n;this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return true}},us.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var o=Math.min(t,i-e),s=r.height;r.removeInner(e,o);this.height-=s-r.height;if(i==o){this.children.splice(n--,1);r.parent=null}if((t-=o)==0)break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof as))){var l=[];this.collapse(l);this.children=[new as(l)];this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length;this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<=o){i.insertInner(e,t,n);if(i.lines&&i.lines.length>50){var s=i.lines.length%25+25;for(var l=s;l<i.lines.length;){var a=new as(i.lines.slice(l,l+=25));i.height-=a.height;this.children.splice(++r,0,a);a.parent=this}i.lines=i.lines.slice(0,s);this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(this.children.length<=10)return;var e=this;do{var t=e.children.splice(e.children.length-5,5);var n=new us(t);if(!e.parent){var r=new us(e.children);r.parent=e;e.children=[r,n];e=r}else{e.size-=n.size;e.height-=n.height;var i=I(e.parent.children,e);e.parent.children.splice(i+1,0,n)}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<o){var s=Math.min(t,o-e);if(i.iterN(e,s,n))return true;if((t-=s)==0)break;e=0}else e-=o}}};var cs=function(e,t,n){if(n)for(var r in n)if(n.hasOwnProperty(r))this[r]=n[r];this.doc=e;this.node=t};function fs(e,t,n){if(on(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop))oi(e,n)}function ps(r,e,t,n){var i=new cs(r,t,n);var o=r.cm;if(o&&i.noHScroll)o.display.alignWidgets=true;ls(r,e,"widget",function(e){var t=e.widgets||(e.widgets=[]);if(i.insertAt==null)t.push(i);else t.splice(Math.min(t.length,Math.max(0,i.insertAt)),0,i);i.line=e;if(o&&!nn(r,e)){var n=on(e)<r.scrollTop;Je(e,e.height+jn(i));if(n)oi(o,i.height);o.curOp.forceUpdate=true}return true});if(o)Tn(o,"lineWidgetAdded",o,i,typeof e=="number"?e:et(e));return i}cs.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,r=et(n);if(r==null||!t)return;for(var i=0;i<t.length;++i)if(t[i]==this)t.splice(i--,1);if(!t.length)n.widgets=null;var o=jn(this);Je(n,Math.max(0,n.height-o));if(e){Li(e,function(){fs(e,n,-o);Rr(e,r,"widget")});Tn(e,"lineWidgetCleared",e,this,r)}},cs.prototype.changed=function(){var e=this;var t=this.height,n=this.doc.cm,r=this.line;this.height=null;var i=jn(this)-t;if(!i)return;if(!nn(this.doc,r))Je(r,r.height+i);if(n)Li(n,function(){n.curOp.forceUpdate=true;fs(n,r,i);Tn(n,"lineWidgetChanged",n,e,et(r))})},Ce(cs);var hs=0,ds=function(e,t){this.lines=[];this.type=t;this.doc=e;this.id=++hs};function ms(t,n,r,e,i){if(e&&e.shared)return vs(t,n,r,e,i);if(t.cm&&!t.cm.curOp)return Oi(t.cm,ms)(t,n,r,e,i);var o=new ds(t,i),s=ot(n,r);if(e)R(e,o,false);if(s>0||s==0&&o.clearWhenEmpty!==false)return o;if(o.replacedWith){o.collapsed=true;o.widgetNode=B("span",[o.replacedWith],"CodeMirror-widget");if(!e.handleMouseEvents)o.widgetNode.setAttribute("cm-ignore-events","true");if(e.insertLeft)o.widgetNode.insertLeft=true}if(o.collapsed){if($t(t,n.line,n,r,o)||n.line!=r.line&&$t(t,r.line,n,r,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Ot()}if(o.addToHistory)So(t,{from:n,to:r,origin:"markText"},t.sel,NaN);var l=n.line,a=t.cm,u;t.iter(l,r.line+1,function(e){if(a&&o.collapsed&&!a.options.lineWrapping&&Yt(e)==a.display.maxLine)u=true;if(o.collapsed&&l!=n.line)Je(e,0);Pt(e,new Ft(o,l==n.line?n.ch:null,l==r.line?r.ch:null));++l});if(o.collapsed)t.iter(n.line,r.line+1,function(e){if(nn(t,e))Je(e,0)});if(o.clearOnEnter)de(o,"beforeCursorEnter",function(){return o.clear()});if(o.readOnly){Lt();if(t.history.done.length||t.history.undone.length)t.clearHistory()}if(o.collapsed){o.id=++hs;o.atomic=true}if(a){if(u)a.curOp.updateMaxLine=true;if(o.collapsed)Wr(a,n.line,r.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var c=n.line;c<=r.line;c++)Rr(a,c,"text");if(o.atomic)Ko(a.doc);Tn(a,"markerAdded",a,o)}return o}ds.prototype.clear=function(){if(this.explicitlyCleared)return;var e=this.doc.cm,t=e&&!e.curOp;if(t)wi(e);if(be(this,"clear")){var n=this.find();if(n)Tn(this,"clear",n.from,n.to)}var r=null,i=null;for(var o=0;o<this.lines.length;++o){var s=this.lines[o];var l=Dt(s.markedSpans,this);if(e&&!this.collapsed)Rr(e,et(s),"text");else if(e){if(l.to!=null)i=et(s);if(l.from!=null)r=et(s)}s.markedSpans=Nt(s.markedSpans,l);if(l.from==null&&this.collapsed&&!nn(this.doc,s)&&e)Je(s,Tr(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var a=0;a<this.lines.length;++a){var u=Yt(this.lines[a]),c=sn(u);if(c>e.display.maxLineLength){e.display.maxLine=u;e.display.maxLineLength=c;e.display.maxLineChanged=true}}if(r!=null&&e&&this.collapsed)Wr(e,r,i+1);this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;if(e)Ko(e.doc)}if(e)Tn(e,"markerCleared",e,this,r,i);if(t)xi(e);if(this.parent)this.parent.clear()},ds.prototype.find=function(e,t){if(e==null&&this.type=="bookmark")e=1;var n,r;for(var i=0;i<this.lines.length;++i){var o=this.lines[i];var s=Dt(o.markedSpans,this);if(s.from!=null){n=it(t?o:et(o),s.from);if(e==-1)return n}if(s.to!=null){r=it(t?o:et(o),s.to);if(e==1)return r}}return n&&{from:n,to:r}},ds.prototype.changed=function(){var o=this;var s=this.find(-1,true),l=this,a=this.doc.cm;if(!s||!a)return;Li(a,function(){var e=s.line,t=et(s.line);var n=er(a,t);if(n){ur(n);a.curOp.selectionChanged=a.curOp.forceUpdate=true}a.curOp.updateMaxLine=true;if(!nn(l.doc,e)&&l.height!=null){var r=l.height;l.height=null;var i=jn(l)-r;if(i)Je(e,e.height+i)}Tn(a,"markerChanged",a,o)})},ds.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;if(!t.maybeHiddenMarkers||I(t.maybeHiddenMarkers,this)==-1)(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},ds.prototype.detachLine=function(e){this.lines.splice(I(this.lines,e),1);if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},Ce(ds);var gs=function(e,t){this.markers=e;this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function vs(e,n,r,i,o){i=R(i);i.shared=false;var s=[ms(e,n,r,i,o)],l=s[0];var a=i.widgetNode;vo(e,function(e){if(a)i.widgetNode=a.cloneNode(true);s.push(ms(e,ft(e,n),ft(e,r),i,o));for(var t=0;t<e.linked.length;++t)if(e.linked[t].isParent)return;l=Q(s)});return new gs(s,l)}function ys(e){return e.findMarks(it(e.first,0),e.clipPos(it(e.lastLine())),function(e){return e.parent})}function As(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find();var o=e.clipPos(i.from),s=e.clipPos(i.to);if(ot(o,s)){var l=ms(e,o,s,r.primary,r.primary.type);r.markers.push(l);l.parent=r}}}function bs(o){var e=function(e){var t=o[e],n=[t.primary.doc];vo(t.primary.doc,function(e){return n.push(e)});for(var r=0;r<t.markers.length;r++){var i=t.markers[r];if(I(n,i.doc)==-1){i.parent=null;t.markers.splice(r--,1)}}};for(var t=0;t<o.length;t++)e(t)}gs.prototype.clear=function(){if(this.explicitlyCleared)return;this.explicitlyCleared=true;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Tn(this,"clear")},gs.prototype.find=function(e,t){return this.primary.find(e,t)},Ce(gs);var Cs=0,ws=function(e,t,n,r,i){if(!(this instanceof ws))return new ws(e,t,n,r,i);if(n==null)n=0;us.call(this,[new as([new an("",null)])]);this.first=n;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.modeFrontier=this.highlightFrontier=n;var o=it(n,0);this.sel=so(o);this.history=new Co(null);this.id=++Cs;this.modeOption=t;this.lineSep=r;this.direction=i=="rtl"?"rtl":"ltr";this.extend=false;if(typeof e=="string")e=this.splitLines(e);go(this,{from:o,to:o,text:e});Uo(this,so(o),q)};ws.prototype=J(us.prototype,{constructor:ws,iter:function(e,t,n){if(n)this.iterN(e-this.first,t-e,n);else this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){var n=0;for(var r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Ze(this,this.first,this.first+this.size);if(e===false)return t;return t.join(e||this.lineSeparator())},setValue:Di(function(e){var t=it(this.first,0),n=this.first+this.size-1;Yo(this,{from:t,to:it(n,$e(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:true},true);if(this.cm)li(this.cm,0,0);Uo(this,so(t),q)}),replaceRange:function(e,t,n,r){t=ft(this,t);n=n?ft(this,n):t;rs(this,e,t,n,r)},getRange:function(e,t,n){var r=Ye(this,ft(this,e),ft(this,t));if(n===false)return r;return r.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(nt(this,e))return $e(this,e)},getLineNumber:function(e){return et(e)},getLineHandleVisualStart:function(e){if(typeof e=="number")e=$e(this,e);return Yt(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return ft(this,e)},getCursor:function(e){var t=this.sel.primary(),n;if(e==null||e=="head")n=t.head;else if(e=="anchor")n=t.anchor;else if(e=="end"||e=="to"||e===false)n=t.to();else n=t.from();return n},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Di(function(e,t,n){zo(this,ft(this,typeof e=="number"?it(e,t||0):e),null,n)}),setSelection:Di(function(e,t,n){zo(this,ft(this,e),ft(this,t||e),n)}),extendSelection:Di(function(e,t,n){Po(this,ft(this,e),t&&ft(this,t),n)}),extendSelections:Di(function(e,t){Wo(this,ht(this,e),t)}),extendSelectionsBy:Di(function(e,t){var n=$(this.sel.ranges,e);Wo(this,ht(this,n),t)}),setSelections:Di(function(e,t,n){if(!e.length)return;var r=[];for(var i=0;i<e.length;i++)r[i]=new io(ft(this,e[i].anchor),ft(this,e[i].head));if(t==null)t=Math.min(e.length-1,this.sel.primIndex);Uo(this,oo(this.cm,r,t),n)}),addSelection:Di(function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new io(ft(this,e),ft(this,t||e)));Uo(this,oo(this.cm,r,r.length-1),n)}),getSelection:function(e){var t=this.sel.ranges,n;for(var r=0;r<t.length;r++){var i=Ye(this,t[r].from(),t[r].to());n=n?n.concat(i):i}if(e===false)return n;else return n.join(e||this.lineSeparator())},getSelections:function(e){var t=[],n=this.sel.ranges;for(var r=0;r<n.length;r++){var i=Ye(this,n[r].from(),n[r].to());if(e!==false)i=i.join(e||this.lineSeparator());t[r]=i}return t},replaceSelection:function(e,t,n){var r=[];for(var i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:Di(function(e,t,n){var r=[],i=this.sel;for(var o=0;o<i.ranges.length;o++){var s=i.ranges[o];r[o]={from:s.from(),to:s.to(),text:this.splitLines(e[o]),origin:n}}var l=t&&t!="end"&&fo(this,r,t);for(var a=r.length-1;a>=0;a--)Yo(this,r[a]);if(l)Io(this,l);else if(this.cm)si(this.cm)}),undo:Di(function(){Jo(this,"undo")}),redo:Di(function(){Jo(this,"redo")}),undoSelection:Di(function(){Jo(this,"undo",true)}),redoSelection:Di(function(){Jo(this,"redo",true)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){var e=this.history,t=0,n=0;for(var r=0;r<e.done.length;r++)if(!e.done[r].ranges)++t;for(var i=0;i<e.undone.length;i++)if(!e.undone[i].ranges)++n;return{undo:t,redo:n}},clearHistory:function(){var t=this;this.history=new Co(this.history.maxGeneration);vo(this,function(e){return e.history=t.history},true)},markClean:function(){this.cleanGeneration=this.changeGeneration(true)},changeGeneration:function(e){if(e)this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null;return this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Do(this.history.done),undone:Do(this.history.undone)}},setHistory:function(e){var t=this.history=new Co(this.history.maxGeneration);t.done=Do(e.done.slice(0),null,true);t.undone=Do(e.undone.slice(0),null,true)},setGutterMarker:Di(function(e,n,r){return ls(this,e,"gutter",function(e){var t=e.gutterMarkers||(e.gutterMarkers={});t[n]=r;if(!r&&re(t))e.gutterMarkers=null;return true})}),clearGutter:Di(function(t){var n=this;this.iter(function(e){if(e.gutterMarkers&&e.gutterMarkers[t])ls(n,e,"gutter",function(){e.gutterMarkers[t]=null;if(re(e.gutterMarkers))e.gutterMarkers=null;return true})})}),lineInfo:function(e){var t;if(typeof e=="number"){if(!nt(this,e))return null;t=e;e=$e(this,e);if(!e)return null}else{t=et(e);if(t==null)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Di(function(e,n,r){return ls(this,e,n=="gutter"?"gutter":"class",function(e){var t=n=="text"?"textClass":n=="background"?"bgClass":n=="gutter"?"gutterClass":"wrapClass";if(!e[t])e[t]=r;else if(x(r).test(e[t]))return false;else e[t]+=" "+r;return true})}),removeLineClass:Di(function(e,o,s){return ls(this,e,o=="gutter"?"gutter":"class",function(e){var t=o=="text"?"textClass":o=="background"?"bgClass":o=="gutter"?"gutterClass":"wrapClass";var n=e[t];if(!n)return false;else if(s==null)e[t]=null;else{var r=n.match(x(s));if(!r)return false;var i=r.index+r[0].length;e[t]=n.slice(0,r.index)+(!r.index||i==n.length?"":" ")+n.slice(i)||null}return true})}),addLineWidget:Di(function(e,t,n){return ps(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return ms(this,ft(this,e),ft(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(t.nodeType==null?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:false,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};e=ft(this,e);return ms(this,e,e,n,"bookmark")},findMarksAt:function(e){e=ft(this,e);var t=[],n=$e(this,e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];if((i.from==null||i.from<=e.ch)&&(i.to==null||i.to>=e.ch))t.push(i.marker.parent||i.marker)}return t},findMarks:function(i,o,s){i=ft(this,i);o=ft(this,o);var l=[],a=i.line;this.iter(i.line,o.line+1,function(e){var t=e.markedSpans;if(t)for(var n=0;n<t.length;n++){var r=t[n];if(!(r.to!=null&&a==i.line&&i.ch>=r.to||r.from==null&&a!=i.line||r.from!=null&&a==o.line&&r.from>=o.ch)&&(!s||s(r.marker)))l.push(r.marker.parent||r.marker)}++a});return l},getAllMarks:function(){var r=[];this.iter(function(e){var t=e.markedSpans;if(t)for(var n=0;n<t.length;++n)if(t[n].from!=null)r.push(t[n].marker)});return r},posFromIndex:function(n){var r,i=this.first,o=this.lineSeparator().length;this.iter(function(e){var t=e.text.length+o;if(t>n){r=n;return true}n-=t;++i});return ft(this,it(i,r))},indexFromPos:function(e){e=ft(this,e);var t=e.ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;this.iter(this.first,e.line,function(e){t+=e.text.length+n});return t},copy:function(e){var t=new ws(Ze(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);t.scrollTop=this.scrollTop;t.scrollLeft=this.scrollLeft;t.sel=this.sel;t.extend=false;if(e){t.history.undoDepth=this.history.undoDepth;t.setHistory(this.getHistory())}return t},linkedDoc:function(e){if(!e)e={};var t=this.first,n=this.first+this.size;if(e.from!=null&&e.from>t)t=e.from;if(e.to!=null&&e.to<n)n=e.to;var r=new ws(Ze(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);if(e.sharedHist)r.history=this.history;(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist});r.linked=[{doc:this,isParent:true,sharedHist:e.sharedHist}];As(r,ys(this));return r},unlinkDoc:function(e){if(e instanceof Wl)e=e.doc;if(this.linked)for(var t=0;t<this.linked.length;++t){var n=this.linked[t];if(n.doc!=e)continue;this.linked.splice(t,1);e.unlinkDoc(this);bs(ys(this));break}if(e.history==this.history){var r=[e.id];vo(e,function(e){return r.push(e.id)},true);e.history=new Co(null);e.history.done=Do(this.history.done,r);e.history.undone=Do(this.history.undone,r)}},iterLinkedDocs:function(e){vo(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){if(this.lineSep)return e.split(this.lineSep);return De(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Di(function(e){if(e!="rtl")e="ltr";if(e==this.direction)return;this.direction=e;this.iter(function(e){return e.order=null});if(this.cm)bo(this.cm)})}),ws.prototype.eachLine=ws.prototype.iter;var xs=0;function ks(e){var r=this;Ms(r);if(ye(r,e)||qn(r.display,e))return;we(e);if(k)xs=+new Date;var t=Nr(r,e,true),n=e.dataTransfer.files;if(!t||r.isReadOnly())return;if(n&&n.length&&window.FileReader&&window.File){var i=n.length,o=Array(i),s=0;var l=function(){if(++s==i)Oi(r,function(){t=ft(r.doc,t);var e={from:t,to:t,text:r.doc.splitLines(o.filter(function(e){return e!=null}).join(r.doc.lineSeparator())),origin:"paste"};Yo(r.doc,e);Io(r.doc,so(ft(r.doc,t),ft(r.doc,lo(e))))})()};var a=function(e,t){if(r.options.allowDropFileTypes&&I(r.options.allowDropFileTypes,e.type)==-1){l();return}var n=new FileReader;n.onerror=function(){return l()};n.onload=function(){var e=n.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)){l();return}o[t]=e;l()};n.readAsText(e)};for(var u=0;u<n.length;u++)a(n[u],u)}else{if(r.state.draggingText&&r.doc.sel.contains(t)>-1){r.state.draggingText(e);setTimeout(function(){return r.display.input.focus()},20);return}try{var c=e.dataTransfer.getData("Text");if(c){var f;if(r.state.draggingText&&!r.state.draggingText.copy)f=r.listSelections();jo(r.doc,so(t,t));if(f)for(var p=0;p<f.length;++p)rs(r.doc,"",f[p].anchor,f[p].head,"drag");r.replaceSelection(c,"around","paste");r.display.input.focus()}}catch(e){}}}function Ss(e,t){if(k&&(!e.state.draggingText||+new Date-xs<100)){Se(t);return}if(ye(e,t)||qn(e.display,t))return;t.dataTransfer.setData("Text",e.getSelection());t.dataTransfer.effectAllowed="copyMove";if(t.dataTransfer.setDragImage&&!c){var n=O("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(v){n.width=n.height=1;e.display.wrapper.appendChild(n);n._top=n.offsetTop}t.dataTransfer.setDragImage(n,0,0);if(v)n.parentNode.removeChild(n)}}function Es(e,t){var n=Nr(e,t);if(!n)return;var r=document.createDocumentFragment();Kr(e,n,r);if(!e.display.dragCursor){e.display.dragCursor=O("div",null,"CodeMirror-cursors CodeMirror-dragcursors");e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)}T(e.display.dragCursor,r)}function Ms(e){if(e.display.dragCursor){e.display.lineSpace.removeChild(e.display.dragCursor);e.display.dragCursor=null}}function Ts(t){if(!document.getElementsByClassName)return;var e=document.getElementsByClassName("CodeMirror"),n=[];for(var r=0;r<e.length;r++){var i=e[r].CodeMirror;if(i)n.push(i)}if(n.length)n[0].operation(function(){for(var e=0;e<n.length;e++)t(n[e])})}var Bs=false;function Ls(){if(Bs)return;Os();Bs=true}function Os(){var e;de(window,"resize",function(){if(e==null)e=setTimeout(function(){e=null;Ts(Fs)},100)});de(window,"blur",function(){return Ts(Yr)})}function Fs(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null;t.scrollbarsClipped=false;e.setSize()}for(var Ds={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ns=0;Ns<10;Ns++)Ds[Ns+48]=Ds[Ns+96]=String(Ns);for(var Ps=65;Ps<=90;Ps++)Ds[Ps]=String.fromCharCode(Ps);for(var Ws=1;Ws<=12;Ws++)Ds[Ws+111]=Ds[Ws+63235]="F"+Ws;var Rs={};function zs(e){var t=e.split(/-(?!$)/);e=t[t.length-1];var n,r,i,o;for(var s=0;s<t.length-1;s++){var l=t[s];if(/^(cmd|meta|m)$/i.test(l))o=true;else if(/^a(lt)?$/i.test(l))n=true;else if(/^(c|ctrl|control)$/i.test(l))r=true;else if(/^s(hift)?$/i.test(l))i=true;else throw new Error("Unrecognized modifier name: "+l)}if(n)e="Alt-"+e;if(r)e="Ctrl-"+e;if(o)e="Cmd-"+e;if(i)e="Shift-"+e;return e}function Hs(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if(r=="..."){delete e[n];continue}var i=$(n.split(" "),zs);for(var o=0;o<i.length;o++){var s=void 0,l=void 0;if(o==i.length-1){l=i.join(" ");s=r}else{l=i.slice(0,o+1).join(" ");s="..."}var a=t[l];if(!a)t[l]=s;else if(a!=s)throw new Error("Inconsistent bindings for "+l)}delete e[n]}for(var u in t)e[u]=t[u];return e}function Is(e,t,n,r){t=Ks(t);var i=t.call?t.call(e,r):t[e];if(i===false)return"nothing";if(i==="...")return"multi";if(i!=null&&n(i))return"handled";if(t.fallthrough){if(Object.prototype.toString.call(t.fallthrough)!="[object Array]")return Is(e,t.fallthrough,n,r);for(var o=0;o<t.fallthrough.length;o++){var s=Is(e,t.fallthrough[o],n,r);if(s)return s}}}function Us(e){var t=typeof e=="string"?e:Ds[e.keyCode];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"}function js(e,t,n){var r=e;if(t.altKey&&r!="Alt")e="Alt-"+e;if((b?t.metaKey:t.ctrlKey)&&r!="Ctrl")e="Ctrl-"+e;if((b?t.ctrlKey:t.metaKey)&&r!="Mod")e="Cmd-"+e;if(!n&&t.shiftKey&&r!="Shift")e="Shift-"+e;return e}function qs(e,t){if(v&&e.keyCode==34&&e["char"])return false;var n=Ds[e.keyCode];if(n==null||e.altGraphKey)return false;if(e.keyCode==3&&e.code)n=e.code;return js(n,e,t)}function Ks(e){return typeof e=="string"?Rs[e]:e}function _s(t,e){var n=t.doc.sel.ranges,r=[];for(var i=0;i<n.length;i++){var o=e(n[i]);while(r.length&&ot(o.from,Q(r).to)<=0){var s=r.pop();if(ot(s.from,o.from)<0){o.from=s.from;break}}r.push(o)}Li(t,function(){for(var e=r.length-1;e>=0;e--)rs(t.doc,"",r[e].from,r[e].to,"+delete");si(t)})}function Vs(e,t,n){var r=se(e.text,t+n,n);return r<0||r>e.text.length?null:r}function Gs(e,t,n){var r=Vs(e,t.ch,n);return r==null?null:new it(t.line,r,n<0?"after":"before")}function Xs(e,t,n,r,i){if(e){if(t.doc.direction=="rtl")i=-i;var o=pe(n,t.doc.direction);if(o){var s=i<0?Q(o):o[0];var l=i<0==(s.level==1);var a=l?"after":"before";var u;if(s.level>0||t.doc.direction=="rtl"){var c=tr(t,n);u=i<0?n.text.length-1:0;var f=nr(t,c,u).top;u=le(function(e){return nr(t,c,e).top==f},i<0==(s.level==1)?s.from:s.to-1,u);if(a=="before")u=Vs(n,u,1)}else u=i<0?s.to:s.from;return new it(r,u,a)}}return new it(r,i<0?n.text.length:0,i<0?"before":"after")}function Qs(t,n,l,e){var a=pe(n,t.doc.direction);if(!a)return Gs(n,l,e);if(l.ch>=n.text.length){l.ch=n.text.length;l.sticky="before"}else if(l.ch<=0){l.ch=0;l.sticky="after"}var r=ce(a,l.ch,l.sticky),i=a[r];if(t.doc.direction=="ltr"&&i.level%2==0&&(e>0?i.to>l.ch:i.from<l.ch))return Gs(n,l,e);var u=function(e,t){return Vs(n,e instanceof it?e.ch:e,t)};var o;var s=function(e){if(!t.options.lineWrapping)return{begin:0,end:n.text.length};o=o||tr(t,n);return xr(t,n,o,e)};var c=s(l.sticky=="before"?u(l,-1):l.ch);if(t.doc.direction=="rtl"||i.level==1){var f=i.level==1==e<0;var p=u(l,f?1:-1);if(p!=null&&(!f?p>=i.from&&p>=c.begin:p<=i.to&&p<=c.end)){var h=f?"before":"after";return new it(l.line,p,h)}}var d=function(e,t,n){var r=function(e,t){return t?new it(l.line,u(e,1),"before"):new it(l.line,e,"after")};for(;e>=0&&e<a.length;e+=t){var i=a[e];var o=t>0==(i.level!=1);var s=o?n.begin:u(n.end,-1);if(i.from<=s&&s<i.to)return r(s,o);s=o?i.from:u(i.to,-1);if(n.begin<=s&&s<n.end)return r(s,o)}};var m=d(r+e,e,c);if(m)return m;var g=e>0?c.end:u(c.begin,-1);if(g!=null&&!(e>0&&g==n.text.length)){m=d(e>0?0:a.length-1,e,s(g));if(m)return m}return null}Rs.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Rs.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Rs.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Rs.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Rs["default"]=y?Rs.macDefault:Rs.pcDefault;var $s={selectAll:Qo,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),q)},killLine:function(n){return _s(n,function(e){if(e.empty()){var t=$e(n.doc,e.head.line).text.length;if(e.head.ch==t&&e.head.line<n.lastLine())return{from:e.head,to:it(e.head.line+1,0)};else return{from:e.head,to:it(e.head.line,t)}}else return{from:e.from(),to:e.to()}})},deleteLine:function(t){return _s(t,function(e){return{from:it(e.from().line,0),to:ft(t.doc,it(e.to().line+1,0))}})},delLineLeft:function(e){return _s(e,function(e){return{from:it(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(r){return _s(r,function(e){var t=r.charCoords(e.head,"div").top+5;var n=r.coordsChar({left:0,top:t},"div");return{from:n,to:e.from()}})},delWrappedLineRight:function(r){return _s(r,function(e){var t=r.charCoords(e.head,"div").top+5;var n=r.coordsChar({left:r.display.lineDiv.offsetWidth+100,top:t},"div");return{from:e.from(),to:n}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(it(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(it(e.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy(function(e){return Ys(t,e.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy(function(e){return Js(t,e.head)},{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy(function(e){return Zs(t,e.head.line)},{origin:"+move",bias:-1})},goLineRight:function(n){return n.extendSelectionsBy(function(e){var t=n.cursorCoords(e.head,"div").top+5;return n.coordsChar({left:n.display.lineDiv.offsetWidth+100,top:t},"div")},_)},goLineLeft:function(n){return n.extendSelectionsBy(function(e){var t=n.cursorCoords(e.head,"div").top+5;return n.coordsChar({left:0,top:t},"div")},_)},goLineLeftSmart:function(r){return r.extendSelectionsBy(function(e){var t=r.cursorCoords(e.head,"div").top+5;var n=r.coordsChar({left:0,top:t},"div");if(n.ch<r.getLine(n.line).search(/\S/))return Js(r,e.head);return n},_)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){var t=[],n=e.listSelections(),r=e.options.tabSize;for(var i=0;i<n.length;i++){var o=n[i].from();var s=z(e.getLine(o.line),o.ch,r);t.push(X(r-s%r))}e.replaceSelections(t)},defaultTab:function(e){if(e.somethingSelected())e.indentSelection("add");else e.execCommand("insertTab")},transposeChars:function(s){return Li(s,function(){var e=s.listSelections(),t=[];for(var n=0;n<e.length;n++){if(!e[n].empty())continue;var r=e[n].head,i=$e(s.doc,r.line).text;if(i){if(r.ch==i.length)r=new it(r.line,r.ch-1);if(r.ch>0){r=new it(r.line,r.ch+1);s.replaceRange(i.charAt(r.ch-1)+i.charAt(r.ch-2),it(r.line,r.ch-2),r,"+transpose")}else if(r.line>s.doc.first){var o=$e(s.doc,r.line-1).text;if(o){r=new it(r.line,1);s.replaceRange(i.charAt(0)+s.doc.lineSeparator()+o.charAt(o.length-1),it(r.line-1,o.length-1),r,"+transpose")}}}t.push(new io(r,r))}s.setSelections(t)})},newlineAndIndent:function(r){return Li(r,function(){var e=r.listSelections();for(var t=e.length-1;t>=0;t--)r.replaceRange(r.doc.lineSeparator(),e[t].anchor,e[t].head,"+input");e=r.listSelections();for(var n=0;n<e.length;n++)r.indentLine(e[n].from().line,null,true);si(r)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Ys(e,t){var n=$e(e.doc,t);var r=Yt(n);if(r!=n)t=et(r);return Xs(true,e,r,t,1)}function Zs(e,t){var n=$e(e.doc,t);var r=Zt(n);if(r!=n)t=et(r);return Xs(true,e,n,t,-1)}function Js(e,t){var n=Ys(e,t.line);var r=$e(e.doc,n.line);var i=pe(r,e.doc.direction);if(!i||i[0].level==0){var o=Math.max(n.ch,r.text.search(/\S/));var s=t.line==n.line&&t.ch<=o&&t.ch;return it(n.line,s?0:o,n.sticky)}return n}function el(e,t,n){if(typeof t=="string"){t=$s[t];if(!t)return false}e.display.input.ensurePolled();var r=e.display.shift,i=false;try{if(e.isReadOnly())e.state.suppressEdits=true;if(n)e.display.shift=false;i=t(e)!=j}finally{e.display.shift=r;e.state.suppressEdits=false}return i}function tl(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var i=Is(t,e.state.keyMaps[r],n,e);if(i)return i}return e.options.extraKeys&&Is(t,e.options.extraKeys,n,e)||Is(t,e.options.keyMap,n,e)}var nl=new H;function rl(e,t,n,r){var i=e.state.keySeq;if(i){if(Us(t))return"handled";if(/\'$/.test(t))e.state.keySeq=null;else nl.set(50,function(){if(e.state.keySeq==i){e.state.keySeq=null;e.display.input.reset()}});if(il(e,i+" "+t,n,r))return true}return il(e,t,n,r)}function il(e,t,n,r){var i=tl(e,t,r);if(i=="multi")e.state.keySeq=t;if(i=="handled")Tn(e,"keyHandled",e,t,n);if(i=="handled"||i=="multi"){we(n);Gr(e)}return!!i}function ol(t,e){var n=qs(e,true);if(!n)return false;if(e.shiftKey&&!t.state.keySeq)return rl(t,"Shift-"+n,e,function(e){return el(t,e,true)})||rl(t,n,e,function(e){if(typeof e=="string"?/^go[A-Z]/.test(e):e.motion)return el(t,e)});else return rl(t,n,e,function(e){return el(t,e)})}function sl(t,e,n){return rl(t,"'"+n+"'",e,function(e){return el(t,e,true)})}var ll=null;function al(e){var t=this;if(e.target&&e.target!=t.display.input.getField())return;t.curOp.focus=F();if(ye(t,e))return;if(k&&C<11&&e.keyCode==27)e.returnValue=false;var n=e.keyCode;t.display.shift=n==16||e.shiftKey;var r=ol(t,e);if(v){ll=r?n:null;if(!r&&n==88&&!Pe&&(y?e.metaKey:e.ctrlKey))t.replaceSelection("",null,"cut")}if(m&&!y&&!r&&n==46&&e.shiftKey&&!e.ctrlKey&&document.execCommand)document.execCommand("cut");if(n==18&&!/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className))ul(t)}function ul(e){var t=e.display.lineDiv;D(t,"CodeMirror-crosshair");function n(e){if(e.keyCode==18||!e.altKey){S(t,"CodeMirror-crosshair");ge(document,"keyup",n);ge(document,"mouseover",n)}}de(document,"keyup",n);de(document,"mouseover",n)}function cl(e){if(e.keyCode==16)this.doc.sel.shift=false;ye(this,e)}function fl(e){var t=this;if(e.target&&e.target!=t.display.input.getField())return;if(qn(t.display,e)||ye(t,e)||e.ctrlKey&&!e.altKey||y&&e.metaKey)return;var n=e.keyCode,r=e.charCode;if(v&&n==ll){ll=null;we(e);return}if(v&&(!e.which||e.which<10)&&ol(t,e))return;var i=String.fromCharCode(r==null?n:r);if(i=="\b")return;if(sl(t,e,i))return;t.display.input.onKeyPress(e)}var pl=400,hl=function(e,t,n){this.time=e;this.pos=t;this.button=n},dl,ml;function gl(e,t){var n=+new Date;if(ml&&ml.compare(n,e,t)){dl=ml=null;return"triple"}else if(dl&&dl.compare(n,e,t)){ml=new hl(n,e,t);dl=null;return"double"}else{dl=new hl(n,e,t);ml=null;return"single"}}function vl(e){var t=this,n=t.display;if(ye(t,e)||n.activeTouch&&n.input.supportsTouch())return;n.input.ensurePolled();n.shift=e.shiftKey;if(qn(n,e)){if(!g){n.scroller.draggable=false;setTimeout(function(){return n.scroller.draggable=true},100)}return}if(El(t,e))return;var r=Nr(t,e),i=Me(e),o=r?gl(r,i):"single";window.focus();if(i==1&&t.state.selectingText)t.state.selectingText(e);if(r&&yl(t,i,r,o,e))return;if(i==1){if(r)bl(t,r,o,e);else if(Ee(e)==n.scroller)we(e)}else if(i==2){if(r)Po(t.doc,r);setTimeout(function(){return n.input.focus()},20)}else if(i==3)if(w)t.display.input.onContextMenu(e);else Qr(t)}function yl(n,e,r,t,i){var o="Click";if(t=="double")o="Double"+o;else if(t=="triple")o="Triple"+o;o=(e==1?"Left":e==2?"Middle":"Right")+o;return rl(n,js(o,i),i,function(e){if(typeof e=="string")e=$s[e];if(!e)return false;var t=false;try{if(n.isReadOnly())n.state.suppressEdits=true;t=e(n,r)!=j}finally{n.state.suppressEdits=false}return t})}function Al(e,t,n){var r=e.getOption("configureMouse");var i=r?r(e,t,n):{};if(i.unit==null){var o=h?n.shiftKey&&n.metaKey:n.altKey;i.unit=o?"rectangle":t=="single"?"char":t=="double"?"word":"line"}if(i.extend==null||e.doc.extend)i.extend=e.doc.extend||n.shiftKey;if(i.addNew==null)i.addNew=y?n.metaKey:n.ctrlKey;if(i.moveOnDrag==null)i.moveOnDrag=!(y?n.altKey:n.ctrlKey);return i}function bl(e,t,n,r){if(k)setTimeout(W(Xr,e),0);else e.curOp.focus=F();var i=Al(e,n,r);var o=e.doc.sel,s;if(e.options.dragDrop&&Te&&!e.isReadOnly()&&n=="single"&&(s=o.contains(t))>-1&&(ot((s=o.ranges[s]).from(),t)<0||t.xRel>0)&&(ot(s.to(),t)>0||t.xRel<0))Cl(e,r,t,i);else xl(e,r,t,i)}function Cl(t,n,r,i){var o=t.display,s=false;var l=Oi(t,function(e){if(g)o.scroller.draggable=false;t.state.draggingText=false;if(t.state.delayingBlurEvent)if(t.hasFocus())t.state.delayingBlurEvent=false;else Qr(t);ge(o.wrapper.ownerDocument,"mouseup",l);ge(o.wrapper.ownerDocument,"mousemove",a);ge(o.scroller,"dragstart",u);ge(o.scroller,"drop",l);if(!s){we(e);if(!i.addNew)Po(t.doc,r,null,null,i.extend);if(g&&!c||k&&C==9)setTimeout(function(){o.wrapper.ownerDocument.body.focus({preventScroll:true});o.input.focus()},20);else o.input.focus()}});var a=function(e){s=s||Math.abs(n.clientX-e.clientX)+Math.abs(n.clientY-e.clientY)>=10};var u=function(){return s=true};if(g)o.scroller.draggable=true;t.state.draggingText=l;l.copy=!i.moveOnDrag;de(o.wrapper.ownerDocument,"mouseup",l);de(o.wrapper.ownerDocument,"mousemove",a);de(o.scroller,"dragstart",u);de(o.scroller,"drop",l);t.state.delayingBlurEvent=true;setTimeout(function(){return o.input.focus()},20);if(o.scroller.dragDrop)o.scroller.dragDrop()}function wl(e,t,n){if(n=="char")return new io(t,t);if(n=="word")return e.findWordAt(t);if(n=="line")return new io(it(t.line,0),ft(e.doc,it(t.line+1,0)));var r=n(e,t);return new io(r.from,r.to)}function xl(g,e,v,y){if(k)Qr(g);var o=g.display,A=g.doc;we(e);var b,C,w=A.sel,t=w.ranges;if(y.addNew&&!y.extend){C=A.sel.contains(v);if(C>-1)b=t[C];else b=new io(v,v)}else{b=A.sel.primary();C=A.sel.primIndex}if(y.unit=="rectangle"){if(!y.addNew)b=new io(v,v);v=Nr(g,e,true,true);C=-1}else{var n=wl(g,v,y.unit);if(y.extend)b=No(b,n.anchor,n.head,y.extend);else b=n}if(!y.addNew){C=0;Uo(A,new ro([b],0),K);w=A.sel}else if(C==-1){C=t.length;Uo(A,oo(g,t.concat([b]),C),{scroll:false,origin:"*mouse"})}else if(t.length>1&&t[C].empty()&&y.unit=="char"&&!y.extend){Uo(A,oo(g,t.slice(0,C).concat(t.slice(C+1)),0),{scroll:false,origin:"*mouse"});w=A.sel}else Ro(A,C,b,K);var x=v;function s(e){if(ot(x,e)==0)return;x=e;if(y.unit=="rectangle"){var t=[],n=g.options.tabSize;var r=z($e(A,v.line).text,v.ch,n);var i=z($e(A,e.line).text,e.ch,n);var o=Math.min(r,i),s=Math.max(r,i);for(var l=Math.min(v.line,e.line),a=Math.min(g.lastLine(),Math.max(v.line,e.line));l<=a;l++){var u=$e(A,l).text,c=V(u,o,n);if(o==s)t.push(new io(it(l,c),it(l,c)));else if(u.length>c)t.push(new io(it(l,c),it(l,V(u,s,n))))}if(!t.length)t.push(new io(v,v));Uo(A,oo(g,w.ranges.slice(0,C).concat(t),C),{origin:"*mouse",scroll:false});g.scrollIntoView(e)}else{var f=b;var p=wl(g,e,y.unit);var h=f.anchor,d;if(ot(p.anchor,h)>0){d=p.head;h=ut(f.from(),p.anchor)}else{d=p.anchor;h=at(f.to(),p.head)}var m=w.ranges.slice(0);m[C]=kl(g,new io(ft(A,h),d));Uo(A,oo(g,m,C),K)}}var l=o.wrapper.getBoundingClientRect();var a=0;function u(e){var t=++a;var n=Nr(g,e,true,y.unit=="rectangle");if(!n)return;if(ot(n,x)!=0){g.curOp.focus=F();s(n);var r=ei(o,A);if(n.line>=r.to||n.line<r.from)setTimeout(Oi(g,function(){if(a==t)u(e)}),150)}else{var i=e.clientY<l.top?-20:e.clientY>l.bottom?20:0;if(i)setTimeout(Oi(g,function(){if(a!=t)return;o.scroller.scrollTop+=i;u(e)}),50)}}function r(e){g.state.selectingText=false;a=Infinity;if(e){we(e);o.input.focus()}ge(o.wrapper.ownerDocument,"mousemove",i);ge(o.wrapper.ownerDocument,"mouseup",c);A.history.lastSelOrigin=null}var i=Oi(g,function(e){if(e.buttons===0||!Me(e))r(e);else u(e)});var c=Oi(g,r);g.state.selectingText=c;de(o.wrapper.ownerDocument,"mousemove",i);de(o.wrapper.ownerDocument,"mouseup",c)}function kl(e,t){var n=t.anchor;var r=t.head;var i=$e(e.doc,n.line);if(ot(n,r)==0&&n.sticky==r.sticky)return t;var o=pe(i);if(!o)return t;var s=ce(o,n.ch,n.sticky),l=o[s];if(l.from!=n.ch&&l.to!=n.ch)return t;var a=s+(l.from==n.ch==(l.level!=1)?0:1);if(a==0||a==o.length)return t;var u;if(r.line!=n.line)u=(r.line-n.line)*(e.doc.direction=="ltr"?1:-1)>0;else{var c=ce(o,r.ch,r.sticky);var f=c-s||(r.ch-n.ch)*(l.level==1?-1:1);if(c==a-1||c==a)u=f<0;else u=f>0}var p=o[a+(u?-1:0)];var h=u==(p.level==1);var d=h?p.from:p.to,m=h?"after":"before";return n.ch==d&&n.sticky==m?t:new io(new it(n.line,d,m),r)}function Sl(e,t,n,r){var i,o;if(t.touches){i=t.touches[0].clientX;o=t.touches[0].clientY}else try{i=t.clientX;o=t.clientY}catch(e){return false}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return false;if(r)we(t);var s=e.display;var l=s.lineDiv.getBoundingClientRect();if(o>l.bottom||!be(e,n))return ke(t);o-=l.top-s.viewOffset;for(var a=0;a<e.display.gutterSpecs.length;++a){var u=s.gutters.childNodes[a];if(u&&u.getBoundingClientRect().right>=i){var c=tt(e.doc,o);var f=e.display.gutterSpecs[a];ve(e,n,e,c,f.className,t);return ke(t)}}}function El(e,t){return Sl(e,t,"gutterClick",true)}function Ml(e,t){if(qn(e.display,t)||Tl(e,t))return;if(ye(e,t,"contextmenu"))return;if(!w)e.display.input.onContextMenu(t)}function Tl(e,t){if(!be(e,"gutterContextMenu"))return false;return Sl(e,t,"gutterContextMenu",false)}function Bl(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-");fr(e)}hl.prototype.compare=function(e,t,n){return this.time+pl>e&&ot(t,this.pos)==0&&n==this.button};var Ll={toString:function(){return"CodeMirror.Init"}},Ol={},Fl={};function Dl(i){var o=i.optionHandlers;function e(e,t,r,n){i.defaults[e]=t;if(r)o[e]=n?function(e,t,n){if(n!=Ll)r(e,t,n)}:r}i.defineOption=e;i.Init=Ll;e("value","",function(e,t){return e.setValue(t)},true);e("mode",null,function(e,t){e.doc.modeOption=t;po(e)},true);e("indentUnit",2,po,true);e("indentWithTabs",false);e("smartIndent",true);e("tabSize",4,function(e){ho(e);fr(e);Wr(e)},true);e("lineSeparator",null,function(e,r){e.doc.lineSep=r;if(!r)return;var i=[],o=e.doc.first;e.doc.iter(function(e){for(var t=0;;){var n=e.text.indexOf(r,t);if(n==-1)break;t=n+r.length;i.push(it(o,n))}o++});for(var t=i.length-1;t>=0;t--)rs(e.doc,r,i[t],it(i[t].line,i[t].ch+r.length))});e("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200c\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g");if(n!=Ll)e.refresh()});e("specialCharPlaceholder",mn,function(e){return e.refresh()},true);e("electricChars",true);e("inputStyle",p?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},true);e("spellcheck",false,function(e,t){return e.getInputField().spellcheck=t},true);e("autocorrect",false,function(e,t){return e.getInputField().autocorrect=t},true);e("autocapitalize",false,function(e,t){return e.getInputField().autocapitalize=t},true);e("rtlMoveVisually",!d);e("wholeLineUpdateBefore",true);e("theme","default",function(e){Bl(e);$i(e)},true);e("keyMap","default",function(e,t,n){var r=Ks(t);var i=n!=Ll&&Ks(n);if(i&&i.detach)i.detach(e,r);if(r.attach)r.attach(e,i||null)});e("extraKeys",null);e("configureMouse",null);e("lineWrapping",false,Pl,true);e("gutters",[],function(e,t){e.display.gutterSpecs=Xi(t,e.options.lineNumbers);$i(e)},true);e("fixedGutter",true,function(e,t){e.display.gutters.style.left=t?Or(e.display)+"px":"0";e.refresh()},true);e("coverGutterNextToScrollbar",false,function(e){return vi(e)},true);e("scrollbarStyle","native",function(e){bi(e);vi(e);e.display.scrollbars.setScrollTop(e.doc.scrollTop);e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},true);e("lineNumbers",false,function(e,t){e.display.gutterSpecs=Xi(e.options.gutters,t);$i(e)},true);e("firstLineNumber",1,$i,true);e("lineNumberFormatter",function(e){return e},$i,true);e("showCursorWhenSelecting",false,jr,true);e("resetSelectionOnContextMenu",true);e("lineWiseCopyCut",true);e("pasteLinesPerSelection",true);e("selectionsMayTouch",false);e("readOnly",false,function(e,t){if(t=="nocursor"){Yr(e);e.display.input.blur()}e.display.input.readOnlyChanged(t)});e("screenReaderLabel",null,function(e,t){t=t===""?null:t;e.display.input.screenReaderLabelChanged(t)});e("disableInput",false,function(e,t){if(!t)e.display.input.reset()},true);e("dragDrop",true,Nl);e("allowDropFileTypes",null);e("cursorBlinkRate",530);e("cursorScrollMargin",0);e("cursorHeight",1,jr,true);e("singleCursorHeightPerLine",true,jr,true);e("workTime",100);e("workDelay",100);e("flattenSpans",true,ho,true);e("addModeClass",false,ho,true);e("pollInterval",100);e("undoDepth",200,function(e,t){return e.doc.history.undoDepth=t});e("historyEventDelay",1250);e("viewportMargin",10,function(e){return e.refresh()},true);e("maxHighlightLength",1e4,ho,true);e("moveInputWithCursor",true,function(e,t){if(!t)e.display.input.resetPosition()});e("tabindex",null,function(e,t){return e.display.input.getField().tabIndex=t||""});e("autofocus",null);e("direction","ltr",function(e,t){return e.doc.setDirection(t)},true);e("phrases",null)}function Nl(e,t,n){var r=n&&n!=Ll;if(!t!=!r){var i=e.display.dragFunctions;var o=t?de:ge;o(e.display.scroller,"dragstart",i.start);o(e.display.scroller,"dragenter",i.enter);o(e.display.scroller,"dragover",i.over);o(e.display.scroller,"dragleave",i.leave);o(e.display.scroller,"drop",i.drop)}}function Pl(e){if(e.options.lineWrapping){D(e.display.wrapper,"CodeMirror-wrap");e.display.sizer.style.minWidth="";e.display.sizerWidth=null}else{S(e.display.wrapper,"CodeMirror-wrap");ln(e)}Dr(e);Wr(e);fr(e);setTimeout(function(){return vi(e)},100)}function Wl(e,t){var n=this;if(!(this instanceof Wl))return new Wl(e,t);this.options=t=t?R(t):{};R(Ol,t,false);var r=t.value;if(typeof r=="string")r=new ws(r,t.mode,null,t.lineSeparator,t.direction);else if(t.mode)r.modeOption=t.mode;this.doc=r;var i=new Wl.inputStyles[t.inputStyle](this);var o=this.display=new Yi(e,r,i,t);o.wrapper.CodeMirror=this;Bl(this);if(t.lineWrapping)this.display.wrapper.className+=" CodeMirror-wrap";bi(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,delayingBlurEvent:false,focused:false,suppressEdits:false,pasteIncoming:-1,cutIncoming:-1,selectingText:false,draggingText:false,highlight:new H,keySeq:null,specialChars:null};if(t.autofocus&&!p)o.input.focus();if(k&&C<11)setTimeout(function(){return n.display.input.reset(true)},20);Rl(this);Ls();wi(this);this.curOp.forceUpdate=true;yo(this,r);if(t.autofocus&&!p||this.hasFocus())setTimeout(function(){if(n.hasFocus()&&!n.state.focused)$r(n)},20);else Yr(this);for(var s in Fl)if(Fl.hasOwnProperty(s))Fl[s](this,t[s],Ll);Gi(this);if(t.finishInit)t.finishInit(this);for(var l=0;l<zl.length;++l)zl[l](this);xi(this);if(g&&t.lineWrapping&&getComputedStyle(o.lineDiv).textRendering=="optimizelegibility")o.lineDiv.style.textRendering="auto"}function Rl(i){var o=i.display;de(o.scroller,"mousedown",Oi(i,vl));if(k&&C<11)de(o.scroller,"dblclick",Oi(i,function(e){if(ye(i,e))return;var t=Nr(i,e);if(!t||El(i,e)||qn(i.display,e))return;we(e);var n=i.findWordAt(t);Po(i.doc,n.anchor,n.head)}));else de(o.scroller,"dblclick",function(e){return ye(i,e)||we(e)});de(o.scroller,"contextmenu",function(e){return Ml(i,e)});de(o.input.getField(),"contextmenu",function(e){if(!o.scroller.contains(e.target))Ml(i,e)});var n,r={end:0};function s(){if(o.activeTouch){n=setTimeout(function(){return o.activeTouch=null},1e3);r=o.activeTouch;r.end=+new Date}}function l(e){if(e.touches.length!=1)return false;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function a(e,t){if(t.left==null)return true;var n=t.left-e.left,r=t.top-e.top;return n*n+r*r>20*20}de(o.scroller,"touchstart",function(e){if(!ye(i,e)&&!l(e)&&!El(i,e)){o.input.ensurePolled();clearTimeout(n);var t=+new Date;o.activeTouch={start:t,moved:false,prev:t-r.end<=300?r:null};if(e.touches.length==1){o.activeTouch.left=e.touches[0].pageX;o.activeTouch.top=e.touches[0].pageY}}});de(o.scroller,"touchmove",function(){if(o.activeTouch)o.activeTouch.moved=true});de(o.scroller,"touchend",function(e){var t=o.activeTouch;if(t&&!qn(o,e)&&t.left!=null&&!t.moved&&new Date-t.start<300){var n=i.coordsChar(o.activeTouch,"page"),r;if(!t.prev||a(t,t.prev))r=new io(n,n);else if(!t.prev.prev||a(t,t.prev.prev))r=i.findWordAt(n);else r=new io(it(n.line,0),ft(i.doc,it(n.line+1,0)));i.setSelection(r.anchor,r.head);i.focus();we(e)}s()});de(o.scroller,"touchcancel",s);de(o.scroller,"scroll",function(){if(o.scroller.clientHeight){fi(i,o.scroller.scrollTop);hi(i,o.scroller.scrollLeft,true);ve(i,"scroll",i)}});de(o.scroller,"mousewheel",function(e){return no(i,e)});de(o.scroller,"DOMMouseScroll",function(e){return no(i,e)});de(o.wrapper,"scroll",function(){return o.wrapper.scrollTop=o.wrapper.scrollLeft=0});o.dragFunctions={enter:function(e){if(!ye(i,e))Se(e)},over:function(e){if(!ye(i,e)){Es(i,e);Se(e)}},start:function(e){return Ss(i,e)},drop:Oi(i,ks),leave:function(e){if(!ye(i,e))Ms(i)}};var e=o.input.getField();de(e,"keyup",function(e){return cl.call(i,e)});de(e,"keydown",Oi(i,al));de(e,"keypress",Oi(i,fl));de(e,"focus",function(e){return $r(i,e)});de(e,"blur",function(e){return Yr(i,e)})}Wl.defaults=Ol,Wl.optionHandlers=Fl;var zl=[];function Hl(e,t,n,r){var i=e.doc,o;if(n==null)n="add";if(n=="smart")if(!i.mode.indent)n="prev";else o=yt(e,t).state;var s=e.options.tabSize;var l=$e(i,t),a=z(l.text,null,s);if(l.stateAfter)l.stateAfter=null;var u=l.text.match(/^\s*/)[0],c;if(!r&&!/\S/.test(l.text)){c=0;n="not"}else if(n=="smart"){c=i.mode.indent(o,l.text.slice(u.length),l.text);if(c==j||c>150){if(!r)return;n="prev"}}if(n=="prev")if(t>i.first)c=z($e(i,t-1).text,null,s);else c=0;else if(n=="add")c=a+e.options.indentUnit;else if(n=="subtract")c=a-e.options.indentUnit;else if(typeof n=="number")c=a+n;c=Math.max(0,c);var f="",p=0;if(e.options.indentWithTabs)for(var h=Math.floor(c/s);h;--h){p+=s;f+="\t"}if(p<c)f+=X(c-p);if(f!=u){rs(i,f,it(t,0),it(t,u.length),"+input");l.stateAfter=null;return true}else for(var d=0;d<i.sel.ranges.length;d++){var m=i.sel.ranges[d];if(m.head.line==t&&m.head.ch<u.length){var g=it(t,u.length);Ro(i,d,new io(g,g));break}}}Wl.defineInitHook=function(e){return zl.push(e)};var Il=null;function Ul(e){Il=e}function jl(e,t,n,r,i){var o=e.doc;e.display.shift=false;if(!r)r=o.sel;var s=+new Date-200;var l=i=="paste"||e.state.pasteIncoming>s;var a=De(t),u=null;if(l&&r.ranges.length>1)if(Il&&Il.text.join("\n")==t){if(r.ranges.length%Il.text.length==0){u=[];for(var c=0;c<Il.text.length;c++)u.push(o.splitLines(Il.text[c]))}}else if(a.length==r.ranges.length&&e.options.pasteLinesPerSelection)u=$(a,function(e){return[e]});var f=e.curOp.updateInput;for(var p=r.ranges.length-1;p>=0;p--){var h=r.ranges[p];var d=h.from(),m=h.to();if(h.empty())if(n&&n>0)d=it(d.line,d.ch-n);else if(e.state.overwrite&&!l)m=it(m.line,Math.min($e(o,m.line).text.length,m.ch+Q(a).length));else if(l&&Il&&Il.lineWise&&Il.text.join("\n")==a.join("\n"))d=m=it(d.line,0);var g={from:d,to:m,text:u?u[p%u.length]:a,origin:i||(l?"paste":e.state.cutIncoming>s?"cut":"+input")};Yo(e.doc,g);Tn(e,"inputRead",e,g)}if(t&&!l)Kl(e,t);si(e);if(e.curOp.updateInput<2)e.curOp.updateInput=f;e.curOp.typing=true;e.state.pasteIncoming=e.state.cutIncoming=-1}function ql(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n){e.preventDefault();if(!t.isReadOnly()&&!t.options.disableInput)Li(t,function(){return jl(t,n,0,null,"paste")});return true}}function Kl(e,t){if(!e.options.electricChars||!e.options.smartIndent)return;var n=e.doc.sel;for(var r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)continue;var o=e.getModeAt(i.head);var s=false;if(o.electricChars){for(var l=0;l<o.electricChars.length;l++)if(t.indexOf(o.electricChars.charAt(l))>-1){s=Hl(e,i.head.line,"smart");break}}else if(o.electricInput)if(o.electricInput.test($e(e.doc,i.head.line).text.slice(0,i.head.ch)))s=Hl(e,i.head.line,"smart");if(s)Tn(e,"electricInput",e,i.head.line)}}function _l(e){var t=[],n=[];for(var r=0;r<e.doc.sel.ranges.length;r++){var i=e.doc.sel.ranges[r].head.line;var o={anchor:it(i,0),head:it(i+1,0)};n.push(o);t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:n}}function Vl(e,t,n,r){e.setAttribute("autocorrect",n?"":"off");e.setAttribute("autocapitalize",r?"":"off");e.setAttribute("spellcheck",!!t)}function Gl(){var e=O("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none");var t=O("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");if(g)e.style.width="1000px";else e.setAttribute("wrap","off");if(u)e.style.border="1px solid black";Vl(e);return t}function Xl(i){var o=i.optionHandlers;var u=i.helpers={};i.prototype={constructor:i,focus:function(){window.focus();this.display.input.focus()},setOption:function(e,t){var n=this.options,r=n[e];if(n[e]==t&&e!="mode")return;n[e]=t;if(o.hasOwnProperty(e))Oi(this,o[e])(this,t,r);ve(this,"optionChange",this,e)},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Ks(e))},removeKeyMap:function(e){var t=this.state.keyMaps;for(var n=0;n<t.length;++n)if(t[n]==e||t[n].name==e){t.splice(n,1);return true}},addOverlay:Fi(function(e,t){var n=e.token?e:i.getMode(this.options,e);if(n.startState)throw new Error("Overlays may not be stateful.");Y(this.state.overlays,{mode:n,modeSpec:e,opaque:t&&t.opaque,priority:t&&t.priority||0},function(e){return e.priority});this.state.modeGen++;Wr(this)}),removeOverlay:Fi(function(e){var t=this.state.overlays;for(var n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||typeof e=="string"&&r.name==e){t.splice(n,1);this.state.modeGen++;Wr(this);return}}}),indentLine:Fi(function(e,t,n){if(typeof t!="string"&&typeof t!="number")if(t==null)t=this.options.smartIndent?"smart":"prev";else t=t?"add":"subtract";if(nt(this.doc,e))Hl(this,e,t,n)}),indentSelection:Fi(function(e){var t=this.doc.sel.ranges,n=-1;for(var r=0;r<t.length;r++){var i=t[r];if(!i.empty()){var o=i.from(),s=i.to();var l=Math.max(n,o.line);n=Math.min(this.lastLine(),s.line-(s.ch?0:1))+1;for(var a=l;a<n;++a)Hl(this,a,e);var u=this.doc.sel.ranges;if(o.ch==0&&t.length==u.length&&u[r].from().ch>0)Ro(this.doc,r,new io(o,u[r].to()),q)}else if(i.head.line>n){Hl(this,i.head.line,e,true);n=i.head.line;if(r==this.doc.sel.primIndex)si(this)}}}),getTokenAt:function(e,t){return xt(this,e,t)},getLineTokens:function(e,t){return xt(this,it(e),t,true)},getTokenTypeAt:function(e){e=ft(this.doc,e);var t=vt(this,$e(this.doc,e.line));var n=0,r=(t.length-1)/2,i=e.ch;var o;if(i==0)o=t[2];else for(;;){var s=n+r>>1;if((s?t[s*2-1]:0)>=i)r=s;else if(t[s*2+1]<i)n=s+1;else{o=t[s*2+2];break}}var l=o?o.indexOf("overlay "):-1;return l<0?o:l==0?null:o.slice(0,l-1)},getModeAt:function(e){var t=this.doc.mode;if(!t.innerMode)return t;return i.innerMode(t,this.getTokenAt(e).state).mode},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var n=[];if(!u.hasOwnProperty(t))return n;var r=u[t],i=this.getModeAt(e);if(typeof i[t]=="string"){if(r[i[t]])n.push(r[i[t]])}else if(i[t])for(var o=0;o<i[t].length;o++){var s=r[i[t][o]];if(s)n.push(s)}else if(i.helperType&&r[i.helperType])n.push(r[i.helperType]);else if(r[i.name])n.push(r[i.name]);for(var l=0;l<r._global.length;l++){var a=r._global[l];if(a.pred(i,this)&&I(n,a.val)==-1)n.push(a.val)}return n},getStateAfter:function(e,t){var n=this.doc;e=ct(n,e==null?n.first+n.size-1:e);return yt(this,e+1,t).state},cursorCoords:function(e,t){var n,r=this.doc.sel.primary();if(e==null)n=r.head;else if(typeof e=="object")n=ft(this.doc,e);else n=e?r.from():r.to();return yr(this,n,t||"page")},charCoords:function(e,t){return vr(this,ft(this.doc,e),t||"page")},coordsChar:function(e,t){e=gr(this,e,t||"page");return Cr(this,e.left,e.top)},lineAtHeight:function(e,t){e=gr(this,{top:e,left:0},t||"page").top;return tt(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var r=false,i;if(typeof e=="number"){var o=this.doc.first+this.doc.size-1;if(e<this.doc.first)e=this.doc.first;else if(e>o){e=o;r=true}i=$e(this.doc,e)}else i=e;return mr(this,i,{top:0,left:0},t||"page",n||r).top+(r?this.doc.height-on(i):0)},defaultTextHeight:function(){return Tr(this.display)},defaultCharWidth:function(){return Br(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){var o=this.display;e=yr(this,ft(this.doc,e));var s=e.bottom,l=e.left;t.style.position="absolute";t.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(t);o.sizer.appendChild(t);if(r=="over")s=e.top;else if(r=="above"||r=="near"){var a=Math.max(o.wrapper.clientHeight,this.doc.height),u=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);if((r=="above"||e.bottom+t.offsetHeight>a)&&e.top>t.offsetHeight)s=e.top-t.offsetHeight;else if(e.bottom+t.offsetHeight<=a)s=e.bottom;if(l+t.offsetWidth>u)l=u-t.offsetWidth}t.style.top=s+"px";t.style.left=t.style.right="";if(i=="right"){l=o.sizer.clientWidth-t.offsetWidth;t.style.right="0px"}else{if(i=="left")l=0;else if(i=="middle")l=(o.sizer.clientWidth-t.offsetWidth)/2;t.style.left=l+"px"}if(n)ri(this,{left:l,top:s,right:l+t.offsetWidth,bottom:s+t.offsetHeight})},triggerOnKeyDown:Fi(al),triggerOnKeyPress:Fi(fl),triggerOnKeyUp:cl,triggerOnMouseDown:Fi(vl),execCommand:function(e){if($s.hasOwnProperty(e))return $s[e].call(null,this)},triggerElectric:Fi(function(e){Kl(this,e)}),findPosH:function(e,t,n,r){var i=1;if(t<0){i=-1;t=-t}var o=ft(this.doc,e);for(var s=0;s<t;++s){o=Ql(this.doc,o,i,n,r);if(o.hitSide)break}return o},moveH:Fi(function(t,n){var r=this;this.extendSelectionsBy(function(e){if(r.display.shift||r.doc.extend||e.empty())return Ql(r.doc,e.head,t,n,r.options.rtlMoveVisually);else return t<0?e.from():e.to()},_)}),deleteH:Fi(function(n,r){var e=this.doc.sel,i=this.doc;if(e.somethingSelected())i.replaceSelection("",null,"+delete");else _s(this,function(e){var t=Ql(i,e.head,n,r,false);return n<0?{from:t,to:e.head}:{from:e.head,to:t}})}),findPosV:function(e,t,n,r){var i=1,o=r;if(t<0){i=-1;t=-t}var s=ft(this.doc,e);for(var l=0;l<t;++l){var a=yr(this,s,"div");if(o==null)o=a.left;else a.left=o;s=$l(this,a,i,n);if(s.hitSide)break}return s},moveV:Fi(function(r,i){var o=this;var s=this.doc,l=[];var a=!this.display.shift&&!s.extend&&s.sel.somethingSelected();s.extendSelectionsBy(function(e){if(a)return r<0?e.from():e.to();var t=yr(o,e.head,"div");if(e.goalColumn!=null)t.left=e.goalColumn;l.push(t.left);var n=$l(o,t,r,i);if(i=="page"&&e==s.sel.primary())oi(o,vr(o,n,"div").top-t.top);return n},_);if(l.length)for(var e=0;e<s.sel.ranges.length;e++)s.sel.ranges[e].goalColumn=l[e]}),findWordAt:function(e){var t=this.doc,n=$e(t,e.line).text;var r=e.ch,i=e.ch;if(n){var o=this.getHelper(e,"wordChars");if((e.sticky=="before"||i==n.length)&&r)--r;else++i;var s=n.charAt(r);var l=ne(s,o)?function(e){return ne(e,o)}:/\s/.test(s)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!ne(e)};while(r>0&&l(n.charAt(r-1)))--r;while(i<n.length&&l(n.charAt(i)))++i}return new io(it(e.line,r),it(e.line,i))},toggleOverwrite:function(e){if(e!=null&&e==this.state.overwrite)return;if(this.state.overwrite=!this.state.overwrite)D(this.display.cursorDiv,"CodeMirror-overwrite");else S(this.display.cursorDiv,"CodeMirror-overwrite");ve(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==F()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Fi(function(e,t){li(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Gn(this)-this.display.barHeight,width:e.scrollWidth-Gn(this)-this.display.barWidth,clientHeight:Qn(this),clientWidth:Xn(this)}},scrollIntoView:Fi(function(e,t){if(e==null){e={from:this.doc.sel.primary().head,to:null};if(t==null)t=this.options.cursorScrollMargin}else if(typeof e=="number")e={from:it(e,0),to:null};else if(e.from==null)e={from:e,to:null};if(!e.to)e.to=e.from;e.margin=t||0;if(e.from.line!=null)ai(this,e);else ci(this,e.from,e.to,e.margin)}),setSize:Fi(function(e,t){var n=this;var r=function(e){return typeof e=="number"||/^\d+$/.test(String(e))?e+"px":e};if(e!=null)this.display.wrapper.style.width=r(e);if(t!=null)this.display.wrapper.style.height=r(t);if(this.options.lineWrapping)cr(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Rr(n,i,"widget");break}++i});this.curOp.forceUpdate=true;ve(this,"refresh",this)}),operation:function(e){return Li(this,e)},startOperation:function(){return wi(this)},endOperation:function(){return xi(this)},refresh:Fi(function(){var e=this.display.cachedTextHeight;Wr(this);this.curOp.forceUpdate=true;fr(this);li(this,this.doc.scrollLeft,this.doc.scrollTop);Ki(this.display);if(e==null||Math.abs(e-Tr(this.display))>.5||this.options.lineWrapping)Dr(this);ve(this,"refresh",this)}),swapDoc:Fi(function(e){var t=this.doc;t.cm=null;if(this.state.selectingText)this.state.selectingText();yo(this,e);fr(this);this.display.input.reset();li(this,e.scrollLeft,e.scrollTop);this.curOp.forceScroll=true;Tn(this,"swapDoc",this,t);return t}),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};Ce(i);i.registerHelper=function(e,t,n){if(!u.hasOwnProperty(e))u[e]=i[e]={_global:[]};u[e][t]=n};i.registerGlobalHelper=function(e,t,n,r){i.registerHelper(e,t,r);u[e]._global.push({pred:n,val:r})}}function Ql(r,i,o,s,l){var e=i;var t=o;var a=$e(r,i.line);var u=l&&r.direction=="rtl"?-o:o;function c(){var e=i.line+u;if(e<r.first||e>=r.first+r.size)return false;i=new it(e,i.ch,i.sticky);return a=$e(r,e)}function n(e){var t;if(s=="codepoint"){var n=a.text.charCodeAt(i.ch+(s>0?0:-1));if(isNaN(n))t=null;else t=new it(i.line,Math.max(0,Math.min(a.text.length,i.ch+o*(n>=55296&&n<56320?2:1))),-o)}else if(l)t=Qs(r.cm,a,i,o);else t=Gs(a,i,o);if(t==null)if(!e&&c())i=Xs(l,r.cm,a,i.line,u);else return false;else i=t;return true}if(s=="char"||s=="codepoint")n();else if(s=="column")n(true);else if(s=="word"||s=="group"){var f=null,p=s=="group";var h=r.cm&&r.cm.getHelper(i,"wordChars");for(var d=true;;d=false){if(o<0&&!n(!d))break;var m=a.text.charAt(i.ch)||"\n";var g=ne(m,h)?"w":p&&m=="\n"?"n":!p||/\s/.test(m)?null:"p";if(p&&!d&&!g)g="s";if(f&&f!=g){if(o<0){o=1;n();i.sticky="after"}break}if(g)f=g;if(o>0&&!n(!d))break}}var v=Go(r,i,e,t,true);if(st(e,v))v.hitSide=true;return v}function $l(e,t,n,r){var i=e.doc,o=t.left,s;if(r=="page"){var l=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);var a=Math.max(l-.5*Tr(e.display),3);s=(n>0?t.bottom:t.top)+n*a}else if(r=="line")s=n>0?t.bottom+3:t.top-3;var u;for(;;){u=Cr(e,o,s);if(!u.outside)break;if(n<0?s<=0:s>=i.height){u.hitSide=true;break}s+=n*5}return u}var Yl=function(e){this.cm=e;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new H;this.composing=null;this.gracePeriod=false;this.readDOMTimeout=null};function Zl(e,t){var n=er(e,t.line);if(!n||n.hidden)return null;var r=$e(e.doc,t.line);var i=Yn(n,r,t.line);var o=pe(r,e.doc.direction),s="left";if(o){var l=ce(o,t.ch);s=l%2?"right":"left"}var a=or(i.map,t.ch,s);a.offset=a.collapse=="right"?a.end:a.start;return a}function Jl(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return true;return false}function ea(e,t){if(t)e.bad=true;return e}function ta(l,e,t,a,u){var n="",c=false,f=l.doc.lineSeparator(),p=false;function h(t){return function(e){return e.id==t}}function d(){if(c){n+=f;if(p)n+=f;c=p=false}}function m(e){if(e){d();n+=e}}function g(e){if(e.nodeType==1){var t=e.getAttribute("cm-text");if(t){m(t);return}var n=e.getAttribute("cm-marker"),r;if(n){var i=l.findMarks(it(a,0),it(u+1,0),h(+n));if(i.length&&(r=i[0].find(0)))m(Ye(l.doc,r.from,r.to).join(f));return}if(e.getAttribute("contenteditable")=="false")return;var o=/^(pre|div|p|li|table|br)$/i.test(e.nodeName);if(!/^br$/i.test(e.nodeName)&&e.textContent.length==0)return;if(o)d();for(var s=0;s<e.childNodes.length;s++)g(e.childNodes[s]);if(/^(pre|p)$/i.test(e.nodeName))p=true;if(o)c=true}else if(e.nodeType==3)m(e.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;;){g(e);if(e==t)break;e=e.nextSibling;p=false}return n}function na(e,t,n){var r;if(t==e.display.lineDiv){r=e.display.lineDiv.childNodes[n];if(!r)return ea(e.clipPos(it(e.display.viewTo-1)),true);t=null;n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var o=e.display.view[i];if(o.node==r)return ra(o,t,n)}}function ra(u,e,t){var n=u.text.firstChild,r=false;if(!e||!L(n,e))return ea(it(et(u.line),0),true);if(e==n){r=true;e=n.childNodes[t];t=0;if(!e){var i=u.rest?Q(u.rest):u.line;return ea(it(et(i),i.text.length),r)}}var o=e.nodeType==3?e:null,s=e;if(!o&&e.childNodes.length==1&&e.firstChild.nodeType==3){o=e.firstChild;if(t)t=o.nodeValue.length}while(s.parentNode!=n)s=s.parentNode;var c=u.measure,f=c.maps;function l(e,t,n){for(var r=-1;r<(f?f.length:0);r++){var i=r<0?c.map:f[r];for(var o=0;o<i.length;o+=3){var s=i[o+2];if(s==e||s==t){var l=et(r<0?u.line:u.rest[r]);var a=i[o]+n;if(n<0||s!=e)a=i[o+(n?1:0)];return it(l,a)}}}}var a=l(o,s,t);if(a)return ea(a,r);for(var p=s.nextSibling,h=o?o.nodeValue.length-t:0;p;p=p.nextSibling){a=l(p,p.firstChild,0);if(a)return ea(it(a.line,a.ch-h),r);else h+=p.textContent.length}for(var d=s.previousSibling,m=t;d;d=d.previousSibling){a=l(d,d.firstChild,-1);if(a)return ea(it(a.line,a.ch+m),r);else m+=d.textContent.length}}Yl.prototype.init=function(e){var t=this;var s=this,l=s.cm;var a=s.div=e.lineDiv;Vl(a,l.options.spellcheck,l.options.autocorrect,l.options.autocapitalize);function u(e){for(var t=e.target;t;t=t.parentNode){if(t==a)return true;if(/\bCodeMirror-(?:line)?widget\b/.test(t.className))break}return false}de(a,"paste",function(e){if(!u(e)||ye(l,e)||ql(e,l))return;if(C<=11)setTimeout(Oi(l,function(){return t.updateFromDOM()}),20)});de(a,"compositionstart",function(e){t.composing={data:e.data,done:false}});de(a,"compositionupdate",function(e){if(!t.composing)t.composing={data:e.data,done:false}});de(a,"compositionend",function(e){if(t.composing){if(e.data!=t.composing.data)t.readFromDOMSoon();t.composing.done=true}});de(a,"touchstart",function(){return s.forceCompositionEnd()});de(a,"input",function(){if(!t.composing)t.readFromDOMSoon()});function n(e){if(!u(e)||ye(l,e))return;if(l.somethingSelected()){Ul({lineWise:false,text:l.getSelections()});if(e.type=="cut")l.replaceSelection("",null,"cut")}else if(!l.options.lineWiseCopyCut)return;else{var t=_l(l);Ul({lineWise:true,text:t.text});if(e.type=="cut")l.operation(function(){l.setSelections(t.ranges,0,q);l.replaceSelection("",null,"cut")})}if(e.clipboardData){e.clipboardData.clearData();var n=Il.text.join("\n");e.clipboardData.setData("Text",n);if(e.clipboardData.getData("Text")==n){e.preventDefault();return}}var r=Gl(),i=r.firstChild;l.display.lineSpace.insertBefore(r,l.display.lineSpace.firstChild);i.value=Il.text.join("\n");var o=document.activeElement;P(i);setTimeout(function(){l.display.lineSpace.removeChild(r);o.focus();if(o==a)s.showPrimarySelection()},50)}de(a,"copy",n);de(a,"cut",n)},Yl.prototype.screenReaderLabelChanged=function(e){if(e)this.div.setAttribute("aria-label",e);else this.div.removeAttribute("aria-label")},Yl.prototype.prepareSelection=function(){var e=qr(this.cm,false);e.focus=document.activeElement==this.div;return e},Yl.prototype.showSelection=function(e,t){if(!e||!this.cm.display.view.length)return;if(e.focus||t)this.showPrimarySelection();this.showMultipleSelections(e)},Yl.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Yl.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,n=t.doc.sel.primary();var r=n.from(),i=n.to();if(t.display.viewTo==t.display.viewFrom||r.line>=t.display.viewTo||i.line<t.display.viewFrom){e.removeAllRanges();return}var o=na(t,e.anchorNode,e.anchorOffset);var s=na(t,e.focusNode,e.focusOffset);if(o&&!o.bad&&s&&!s.bad&&ot(ut(o,s),r)==0&&ot(at(o,s),i)==0)return;var l=t.display.view;var a=r.line>=t.display.viewFrom&&Zl(t,r)||{node:l[0].measure.map[2],offset:0};var u=i.line<t.display.viewTo&&Zl(t,i);if(!u){var c=l[l.length-1].measure;var f=c.maps?c.maps[c.maps.length-1]:c.map;u={node:f[f.length-1],offset:f[f.length-2]-f[f.length-3]}}if(!a||!u){e.removeAllRanges();return}var p=e.rangeCount&&e.getRangeAt(0),h;try{h=E(a.node,a.offset,u.offset,u.node)}catch(e){}if(h){if(!m&&t.state.focused){e.collapse(a.node,a.offset);if(!h.collapsed){e.removeAllRanges();e.addRange(h)}}else{e.removeAllRanges();e.addRange(h)}if(p&&e.anchorNode==null)e.addRange(p);else if(m)this.startGracePeriod()}this.rememberSelection()},Yl.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){e.gracePeriod=false;if(e.selectionChanged())e.cm.operation(function(){return e.cm.curOp.selectionChanged=true})},20)},Yl.prototype.showMultipleSelections=function(e){T(this.cm.display.cursorDiv,e.cursors);T(this.cm.display.selectionDiv,e.selection)},Yl.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode;this.lastAnchorOffset=e.anchorOffset;this.lastFocusNode=e.focusNode;this.lastFocusOffset=e.focusOffset},Yl.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return false;var t=e.getRangeAt(0).commonAncestorContainer;return L(this.div,t)},Yl.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"){if(!this.selectionInEditor()||document.activeElement!=this.div)this.showSelection(this.prepareSelection(),true);this.div.focus()}},Yl.prototype.blur=function(){this.div.blur()},Yl.prototype.getField=function(){return this.div},Yl.prototype.supportsTouch=function(){return true},Yl.prototype.receivedFocus=function(){var e=this;if(this.selectionInEditor())this.pollSelection();else Li(this.cm,function(){return e.cm.curOp.selectionChanged=true});function t(){if(e.cm.state.focused){e.pollSelection();e.polling.set(e.cm.options.pollInterval,t)}}this.polling.set(this.cm.options.pollInterval,t)},Yl.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Yl.prototype.pollSelection=function(){if(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())return;var e=this.getSelection(),t=this.cm;if(f&&s&&this.cm.display.gutterSpecs.length&&Jl(e.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs});this.blur();this.focus();return}if(this.composing)return;this.rememberSelection();var n=na(t,e.anchorNode,e.anchorOffset);var r=na(t,e.focusNode,e.focusOffset);if(n&&r)Li(t,function(){Uo(t.doc,so(n,r),q);if(n.bad||r.bad)t.curOp.selectionChanged=true})},Yl.prototype.pollContent=function(){if(this.readDOMTimeout!=null){clearTimeout(this.readDOMTimeout);this.readDOMTimeout=null}var e=this.cm,t=e.display,n=e.doc.sel.primary();var r=n.from(),i=n.to();if(r.ch==0&&r.line>e.firstLine())r=it(r.line-1,$e(e.doc,r.line-1).length);if(i.ch==$e(e.doc,i.line).text.length&&i.line<e.lastLine())i=it(i.line+1,0);if(r.line<t.viewFrom||i.line>t.viewTo-1)return false;var o,s,l;if(r.line==t.viewFrom||(o=Pr(e,r.line))==0){s=et(t.view[0].line);l=t.view[0].node}else{s=et(t.view[o].line);l=t.view[o-1].node.nextSibling}var a=Pr(e,i.line);var u,c;if(a==t.view.length-1){u=t.viewTo-1;c=t.lineDiv.lastChild}else{u=et(t.view[a+1].line)-1;c=t.view[a+1].node.previousSibling}if(!l)return false;var f=e.doc.splitLines(ta(e,l,c,s,u));var p=Ye(e.doc,it(s,0),it(u,$e(e.doc,u).text.length));while(f.length>1&&p.length>1)if(Q(f)==Q(p)){f.pop();p.pop();u--}else if(f[0]==p[0]){f.shift();p.shift();s++}else break;var h=0,d=0;var m=f[0],g=p[0],v=Math.min(m.length,g.length);while(h<v&&m.charCodeAt(h)==g.charCodeAt(h))++h;var y=Q(f),A=Q(p);var b=Math.min(y.length-(f.length==1?h:0),A.length-(p.length==1?h:0));while(d<b&&y.charCodeAt(y.length-d-1)==A.charCodeAt(A.length-d-1))++d;if(f.length==1&&p.length==1&&s==r.line)while(h&&h>r.ch&&y.charCodeAt(y.length-d-1)==A.charCodeAt(A.length-d-1)){h--;d++}f[f.length-1]=y.slice(0,y.length-d).replace(/^\u200b+/,"");f[0]=f[0].slice(h).replace(/\u200b+$/,"");var C=it(s,h);var w=it(u,p.length?Q(p).length-d:0);if(f.length>1||f[0]||ot(C,w)){rs(e.doc,f,C,w,"+input");return true}},Yl.prototype.ensurePolled=function(){this.forceCompositionEnd()},Yl.prototype.reset=function(){this.forceCompositionEnd()},Yl.prototype.forceCompositionEnd=function(){if(!this.composing)return;clearTimeout(this.readDOMTimeout);this.composing=null;this.updateFromDOM();this.div.blur();this.div.focus()},Yl.prototype.readFromDOMSoon=function(){var e=this;if(this.readDOMTimeout!=null)return;this.readDOMTimeout=setTimeout(function(){e.readDOMTimeout=null;if(e.composing)if(e.composing.done)e.composing=null;else return;e.updateFromDOM()},80)},Yl.prototype.updateFromDOM=function(){var e=this;if(this.cm.isReadOnly()||!this.pollContent())Li(this.cm,function(){return Wr(e.cm)})},Yl.prototype.setUneditable=function(e){e.contentEditable="false"},Yl.prototype.onKeyPress=function(e){if(e.charCode==0||this.composing)return;e.preventDefault();if(!this.cm.isReadOnly())Oi(this.cm,jl)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0)},Yl.prototype.readOnlyChanged=function(e){this.div.contentEditable=String(e!="nocursor")},Yl.prototype.onContextMenu=function(){},Yl.prototype.resetPosition=function(){},Yl.prototype.needsContentAttribute=true;var ia=function(e){this.cm=e;this.prevInput="";this.pollingFast=false;this.polling=new H;this.hasSelection=false;this.composing=null};function oa(t,n){if((n=n?R(n):{}).value=t.value,!n.tabindex&&t.tabIndex)n.tabindex=t.tabIndex;if(!n.placeholder&&t.placeholder)n.placeholder=t.placeholder;if(null==n.autofocus){var e=F();n.autofocus=e==t||null!=t.getAttribute("autofocus")&&e==document.body}function r(){t.value=l.getValue()}var i;if(t.form)if(de(t.form,"submit",r),!n.leaveSubmitMethodAlone){var o=t.form;i=o.submit;try{var s=o.submit=function(){r(),o.submit=i,o.submit(),o.submit=s}}catch(e){}}n.finishInit=function(e){e.save=r,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,r(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(ge(t.form,"submit",r),n.leaveSubmitMethodAlone||"function"!=typeof t.form.submit||(t.form.submit=i))}},t.style.display="none";var l=Wl(function(e){return t.parentNode.insertBefore(e,t.nextSibling)},n);return l}function sa(e){e.off=ge,e.on=de,e.wheelEventPixels=to,e.Doc=ws,e.splitLines=De,e.countColumn=z,e.findColumn=V,e.isWordChar=te,e.Pass=j,e.signal=ve,e.Line=an,e.changeEnd=lo,e.scrollbarModel=Ai,e.Pos=it,e.cmpPos=ot,e.modes=ze,e.mimeModes=He,e.resolveMode=je,e.getMode=qe,e.modeExtensions=Ke,e.extendMode=_e,e.copyState=Ve,e.startState=Xe,e.innerMode=Ge,e.commands=$s,e.keyMap=Rs,e.keyName=qs,e.isModifierKey=Us,e.lookupKey=Is,e.normalizeKeyMap=Hs,e.StringStream=Qe,e.SharedTextMarker=gs,e.TextMarker=ds,e.LineWidget=cs,e.e_preventDefault=we,e.e_stopPropagation=xe,e.e_stop=Se,e.addClass=D,e.contains=L,e.rmClass=S,e.keyNames=Ds}ia.prototype.init=function(n){var e=this;var r=this,i=this.cm;this.createField(n);var o=this.textarea;n.wrapper.insertBefore(this.wrapper,n.wrapper.firstChild);if(u)o.style.width="0px";de(o,"input",function(){if(k&&C>=9&&e.hasSelection)e.hasSelection=null;r.poll()});de(o,"paste",function(e){if(ye(i,e)||ql(e,i))return;i.state.pasteIncoming=+new Date;r.fastPoll()});function t(e){if(ye(i,e))return;if(i.somethingSelected())Ul({lineWise:false,text:i.getSelections()});else if(!i.options.lineWiseCopyCut)return;else{var t=_l(i);Ul({lineWise:true,text:t.text});if(e.type=="cut")i.setSelections(t.ranges,null,q);else{r.prevInput="";o.value=t.text.join("\n");P(o)}}if(e.type=="cut")i.state.cutIncoming=+new Date}de(o,"cut",t);de(o,"copy",t);de(n.scroller,"paste",function(e){if(qn(n,e)||ye(i,e))return;if(!o.dispatchEvent){i.state.pasteIncoming=+new Date;r.focus();return}var t=new Event("paste");t.clipboardData=e.clipboardData;o.dispatchEvent(t)});de(n.lineSpace,"selectstart",function(e){if(!qn(n,e))we(e)});de(o,"compositionstart",function(){var e=i.getCursor("from");if(r.composing)r.composing.range.clear();r.composing={start:e,range:i.markText(e,i.getCursor("to"),{className:"CodeMirror-composing"})}});de(o,"compositionend",function(){if(r.composing){r.poll();r.composing.range.clear();r.composing=null}})},ia.prototype.createField=function(e){this.wrapper=Gl();this.textarea=this.wrapper.firstChild},ia.prototype.screenReaderLabelChanged=function(e){if(e)this.textarea.setAttribute("aria-label",e);else this.textarea.removeAttribute("aria-label")},ia.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc;var r=qr(e);if(e.options.moveInputWithCursor){var i=yr(e,n.sel.primary().head,"div");var o=t.wrapper.getBoundingClientRect(),s=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+s.top-o.top));r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+s.left-o.left))}return r},ia.prototype.showSelection=function(e){var t=this.cm,n=t.display;T(n.cursorDiv,e.cursors);T(n.selectionDiv,e.selection);if(e.teTop!=null){this.wrapper.style.top=e.teTop+"px";this.wrapper.style.left=e.teLeft+"px"}},ia.prototype.reset=function(e){if(this.contextMenuPending||this.composing)return;var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n;if(t.state.focused)P(this.textarea);if(k&&C>=9)this.hasSelection=n}else if(!e){this.prevInput=this.textarea.value="";if(k&&C>=9)this.hasSelection=null}},ia.prototype.getField=function(){return this.textarea},ia.prototype.supportsTouch=function(){return false},ia.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!p||F()!=this.textarea))try{this.textarea.focus()}catch(e){}},ia.prototype.blur=function(){this.textarea.blur()},ia.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},ia.prototype.receivedFocus=function(){this.slowPoll()},ia.prototype.slowPoll=function(){var e=this;if(this.pollingFast)return;this.polling.set(this.cm.options.pollInterval,function(){e.poll();if(e.cm.state.focused)e.slowPoll()})},ia.prototype.fastPoll=function(){var t=false,n=this;n.pollingFast=true;function r(){var e=n.poll();if(!e&&!t){t=true;n.polling.set(60,r)}else{n.pollingFast=false;n.slowPoll()}}n.polling.set(20,r)},ia.prototype.poll=function(){var e=this;var t=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||Ne(n)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return false;var i=n.value;if(i==r&&!t.somethingSelected())return false;if(k&&C>=9&&this.hasSelection===i||y&&/[\uf700-\uf7ff]/.test(i)){t.display.input.reset();return false}if(t.doc.sel==t.display.selForContextMenu){var o=i.charCodeAt(0);if(o==8203&&!r)r="​";if(o==8666){this.reset();return this.cm.execCommand("undo")}}var s=0,l=Math.min(r.length,i.length);while(s<l&&r.charCodeAt(s)==i.charCodeAt(s))++s;Li(t,function(){jl(t,i.slice(s),r.length-s,null,e.composing?"*compose":null);if(i.length>1e3||i.indexOf("\n")>-1)n.value=e.prevInput="";else e.prevInput=i;if(e.composing){e.composing.range.clear();e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"})}});return true},ia.prototype.ensurePolled=function(){if(this.pollingFast&&this.poll())this.pollingFast=false},ia.prototype.onKeyPress=function(){if(k&&C>=9)this.hasSelection=null;this.fastPoll()},ia.prototype.onContextMenu=function(e){var n=this,r=n.cm,i=r.display,o=n.textarea;if(n.contextMenuPending)n.contextMenuPending();var t=Nr(r,e),s=i.scroller.scrollTop;if(!t||v)return;var l=r.options.resetSelectionOnContextMenu;if(l&&r.doc.sel.contains(t)==-1)Oi(r,Uo)(r.doc,so(t),q);var a=o.style.cssText,u=n.wrapper.style.cssText;var c=n.wrapper.offsetParent.getBoundingClientRect();n.wrapper.style.cssText="position: static";o.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-c.top-5)+"px; left: "+(e.clientX-c.left-5)+"px;\n      z-index: 1000; background: "+(k?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var f;if(g)f=window.scrollY;i.input.focus();if(g)window.scrollTo(null,f);i.input.reset();if(!r.somethingSelected())o.value=n.prevInput=" ";n.contextMenuPending=h;i.selForContextMenu=r.doc.sel;clearTimeout(i.detectingSelectAll);function p(){if(o.selectionStart!=null){var e=r.somethingSelected();var t="​"+(e?o.value:"");o.value="⇚";o.value=t;n.prevInput=e?"":"​";o.selectionStart=1;o.selectionEnd=t.length;i.selForContextMenu=r.doc.sel}}function h(){if(n.contextMenuPending!=h)return;n.contextMenuPending=false;n.wrapper.style.cssText=u;o.style.cssText=a;if(k&&C<9)i.scrollbars.setScrollTop(i.scroller.scrollTop=s);if(o.selectionStart!=null){if(!k||k&&C<9)p();var e=0,t=function(){if(i.selForContextMenu==r.doc.sel&&o.selectionStart==0&&o.selectionEnd>0&&n.prevInput=="​")Oi(r,Qo)(r);else if(e++<10)i.detectingSelectAll=setTimeout(t,500);else{i.selForContextMenu=null;i.input.reset()}};i.detectingSelectAll=setTimeout(t,200)}}if(k&&C>=9)p();if(w){Se(e);var d=function(){ge(window,"mouseup",d);setTimeout(h,20)};de(window,"mouseup",d)}else setTimeout(h,50)},ia.prototype.readOnlyChanged=function(e){if(!e)this.reset();this.textarea.disabled=e=="nocursor";this.textarea.readOnly=!!e},ia.prototype.setUneditable=function(){},ia.prototype.needsContentAttribute=false,Dl(Wl),Xl(Wl);var la="iter insert remove copy getEditor constructor".split(" "),aa;for(aa in ws.prototype)if(ws.prototype.hasOwnProperty(aa)&&I(la,aa)<0)Wl.prototype[aa]=function(e){return function(){return e.apply(this.doc,arguments)}}(ws.prototype[aa]);return Ce(ws),Wl.inputStyles={textarea:ia,contenteditable:Yl},Wl.defineMode=function(e){Wl.defaults.mode||"null"==e||(Wl.defaults.mode=e),function(e,t){2<arguments.length&&(t.dependencies=Array.prototype.slice.call(arguments,2));ze[e]=t}.apply(this,arguments)},Wl.defineMIME=function(e,t){He[e]=t},Wl.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),Wl.defineMIME("text/plain","null"),Wl.defineExtension=function(e,t){Wl.prototype[e]=t},Wl.defineDocExtension=function(e,t){ws.prototype[e]=t},Wl.fromTextArea=function(t,n){(n=n?R(n):{}).value=t.value,!n.tabindex&&t.tabIndex&&(n.tabindex=t.tabIndex);!n.placeholder&&t.placeholder&&(n.placeholder=t.placeholder);{var e;null==n.autofocus&&(e=F(),n.autofocus=e==t||null!=t.getAttribute("autofocus")&&e==document.body)}function r(){t.value=l.getValue()}var i;if(t.form&&(de(t.form,"submit",r),!n.leaveSubmitMethodAlone)){var o=t.form;i=o.submit;try{var s=o.submit=function(){r(),o.submit=i,o.submit(),o.submit=s}}catch(e){}}n.finishInit=function(e){e.save=r,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,r(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(ge(t.form,"submit",r),n.leaveSubmitMethodAlone||"function"!=typeof t.form.submit||(t.form.submit=i))}},t.style.display="none";var l=Wl(function(e){return t.parentNode.insertBefore(e,t.nextSibling)},n);return l},function(e){e.off=ge,e.on=de,e.wheelEventPixels=to,e.Doc=ws,e.splitLines=De,e.countColumn=z,e.findColumn=V,e.isWordChar=te,e.Pass=j,e.signal=ve,e.Line=an,e.changeEnd=lo,e.scrollbarModel=Ai,e.Pos=it,e.cmpPos=ot,e.modes=ze,e.mimeModes=He,e.resolveMode=je,e.getMode=qe,e.modeExtensions=Ke,e.extendMode=_e,e.copyState=Ve,e.startState=Xe,e.innerMode=Ge,e.commands=$s,e.keyMap=Rs,e.keyName=qs,e.isModifierKey=Us,e.lookupKey=Is,e.normalizeKeyMap=Hs,e.StringStream=Qe,e.SharedTextMarker=gs,e.TextMarker=ds,e.LineWidget=cs,e.e_preventDefault=we,e.e_stopPropagation=xe,e.e_stop=Se,e.addClass=D,e.contains=L,e.rmClass=S,e.keyNames=Ds}(Wl),Wl.version="5.59.0",Wl}()},853:(e,t,n)=>{!function(o){"use strict";function e(e){for(var t={},n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t}var t=["alias","and","BEGIN","begin","break","case","class","def","defined?","do","else","elsif","END","end","ensure","false","for","if","in","module","next","not","or","redo","rescue","retry","return","self","super","then","true","undef","unless","until","when","while","yield","nil","raise","throw","catch","fail","loop","callcc","caller","lambda","proc","public","protected","private","require","load","require_relative","extend","autoload","__END__","__FILE__","__LINE__","__dir__"],s=e(t),l=e(["def","class","case","for","while","until","module","then","catch","loop","proc","begin"]),h=e(["end","until"]),d={"[":"]","{":"}","(":")"},m={"]":"[","}":"{",")":"("};o.defineMode("ruby",function(i){var u;function c(e,t,n){return n.tokenize.push(e),e(t,n)}function a(e,t){if(e.sol()&&e.match("=begin")&&e.eol())return t.tokenize.push(p),"comment";if(e.eatSpace())return null;var n,r,i,o=e.next();if("`"==o||"'"==o||'"'==o)return c(f(o,"string",'"'==o||"`"==o),e,t);if("/"==o)return function(e){var t,n=e.pos,r=0,i=!1,o=!1;for(;null!=(t=e.next());)if(o)o=!1;else{if(-1<"[{(".indexOf(t))r++;else if(-1<"]})".indexOf(t)){if(--r<0)break}else if("/"==t&&0==r){i=!0;break}o="\\"==t}return e.backUp(e.pos-n),i}(e)?c(f(o,"string-2",!0),e,t):"operator";if("%"==o){var s="string",l=!0;e.eat("s")?s="atom":e.eat(/[WQ]/)?s="string":e.eat(/[r]/)?s="string-2":e.eat(/[wxq]/)&&(l=!(s="string"));var a=e.eat(/[^\w\s=]/);return a?(d.propertyIsEnumerable(a)&&(a=d[a]),c(f(a,s,l,!0),e,t)):"operator"}if("#"==o)return e.skipToEnd(),"comment";if("<"==o&&(n=e.match(/^<([-~])[\`\"\']?([a-zA-Z_?]\w*)[\`\"\']?(?:;|$)/)))return c((r=n[2],i=n[1],function(e,t){return i&&e.eatSpace(),e.match(r)?t.tokenize.pop():e.skipToEnd(),"string"}),e,t);if("0"==o)return e.eat("x")?e.eatWhile(/[\da-fA-F]/):e.eat("b")?e.eatWhile(/[01]/):e.eatWhile(/[0-7]/),"number";if(/\d/.test(o))return e.match(/^[\d_]*(?:\.[\d_]+)?(?:[eE][+\-]?[\d_]+)?/),"number";if("?"==o){for(;e.match(/^\\[CM]-/););return e.eat("\\")?e.eatWhile(/\w/):e.next(),"string"}if(":"==o)return e.eat("'")?c(f("'","atom",!1),e,t):e.eat('"')?c(f('"',"atom",!0),e,t):e.eat(/[\<\>]/)?(e.eat(/[\<\>]/),"atom"):e.eat(/[\+\-\*\/\&\|\:\!]/)?"atom":e.eat(/[a-zA-Z$@_\xa1-\uffff]/)?(e.eatWhile(/[\w$\xa1-\uffff]/),e.eat(/[\?\!\=]/),"atom"):"operator";if("@"==o&&e.match(/^@?[a-zA-Z_\xa1-\uffff]/))return e.eat("@"),e.eatWhile(/[\w\xa1-\uffff]/),"variable-2";if("$"==o)return e.eat(/[a-zA-Z_]/)?e.eatWhile(/[\w]/):e.eat(/\d/)?e.eat(/\d/):e.next(),"variable-3";if(/[a-zA-Z_\xa1-\uffff]/.test(o))return e.eatWhile(/[\w\xa1-\uffff]/),e.eat(/[\?\!]/),e.eat(":")?"atom":"ident";if("|"!=o||!t.varList&&"{"!=t.lastTok&&"do"!=t.lastTok){if(/[\(\)\[\]{}\\;]/.test(o))return u=o,null;if("-"==o&&e.eat(">"))return"arrow";if(/[=+\-\/*:\.^%<>~|]/.test(o)){t=e.eatWhile(/[=+\-\/*:\.^%<>~|]/);return"."!=o||t||(u="."),"operator"}return null}return u="|",null}function f(i,o,s,l){return function(e,t){var n,r=!1;for("read-quoted-paused"===t.context.type&&(t.context=t.context.prev,e.eat("}"));null!=(n=e.next());){if(n==i&&(l||!r)){t.tokenize.pop();break}if(s&&"#"==n&&!r){if(e.eat("{")){"}"==i&&(t.context={prev:t.context,type:"read-quoted-paused"}),t.tokenize.push(function n(r){return r=r||1,function(e,t){if("}"==e.peek()){if(1==r)return t.tokenize.pop(),t.tokenize[t.tokenize.length-1](e,t);t.tokenize[t.tokenize.length-1]=n(r-1)}else"{"==e.peek()&&(t.tokenize[t.tokenize.length-1]=n(r+1));return a(e,t)}}());break}if(/[@\$]/.test(e.peek())){t.tokenize.push(function(){var n=!1;return function(e,t){return n?(t.tokenize.pop(),t.tokenize[t.tokenize.length-1](e,t)):(n=!0,a(e,t))}}());break}}r=!r&&"\\"==n}return o}}function p(e,t){return e.sol()&&e.match("=end")&&e.eol()&&t.tokenize.pop(),e.skipToEnd(),"comment"}return{startState:function(){return{tokenize:[a],indented:0,context:{type:"top",indented:-i.indentUnit},continuedLine:!1,lastTok:null,varList:!1}},token:function(e,t){u=null,e.sol()&&(t.indented=e.indentation());var n,r,i=t.tokenize[t.tokenize.length-1](e,t),o=u;return"ident"==i&&(r=e.current(),"keyword"==(i="."==t.lastTok?"property":s.propertyIsEnumerable(e.current())?"keyword":/^[A-Z]/.test(r)?"tag":"def"==t.lastTok||"class"==t.lastTok||t.varList?"def":"variable")&&(o=r,l.propertyIsEnumerable(r)?n="indent":h.propertyIsEnumerable(r)?n="dedent":(("if"==r||"unless"==r)&&e.column()==e.indentation()||"do"==r&&t.context.indented<t.indented)&&(n="indent"))),(u||i&&"comment"!=i)&&(t.lastTok=o),"|"==u&&(t.varList=!t.varList),"indent"==n||/[\(\[\{]/.test(u)?t.context={prev:t.context,type:u||i,indented:t.indented}:("dedent"==n||/[\)\]\}]/.test(u))&&t.context.prev&&(t.context=t.context.prev),e.eol()&&(t.continuedLine="\\"==u||"operator"==i),i},indent:function(e,t){if(e.tokenize[e.tokenize.length-1]!=a)return o.Pass;var n=t&&t.charAt(0),r=e.context,t=r.type==m[n]||"keyword"==r.type&&/^(?:end|until|else|elsif|when|rescue)\b/.test(t);return r.indented+(t?0:i.indentUnit)+(e.continuedLine?i.indentUnit:0)},electricInput:/^\s*(?:end|rescue|elsif|else|\})$/,lineComment:"#",fold:"indent"}}),o.defineMIME("text/x-ruby","ruby"),o.registerHelper("hintWords","ruby",t)}(n(631))},240:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(15),t=n.n(r),r=n(645),t=n.n(r)()(t());t.push([e.id,"/* BASICS */\n\n.CodeMirror {\n  /* Set height, width, borders, and global font properties here */\n  font-family: monospace;\n  height: 300px;\n  color: black;\n  direction: ltr;\n}\n\n/* PADDING */\n\n.CodeMirror-lines {\n  padding: 4px 0; /* Vertical padding around content */\n}\n.CodeMirror pre.CodeMirror-line,\n.CodeMirror pre.CodeMirror-line-like {\n  padding: 0 4px; /* Horizontal padding of content */\n}\n\n.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  background-color: transparent; /* The little square between H and V scrollbars */\n}\n\n/* GUTTER */\n\n.CodeMirror-gutters {\n  border-right: 1px solid #ddd;\n  background-color: #f7f7f7;\n  white-space: nowrap;\n}\n.CodeMirror-linenumbers {}\n.CodeMirror-linenumber {\n  padding: 0 3px 0 5px;\n  min-width: 20px;\n  text-align: right;\n  color: #999;\n  white-space: nowrap;\n}\n\n.CodeMirror-guttermarker { color: black; }\n.CodeMirror-guttermarker-subtle { color: #999; }\n\n/* CURSOR */\n\n.CodeMirror-cursor {\n  border-left: 1px solid black;\n  border-right: none;\n  width: 0;\n}\n/* Shown when moving in bi-directional text */\n.CodeMirror div.CodeMirror-secondarycursor {\n  border-left: 1px solid silver;\n}\n.cm-fat-cursor .CodeMirror-cursor {\n  width: auto;\n  border: 0 !important;\n  background: #7e7;\n}\n.cm-fat-cursor div.CodeMirror-cursors {\n  z-index: 1;\n}\n.cm-fat-cursor-mark {\n  background-color: rgba(20, 255, 20, 0.5);\n  -webkit-animation: blink 1.06s steps(1) infinite;\n  -moz-animation: blink 1.06s steps(1) infinite;\n  animation: blink 1.06s steps(1) infinite;\n}\n.cm-animate-fat-cursor {\n  width: auto;\n  border: 0;\n  -webkit-animation: blink 1.06s steps(1) infinite;\n  -moz-animation: blink 1.06s steps(1) infinite;\n  animation: blink 1.06s steps(1) infinite;\n  background-color: #7e7;\n}\n@-moz-keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n@-webkit-keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n@keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n\n/* Can style cursor different in overwrite (non-insert) mode */\n.CodeMirror-overwrite .CodeMirror-cursor {}\n\n.cm-tab { display: inline-block; text-decoration: inherit; }\n\n.CodeMirror-rulers {\n  position: absolute;\n  left: 0; right: 0; top: -50px; bottom: 0;\n  overflow: hidden;\n}\n.CodeMirror-ruler {\n  border-left: 1px solid #ccc;\n  top: 0; bottom: 0;\n  position: absolute;\n}\n\n/* DEFAULT THEME */\n\n.cm-s-default .cm-header {color: blue;}\n.cm-s-default .cm-quote {color: #090;}\n.cm-negative {color: #d44;}\n.cm-positive {color: #292;}\n.cm-header, .cm-strong {font-weight: bold;}\n.cm-em {font-style: italic;}\n.cm-link {text-decoration: underline;}\n.cm-strikethrough {text-decoration: line-through;}\n\n.cm-s-default .cm-keyword {color: #708;}\n.cm-s-default .cm-atom {color: #219;}\n.cm-s-default .cm-number {color: #164;}\n.cm-s-default .cm-def {color: #00f;}\n.cm-s-default .cm-variable,\n.cm-s-default .cm-punctuation,\n.cm-s-default .cm-property,\n.cm-s-default .cm-operator {}\n.cm-s-default .cm-variable-2 {color: #05a;}\n.cm-s-default .cm-variable-3, .cm-s-default .cm-type {color: #085;}\n.cm-s-default .cm-comment {color: #a50;}\n.cm-s-default .cm-string {color: #a11;}\n.cm-s-default .cm-string-2 {color: #f50;}\n.cm-s-default .cm-meta {color: #555;}\n.cm-s-default .cm-qualifier {color: #555;}\n.cm-s-default .cm-builtin {color: #30a;}\n.cm-s-default .cm-bracket {color: #997;}\n.cm-s-default .cm-tag {color: #170;}\n.cm-s-default .cm-attribute {color: #00c;}\n.cm-s-default .cm-hr {color: #999;}\n.cm-s-default .cm-link {color: #00c;}\n\n.cm-s-default .cm-error {color: #f00;}\n.cm-invalidchar {color: #f00;}\n\n.CodeMirror-composing { border-bottom: 2px solid; }\n\n/* Default styles for common addons */\n\ndiv.CodeMirror span.CodeMirror-matchingbracket {color: #0b0;}\ndiv.CodeMirror span.CodeMirror-nonmatchingbracket {color: #a22;}\n.CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }\n.CodeMirror-activeline-background {background: #e8f2ff;}\n\n/* STOP */\n\n/* The rest of this file contains styles related to the mechanics of\n   the editor. You probably shouldn't touch them. */\n\n.CodeMirror {\n  position: relative;\n  overflow: hidden;\n  background: white;\n}\n\n.CodeMirror-scroll {\n  overflow: scroll !important; /* Things will break if this is overridden */\n  /* 50px is the magic margin used to hide the element's real scrollbars */\n  /* See overflow: hidden in .CodeMirror */\n  margin-bottom: -50px; margin-right: -50px;\n  padding-bottom: 50px;\n  height: 100%;\n  outline: none; /* Prevent dragging from highlighting the element */\n  position: relative;\n}\n.CodeMirror-sizer {\n  position: relative;\n  border-right: 50px solid transparent;\n}\n\n/* The fake, visible scrollbars. Used to force redraw during scrolling\n   before actual scrolling happens, thus preventing shaking and\n   flickering artifacts. */\n.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  position: absolute;\n  z-index: 6;\n  display: none;\n  outline: none;\n}\n.CodeMirror-vscrollbar {\n  right: 0; top: 0;\n  overflow-x: hidden;\n  overflow-y: scroll;\n}\n.CodeMirror-hscrollbar {\n  bottom: 0; left: 0;\n  overflow-y: hidden;\n  overflow-x: scroll;\n}\n.CodeMirror-scrollbar-filler {\n  right: 0; bottom: 0;\n}\n.CodeMirror-gutter-filler {\n  left: 0; bottom: 0;\n}\n\n.CodeMirror-gutters {\n  position: absolute; left: 0; top: 0;\n  min-height: 100%;\n  z-index: 3;\n}\n.CodeMirror-gutter {\n  white-space: normal;\n  height: 100%;\n  display: inline-block;\n  vertical-align: top;\n  margin-bottom: -50px;\n}\n.CodeMirror-gutter-wrapper {\n  position: absolute;\n  z-index: 4;\n  background: none !important;\n  border: none !important;\n}\n.CodeMirror-gutter-background {\n  position: absolute;\n  top: 0; bottom: 0;\n  z-index: 4;\n}\n.CodeMirror-gutter-elt {\n  position: absolute;\n  cursor: default;\n  z-index: 4;\n}\n.CodeMirror-gutter-wrapper ::selection { background-color: transparent }\n.CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }\n\n.CodeMirror-lines {\n  cursor: text;\n  min-height: 1px; /* prevents collapsing before first draw */\n}\n.CodeMirror pre.CodeMirror-line,\n.CodeMirror pre.CodeMirror-line-like {\n  /* Reset some styles that the rest of the page might have set */\n  -moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0;\n  border-width: 0;\n  background: transparent;\n  font-family: inherit;\n  font-size: inherit;\n  margin: 0;\n  white-space: pre;\n  word-wrap: normal;\n  line-height: inherit;\n  color: inherit;\n  z-index: 2;\n  position: relative;\n  overflow: visible;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-font-variant-ligatures: contextual;\n  font-variant-ligatures: contextual;\n}\n.CodeMirror-wrap pre.CodeMirror-line,\n.CodeMirror-wrap pre.CodeMirror-line-like {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  word-break: normal;\n}\n\n.CodeMirror-linebackground {\n  position: absolute;\n  left: 0; right: 0; top: 0; bottom: 0;\n  z-index: 0;\n}\n\n.CodeMirror-linewidget {\n  position: relative;\n  z-index: 2;\n  padding: 0.1px; /* Force widget margins to stay inside of the container */\n}\n\n.CodeMirror-widget {}\n\n.CodeMirror-rtl pre { direction: rtl; }\n\n.CodeMirror-code {\n  outline: none;\n}\n\n/* Force content-box sizing for the elements where we expect it */\n.CodeMirror-scroll,\n.CodeMirror-sizer,\n.CodeMirror-gutter,\n.CodeMirror-gutters,\n.CodeMirror-linenumber {\n  -moz-box-sizing: content-box;\n  box-sizing: content-box;\n}\n\n.CodeMirror-measure {\n  position: absolute;\n  width: 100%;\n  height: 0;\n  overflow: hidden;\n  visibility: hidden;\n}\n\n.CodeMirror-cursor {\n  position: absolute;\n  pointer-events: none;\n}\n.CodeMirror-measure pre { position: static; }\n\ndiv.CodeMirror-cursors {\n  visibility: hidden;\n  position: relative;\n  z-index: 3;\n}\ndiv.CodeMirror-dragcursors {\n  visibility: visible;\n}\n\n.CodeMirror-focused div.CodeMirror-cursors {\n  visibility: visible;\n}\n\n.CodeMirror-selected { background: #d9d9d9; }\n.CodeMirror-focused .CodeMirror-selected { background: #d7d4f0; }\n.CodeMirror-crosshair { cursor: crosshair; }\n.CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection { background: #d7d4f0; }\n.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }\n\n.cm-searching {\n  background-color: #ffa;\n  background-color: rgba(255, 255, 0, .4);\n}\n\n/* Used to force a border model for a node */\n.cm-force-border { padding-right: .1px; }\n\n@media print {\n  /* Hide the cursor when printing */\n  .CodeMirror div.CodeMirror-cursors {\n    visibility: hidden;\n  }\n}\n\n/* See issue #2901 */\n.cm-tab-wrap-hack:after { content: ''; }\n\n/* Help users use markselection to safely style text background */\nspan.CodeMirror-selectedtext { background: none; }\n","",{version:3,sources:["webpack://./node_modules/codemirror/lib/codemirror.css"],names:[],mappings:"AAAA,WAAW;;AAEX;EACE,gEAAgE;EAChE,sBAAsB;EACtB,aAAa;EACb,YAAY;EACZ,cAAc;AAChB;;AAEA,YAAY;;AAEZ;EACE,cAAc,EAAE,oCAAoC;AACtD;AACA;;EAEE,cAAc,EAAE,kCAAkC;AACpD;;AAEA;EACE,6BAA6B,EAAE,iDAAiD;AAClF;;AAEA,WAAW;;AAEX;EACE,4BAA4B;EAC5B,yBAAyB;EACzB,mBAAmB;AACrB;AACA,yBAAyB;AACzB;EACE,oBAAoB;EACpB,eAAe;EACf,iBAAiB;EACjB,WAAW;EACX,mBAAmB;AACrB;;AAEA,2BAA2B,YAAY,EAAE;AACzC,kCAAkC,WAAW,EAAE;;AAE/C,WAAW;;AAEX;EACE,4BAA4B;EAC5B,kBAAkB;EAClB,QAAQ;AACV;AACA,6CAA6C;AAC7C;EACE,6BAA6B;AAC/B;AACA;EACE,WAAW;EACX,oBAAoB;EACpB,gBAAgB;AAClB;AACA;EACE,UAAU;AACZ;AACA;EACE,wCAAwC;EACxC,gDAAgD;EAChD,6CAA6C;EAC7C,wCAAwC;AAC1C;AACA;EACE,WAAW;EACX,SAAS;EACT,gDAAgD;EAChD,6CAA6C;EAC7C,wCAAwC;EACxC,sBAAsB;AACxB;AACA;EACE,IAAI;EACJ,MAAM,6BAA6B,EAAE;EACrC,MAAM;AACR;AACA;EACE,IAAI;EACJ,MAAM,6BAA6B,EAAE;EACrC,MAAM;AACR;AACA;EACE,IAAI;EACJ,MAAM,6BAA6B,EAAE;EACrC,MAAM;AACR;;AAEA,8DAA8D;AAC9D,0CAA0C;;AAE1C,UAAU,qBAAqB,EAAE,wBAAwB,EAAE;;AAE3D;EACE,kBAAkB;EAClB,OAAO,EAAE,QAAQ,EAAE,UAAU,EAAE,SAAS;EACxC,gBAAgB;AAClB;AACA;EACE,2BAA2B;EAC3B,MAAM,EAAE,SAAS;EACjB,kBAAkB;AACpB;;AAEA,kBAAkB;;AAElB,0BAA0B,WAAW,CAAC;AACtC,yBAAyB,WAAW,CAAC;AACrC,cAAc,WAAW,CAAC;AAC1B,cAAc,WAAW,CAAC;AAC1B,wBAAwB,iBAAiB,CAAC;AAC1C,QAAQ,kBAAkB,CAAC;AAC3B,UAAU,0BAA0B,CAAC;AACrC,mBAAmB,6BAA6B,CAAC;;AAEjD,2BAA2B,WAAW,CAAC;AACvC,wBAAwB,WAAW,CAAC;AACpC,0BAA0B,WAAW,CAAC;AACtC,uBAAuB,WAAW,CAAC;AACnC;;;4BAG4B;AAC5B,8BAA8B,WAAW,CAAC;AAC1C,sDAAsD,WAAW,CAAC;AAClE,2BAA2B,WAAW,CAAC;AACvC,0BAA0B,WAAW,CAAC;AACtC,4BAA4B,WAAW,CAAC;AACxC,wBAAwB,WAAW,CAAC;AACpC,6BAA6B,WAAW,CAAC;AACzC,2BAA2B,WAAW,CAAC;AACvC,2BAA2B,WAAW,CAAC;AACvC,uBAAuB,WAAW,CAAC;AACnC,6BAA6B,WAAW,CAAC;AACzC,sBAAsB,WAAW,CAAC;AAClC,wBAAwB,WAAW,CAAC;;AAEpC,yBAAyB,WAAW,CAAC;AACrC,iBAAiB,WAAW,CAAC;;AAE7B,wBAAwB,wBAAwB,EAAE;;AAElD,qCAAqC;;AAErC,gDAAgD,WAAW,CAAC;AAC5D,mDAAmD,WAAW,CAAC;AAC/D,0BAA0B,iCAAiC,EAAE;AAC7D,mCAAmC,mBAAmB,CAAC;;AAEvD,SAAS;;AAET;mDACmD;;AAEnD;EACE,kBAAkB;EAClB,gBAAgB;EAChB,iBAAiB;AACnB;;AAEA;EACE,2BAA2B,EAAE,4CAA4C;EACzE,wEAAwE;EACxE,wCAAwC;EACxC,oBAAoB,EAAE,mBAAmB;EACzC,oBAAoB;EACpB,YAAY;EACZ,aAAa,EAAE,mDAAmD;EAClE,kBAAkB;AACpB;AACA;EACE,kBAAkB;EAClB,oCAAoC;AACtC;;AAEA;;0BAE0B;AAC1B;EACE,kBAAkB;EAClB,UAAU;EACV,aAAa;EACb,aAAa;AACf;AACA;EACE,QAAQ,EAAE,MAAM;EAChB,kBAAkB;EAClB,kBAAkB;AACpB;AACA;EACE,SAAS,EAAE,OAAO;EAClB,kBAAkB;EAClB,kBAAkB;AACpB;AACA;EACE,QAAQ,EAAE,SAAS;AACrB;AACA;EACE,OAAO,EAAE,SAAS;AACpB;;AAEA;EACE,kBAAkB,EAAE,OAAO,EAAE,MAAM;EACnC,gBAAgB;EAChB,UAAU;AACZ;AACA;EACE,mBAAmB;EACnB,YAAY;EACZ,qBAAqB;EACrB,mBAAmB;EACnB,oBAAoB;AACtB;AACA;EACE,kBAAkB;EAClB,UAAU;EACV,2BAA2B;EAC3B,uBAAuB;AACzB;AACA;EACE,kBAAkB;EAClB,MAAM,EAAE,SAAS;EACjB,UAAU;AACZ;AACA;EACE,kBAAkB;EAClB,eAAe;EACf,UAAU;AACZ;AACA,yCAAyC,8BAA8B;AACvE,8CAA8C,8BAA8B;;AAE5E;EACE,YAAY;EACZ,eAAe,EAAE,0CAA0C;AAC7D;AACA;;EAEE,+DAA+D;EAC/D,qBAAqB,EAAE,wBAAwB,EAAE,gBAAgB;EACjE,eAAe;EACf,uBAAuB;EACvB,oBAAoB;EACpB,kBAAkB;EAClB,SAAS;EACT,gBAAgB;EAChB,iBAAiB;EACjB,oBAAoB;EACpB,cAAc;EACd,UAAU;EACV,kBAAkB;EAClB,iBAAiB;EACjB,wCAAwC;EACxC,0CAA0C;EAC1C,kCAAkC;AACpC;AACA;;EAEE,qBAAqB;EACrB,qBAAqB;EACrB,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;EAClB,OAAO,EAAE,QAAQ,EAAE,MAAM,EAAE,SAAS;EACpC,UAAU;AACZ;;AAEA;EACE,kBAAkB;EAClB,UAAU;EACV,cAAc,EAAE,yDAAyD;AAC3E;;AAEA,oBAAoB;;AAEpB,sBAAsB,cAAc,EAAE;;AAEtC;EACE,aAAa;AACf;;AAEA,iEAAiE;AACjE;;;;;EAKE,4BAA4B;EAC5B,uBAAuB;AACzB;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,SAAS;EACT,gBAAgB;EAChB,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;EAClB,oBAAoB;AACtB;AACA,0BAA0B,gBAAgB,EAAE;;AAE5C;EACE,kBAAkB;EAClB,kBAAkB;EAClB,UAAU;AACZ;AACA;EACE,mBAAmB;AACrB;;AAEA;EACE,mBAAmB;AACrB;;AAEA,uBAAuB,mBAAmB,EAAE;AAC5C,2CAA2C,mBAAmB,EAAE;AAChE,wBAAwB,iBAAiB,EAAE;AAC3C,6GAA6G,mBAAmB,EAAE;AAClI,4HAA4H,mBAAmB,EAAE;;AAEjJ;EACE,sBAAsB;EACtB,uCAAuC;AACzC;;AAEA,4CAA4C;AAC5C,mBAAmB,mBAAmB,EAAE;;AAExC;EACE,kCAAkC;EAClC;IACE,kBAAkB;EACpB;AACF;;AAEA,oBAAoB;AACpB,0BAA0B,WAAW,EAAE;;AAEvC,iEAAiE;AACjE,+BAA+B,gBAAgB,EAAE",sourcesContent:["/* BASICS */\n\n.CodeMirror {\n  /* Set height, width, borders, and global font properties here */\n  font-family: monospace;\n  height: 300px;\n  color: black;\n  direction: ltr;\n}\n\n/* PADDING */\n\n.CodeMirror-lines {\n  padding: 4px 0; /* Vertical padding around content */\n}\n.CodeMirror pre.CodeMirror-line,\n.CodeMirror pre.CodeMirror-line-like {\n  padding: 0 4px; /* Horizontal padding of content */\n}\n\n.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  background-color: transparent; /* The little square between H and V scrollbars */\n}\n\n/* GUTTER */\n\n.CodeMirror-gutters {\n  border-right: 1px solid #ddd;\n  background-color: #f7f7f7;\n  white-space: nowrap;\n}\n.CodeMirror-linenumbers {}\n.CodeMirror-linenumber {\n  padding: 0 3px 0 5px;\n  min-width: 20px;\n  text-align: right;\n  color: #999;\n  white-space: nowrap;\n}\n\n.CodeMirror-guttermarker { color: black; }\n.CodeMirror-guttermarker-subtle { color: #999; }\n\n/* CURSOR */\n\n.CodeMirror-cursor {\n  border-left: 1px solid black;\n  border-right: none;\n  width: 0;\n}\n/* Shown when moving in bi-directional text */\n.CodeMirror div.CodeMirror-secondarycursor {\n  border-left: 1px solid silver;\n}\n.cm-fat-cursor .CodeMirror-cursor {\n  width: auto;\n  border: 0 !important;\n  background: #7e7;\n}\n.cm-fat-cursor div.CodeMirror-cursors {\n  z-index: 1;\n}\n.cm-fat-cursor-mark {\n  background-color: rgba(20, 255, 20, 0.5);\n  -webkit-animation: blink 1.06s steps(1) infinite;\n  -moz-animation: blink 1.06s steps(1) infinite;\n  animation: blink 1.06s steps(1) infinite;\n}\n.cm-animate-fat-cursor {\n  width: auto;\n  border: 0;\n  -webkit-animation: blink 1.06s steps(1) infinite;\n  -moz-animation: blink 1.06s steps(1) infinite;\n  animation: blink 1.06s steps(1) infinite;\n  background-color: #7e7;\n}\n@-moz-keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n@-webkit-keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n@keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n\n/* Can style cursor different in overwrite (non-insert) mode */\n.CodeMirror-overwrite .CodeMirror-cursor {}\n\n.cm-tab { display: inline-block; text-decoration: inherit; }\n\n.CodeMirror-rulers {\n  position: absolute;\n  left: 0; right: 0; top: -50px; bottom: 0;\n  overflow: hidden;\n}\n.CodeMirror-ruler {\n  border-left: 1px solid #ccc;\n  top: 0; bottom: 0;\n  position: absolute;\n}\n\n/* DEFAULT THEME */\n\n.cm-s-default .cm-header {color: blue;}\n.cm-s-default .cm-quote {color: #090;}\n.cm-negative {color: #d44;}\n.cm-positive {color: #292;}\n.cm-header, .cm-strong {font-weight: bold;}\n.cm-em {font-style: italic;}\n.cm-link {text-decoration: underline;}\n.cm-strikethrough {text-decoration: line-through;}\n\n.cm-s-default .cm-keyword {color: #708;}\n.cm-s-default .cm-atom {color: #219;}\n.cm-s-default .cm-number {color: #164;}\n.cm-s-default .cm-def {color: #00f;}\n.cm-s-default .cm-variable,\n.cm-s-default .cm-punctuation,\n.cm-s-default .cm-property,\n.cm-s-default .cm-operator {}\n.cm-s-default .cm-variable-2 {color: #05a;}\n.cm-s-default .cm-variable-3, .cm-s-default .cm-type {color: #085;}\n.cm-s-default .cm-comment {color: #a50;}\n.cm-s-default .cm-string {color: #a11;}\n.cm-s-default .cm-string-2 {color: #f50;}\n.cm-s-default .cm-meta {color: #555;}\n.cm-s-default .cm-qualifier {color: #555;}\n.cm-s-default .cm-builtin {color: #30a;}\n.cm-s-default .cm-bracket {color: #997;}\n.cm-s-default .cm-tag {color: #170;}\n.cm-s-default .cm-attribute {color: #00c;}\n.cm-s-default .cm-hr {color: #999;}\n.cm-s-default .cm-link {color: #00c;}\n\n.cm-s-default .cm-error {color: #f00;}\n.cm-invalidchar {color: #f00;}\n\n.CodeMirror-composing { border-bottom: 2px solid; }\n\n/* Default styles for common addons */\n\ndiv.CodeMirror span.CodeMirror-matchingbracket {color: #0b0;}\ndiv.CodeMirror span.CodeMirror-nonmatchingbracket {color: #a22;}\n.CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }\n.CodeMirror-activeline-background {background: #e8f2ff;}\n\n/* STOP */\n\n/* The rest of this file contains styles related to the mechanics of\n   the editor. You probably shouldn't touch them. */\n\n.CodeMirror {\n  position: relative;\n  overflow: hidden;\n  background: white;\n}\n\n.CodeMirror-scroll {\n  overflow: scroll !important; /* Things will break if this is overridden */\n  /* 50px is the magic margin used to hide the element's real scrollbars */\n  /* See overflow: hidden in .CodeMirror */\n  margin-bottom: -50px; margin-right: -50px;\n  padding-bottom: 50px;\n  height: 100%;\n  outline: none; /* Prevent dragging from highlighting the element */\n  position: relative;\n}\n.CodeMirror-sizer {\n  position: relative;\n  border-right: 50px solid transparent;\n}\n\n/* The fake, visible scrollbars. Used to force redraw during scrolling\n   before actual scrolling happens, thus preventing shaking and\n   flickering artifacts. */\n.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  position: absolute;\n  z-index: 6;\n  display: none;\n  outline: none;\n}\n.CodeMirror-vscrollbar {\n  right: 0; top: 0;\n  overflow-x: hidden;\n  overflow-y: scroll;\n}\n.CodeMirror-hscrollbar {\n  bottom: 0; left: 0;\n  overflow-y: hidden;\n  overflow-x: scroll;\n}\n.CodeMirror-scrollbar-filler {\n  right: 0; bottom: 0;\n}\n.CodeMirror-gutter-filler {\n  left: 0; bottom: 0;\n}\n\n.CodeMirror-gutters {\n  position: absolute; left: 0; top: 0;\n  min-height: 100%;\n  z-index: 3;\n}\n.CodeMirror-gutter {\n  white-space: normal;\n  height: 100%;\n  display: inline-block;\n  vertical-align: top;\n  margin-bottom: -50px;\n}\n.CodeMirror-gutter-wrapper {\n  position: absolute;\n  z-index: 4;\n  background: none !important;\n  border: none !important;\n}\n.CodeMirror-gutter-background {\n  position: absolute;\n  top: 0; bottom: 0;\n  z-index: 4;\n}\n.CodeMirror-gutter-elt {\n  position: absolute;\n  cursor: default;\n  z-index: 4;\n}\n.CodeMirror-gutter-wrapper ::selection { background-color: transparent }\n.CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }\n\n.CodeMirror-lines {\n  cursor: text;\n  min-height: 1px; /* prevents collapsing before first draw */\n}\n.CodeMirror pre.CodeMirror-line,\n.CodeMirror pre.CodeMirror-line-like {\n  /* Reset some styles that the rest of the page might have set */\n  -moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0;\n  border-width: 0;\n  background: transparent;\n  font-family: inherit;\n  font-size: inherit;\n  margin: 0;\n  white-space: pre;\n  word-wrap: normal;\n  line-height: inherit;\n  color: inherit;\n  z-index: 2;\n  position: relative;\n  overflow: visible;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-font-variant-ligatures: contextual;\n  font-variant-ligatures: contextual;\n}\n.CodeMirror-wrap pre.CodeMirror-line,\n.CodeMirror-wrap pre.CodeMirror-line-like {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  word-break: normal;\n}\n\n.CodeMirror-linebackground {\n  position: absolute;\n  left: 0; right: 0; top: 0; bottom: 0;\n  z-index: 0;\n}\n\n.CodeMirror-linewidget {\n  position: relative;\n  z-index: 2;\n  padding: 0.1px; /* Force widget margins to stay inside of the container */\n}\n\n.CodeMirror-widget {}\n\n.CodeMirror-rtl pre { direction: rtl; }\n\n.CodeMirror-code {\n  outline: none;\n}\n\n/* Force content-box sizing for the elements where we expect it */\n.CodeMirror-scroll,\n.CodeMirror-sizer,\n.CodeMirror-gutter,\n.CodeMirror-gutters,\n.CodeMirror-linenumber {\n  -moz-box-sizing: content-box;\n  box-sizing: content-box;\n}\n\n.CodeMirror-measure {\n  position: absolute;\n  width: 100%;\n  height: 0;\n  overflow: hidden;\n  visibility: hidden;\n}\n\n.CodeMirror-cursor {\n  position: absolute;\n  pointer-events: none;\n}\n.CodeMirror-measure pre { position: static; }\n\ndiv.CodeMirror-cursors {\n  visibility: hidden;\n  position: relative;\n  z-index: 3;\n}\ndiv.CodeMirror-dragcursors {\n  visibility: visible;\n}\n\n.CodeMirror-focused div.CodeMirror-cursors {\n  visibility: visible;\n}\n\n.CodeMirror-selected { background: #d9d9d9; }\n.CodeMirror-focused .CodeMirror-selected { background: #d7d4f0; }\n.CodeMirror-crosshair { cursor: crosshair; }\n.CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection { background: #d7d4f0; }\n.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }\n\n.cm-searching {\n  background-color: #ffa;\n  background-color: rgba(255, 255, 0, .4);\n}\n\n/* Used to force a border model for a node */\n.cm-force-border { padding-right: .1px; }\n\n@media print {\n  /* Hide the cursor when printing */\n  .CodeMirror div.CodeMirror-cursors {\n    visibility: hidden;\n  }\n}\n\n/* See issue #2901 */\n.cm-tab-wrap-hack:after { content: ''; }\n\n/* Help users use markselection to safely style text background */\nspan.CodeMirror-selectedtext { background: none; }\n"],sourceRoot:""}]);const i=t},655:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(15),t=n.n(r),r=n(645),t=n.n(r)()(t());t.push([e.id,"/*\n\n    Name:       Hopscotch\n    Author:     Jan T. Sott\n\n    CodeMirror template by Jan T. Sott (https://github.com/idleberg/base16-codemirror)\n    Original Base16 color scheme by Chris Kempson (https://github.com/chriskempson/base16)\n\n*/\n\n.cm-s-hopscotch.CodeMirror {background: #322931; color: #d5d3d5;}\n.cm-s-hopscotch div.CodeMirror-selected {background: #433b42 !important;}\n.cm-s-hopscotch .CodeMirror-gutters {background: #322931; border-right: 0px;}\n.cm-s-hopscotch .CodeMirror-linenumber {color: #797379;}\n.cm-s-hopscotch .CodeMirror-cursor {border-left: 1px solid #989498 !important;}\n\n.cm-s-hopscotch span.cm-comment {color: #b33508;}\n.cm-s-hopscotch span.cm-atom {color: #c85e7c;}\n.cm-s-hopscotch span.cm-number {color: #c85e7c;}\n\n.cm-s-hopscotch span.cm-property, .cm-s-hopscotch span.cm-attribute {color: #8fc13e;}\n.cm-s-hopscotch span.cm-keyword {color: #dd464c;}\n.cm-s-hopscotch span.cm-string {color: #fdcc59;}\n\n.cm-s-hopscotch span.cm-variable {color: #8fc13e;}\n.cm-s-hopscotch span.cm-variable-2 {color: #1290bf;}\n.cm-s-hopscotch span.cm-def {color: #fd8b19;}\n.cm-s-hopscotch span.cm-error {background: #dd464c; color: #989498;}\n.cm-s-hopscotch span.cm-bracket {color: #d5d3d5;}\n.cm-s-hopscotch span.cm-tag {color: #dd464c;}\n.cm-s-hopscotch span.cm-link {color: #c85e7c;}\n\n.cm-s-hopscotch .CodeMirror-matchingbracket { text-decoration: underline; color: white !important;}\n.cm-s-hopscotch .CodeMirror-activeline-background { background: #302020; }\n","",{version:3,sources:["webpack://./node_modules/codemirror/theme/hopscotch.css"],names:[],mappings:"AAAA;;;;;;;;CAQC;;AAED,4BAA4B,mBAAmB,EAAE,cAAc,CAAC;AAChE,yCAAyC,8BAA8B,CAAC;AACxE,qCAAqC,mBAAmB,EAAE,iBAAiB,CAAC;AAC5E,wCAAwC,cAAc,CAAC;AACvD,oCAAoC,yCAAyC,CAAC;;AAE9E,iCAAiC,cAAc,CAAC;AAChD,8BAA8B,cAAc,CAAC;AAC7C,gCAAgC,cAAc,CAAC;;AAE/C,qEAAqE,cAAc,CAAC;AACpF,iCAAiC,cAAc,CAAC;AAChD,gCAAgC,cAAc,CAAC;;AAE/C,kCAAkC,cAAc,CAAC;AACjD,oCAAoC,cAAc,CAAC;AACnD,6BAA6B,cAAc,CAAC;AAC5C,+BAA+B,mBAAmB,EAAE,cAAc,CAAC;AACnE,iCAAiC,cAAc,CAAC;AAChD,6BAA6B,cAAc,CAAC;AAC5C,8BAA8B,cAAc,CAAC;;AAE7C,8CAA8C,0BAA0B,EAAE,uBAAuB,CAAC;AAClG,oDAAoD,mBAAmB,EAAE",sourcesContent:["/*\n\n    Name:       Hopscotch\n    Author:     Jan T. Sott\n\n    CodeMirror template by Jan T. Sott (https://github.com/idleberg/base16-codemirror)\n    Original Base16 color scheme by Chris Kempson (https://github.com/chriskempson/base16)\n\n*/\n\n.cm-s-hopscotch.CodeMirror {background: #322931; color: #d5d3d5;}\n.cm-s-hopscotch div.CodeMirror-selected {background: #433b42 !important;}\n.cm-s-hopscotch .CodeMirror-gutters {background: #322931; border-right: 0px;}\n.cm-s-hopscotch .CodeMirror-linenumber {color: #797379;}\n.cm-s-hopscotch .CodeMirror-cursor {border-left: 1px solid #989498 !important;}\n\n.cm-s-hopscotch span.cm-comment {color: #b33508;}\n.cm-s-hopscotch span.cm-atom {color: #c85e7c;}\n.cm-s-hopscotch span.cm-number {color: #c85e7c;}\n\n.cm-s-hopscotch span.cm-property, .cm-s-hopscotch span.cm-attribute {color: #8fc13e;}\n.cm-s-hopscotch span.cm-keyword {color: #dd464c;}\n.cm-s-hopscotch span.cm-string {color: #fdcc59;}\n\n.cm-s-hopscotch span.cm-variable {color: #8fc13e;}\n.cm-s-hopscotch span.cm-variable-2 {color: #1290bf;}\n.cm-s-hopscotch span.cm-def {color: #fd8b19;}\n.cm-s-hopscotch span.cm-error {background: #dd464c; color: #989498;}\n.cm-s-hopscotch span.cm-bracket {color: #d5d3d5;}\n.cm-s-hopscotch span.cm-tag {color: #dd464c;}\n.cm-s-hopscotch span.cm-link {color: #c85e7c;}\n\n.cm-s-hopscotch .CodeMirror-matchingbracket { text-decoration: underline; color: white !important;}\n.cm-s-hopscotch .CodeMirror-activeline-background { background: #302020; }\n"],sourceRoot:""}]);const i=t},645:e=>{"use strict";e.exports=function(n){var a=[];return a.toString=function(){return this.map(function(e){var t=n(e);return e[2]?"@media ".concat(e[2]," {").concat(t,"}"):t}).join("")},a.i=function(e,t,n){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(n)for(var i=0;i<this.length;i++){var o=this[i][0];null!=o&&(r[o]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);n&&r[l[0]]||(t&&(l[2]?l[2]="".concat(t," and ").concat(l[2]):l[2]=t),a.push(l))}},a}},15:e=>{"use strict";function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e.exports=function(e){var t=i(e,4),n=t[1],r=t[3];if("function"!=typeof btoa)return[n].join("\n");e=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),t="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(e),e="/*# ".concat(t," */"),t=r.sources.map(function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")});return[n].concat(t).concat([e]).join("\n")}},379:(e,t,i)=>{"use strict";var n,r,l=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},o=(r={},function(e){if(void 0===r[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}r[e]=t}return r[e]}),u=[];function c(e){for(var t=-1,n=0;n<u.length;n++)if(u[n].identifier===e){t=n;break}return t}function a(e,t){for(var n={},r=[],i=0;i<e.length;i++){var o=e[i],s=t.base?o[0]+t.base:o[0],l=n[s]||0,a="".concat(s," ").concat(l);n[s]=l+1;l=c(a),o={css:o[1],media:o[2],sourceMap:o[3]};-1!==l?(u[l].references++,u[l].updater(o)):u.push({identifier:a,updater:function(t,e){var n,r,i;{var o;i=e.singleton?(o=m++,n=d=d||f(e),r=h.bind(null,n,o,!1),h.bind(null,n,o,!0)):(n=f(e),r=function(e,t,n){var r=n.css,i=n.media,n=n.sourceMap;i?e.setAttribute("media",i):e.removeAttribute("media");n&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */"));if(e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}.bind(null,n,e),function(){var e;null!==(e=n).parentNode&&e.parentNode.removeChild(e)})}return r(t),function(e){e?e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap||r(t=e):i()}}(o,t),references:1}),r.push(a)}return r}function f(e){var t,n=document.createElement("style"),r=e.attributes||{};if(void 0!==r.nonce||(t=i.nc)&&(r.nonce=t),Object.keys(r).forEach(function(e){n.setAttribute(e,r[e])}),"function"==typeof e.insert)e.insert(n);else{e=o(e.insert||"head");if(!e)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");e.appendChild(n)}return n}var s,p=(s=[],function(e,t){return s[e]=t,s.filter(Boolean).join("\n")});function h(e,t,n,r){n=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;e.styleSheet?e.styleSheet.cssText=p(t,n):(r=document.createTextNode(n),(n=e.childNodes)[t]&&e.removeChild(n[t]),n.length?e.insertBefore(r,n[t]):e.appendChild(r))}var d=null,m=0;e.exports=function(e,o){(o=o||{}).singleton||"boolean"==typeof o.singleton||(o.singleton=l());var s=a(e=e||[],o);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var t=0;t<s.length;t++){var n=c(s[t]);u[n].references--}for(var e=a(e,o),r=0;r<s.length;r++){var i=c(s[r]);0===u[i].references&&(u[i].updater(),u.splice(i,1))}s=e}}}},933:function(){var t;(function(){window.up={version:"0.62.1"}}).call(this),function(){var t,e,n,r,i,o,s,l,a,u,c,f,p,h,d,m,g,v,y,A,b,C,w,x,k,S,E,M,T,B,L,O,F,D,N,P,W,R,z,H,I,U,j,q,K,_,V,G,X,Q,$,Y,Z,J,ee,te,ne,re,ie,oe,se,le,ae,ue,ce,fe,pe,he,de,me,ge,ve,ye,Ae,be,Ce,we,xe,ke,Se,Ee,Me,Te,Be,Le,Oe,Fe,De,Ne,Pe,We,Re,ze,He,Ie,Ue,je,qe,Ke,_e=[].slice,Ve={}.hasOwnProperty;up.util=(be=function(){},Ce=function(){return Promise.resolve()},we=function(t){var n=void 0,r=!1;return function(){var e=1<=arguments.length?_e.call(arguments,0):[];return r?n:(r=!0,n=t.apply(null,e))}},xe=function(e,t){return(""===(t=t.toString())||"80"===t)&&"http:"===e||"443"===t&&"https:"===e},ke=function(e,t){var n=Ee(e),r=n.protocol+"//"+n.hostname;return xe(n.protocol,n.port)||(r+=":"+n.port),e=n.pathname,!0===(null!=t?t.stripTrailingSlash:void 0)&&(e=e.replace(/\/$/,"")),r+=e,!1!==(null!=t?t.search:void 0)&&(r+=n.search),!0===(null!=t?t.hash:void 0)&&(r+=n.hash),r},Se=function(e){var t=Ee(location.href);return e=Ee(e),t.protocol!==e.protocol||t.hostname!==e.hostname},Ee=function(e){var t;return P(e)?t=up.element.get(e):e.pathname?t=e:(t=document.createElement("a")).href=e,t.hostname||(t.href=t.href),"/"!==t.pathname[0]&&((t=J(t,"protocol","hostname","port","pathname","search","hash")).pathname="/"+t.pathname),t},Me=function(e){return e?e.toUpperCase():"GET"},Te=function(e){return"GET"!==e&&"HEAD"!==e},Be=function(){for(var e,t,n,r=arguments[0],i=2<=arguments.length?_e.call(arguments,1):[],o=0,s=i.length;o<s;o++)for(e in t=i[o])Ve.call(t,e)&&(n=t[e],r[e]=n);return r},Le=Object.assign||Be,Oe=function(e){var t,n,r=[];for(t in e)n=e[t],r.push(n);return r},Fe=Object.values||Oe,De=function(t){return q(t)?function(e){return e[t]}:t},Pe=function(e,t){var n=function(e,t){return e[t[0]]=t[1],e};return Ne(e,t).reduce(n,{})},We=Ne=function(e,t){var n,r,i,o,s;if(0===e.length)return[];for(t=De(t),s=[],r=n=0,o=e.length;n<o;r=++n)i=e[r],s.push(t(i,r));return s},Re=function(e,t){for(var n,r=[];(n=e.next())&&!n.done;)r.push(t(n.value));return r},ze=function(e,t){for(var n,r=[],i=n=0,o=e-1;0<=o?n<=o:o<=n;i=0<=o?++n:--n)r.push(t(i));return r},He=function(e){return null===e},Ie=function(e){return void 0===e},Ue=function(e){return!Ie(e)},je=function(e){return Ie(e)||He(e)},qe=function(e){return!je(e)},(Ke=function(e){return!!je(e)||(H(e)&&e[Ke.key]?e[Ke.key]():q(e)||W(e)?0===e.length:!!I(e)&&0===Object.keys(e).length)}).key="up.util.isBlank",ne=function(e,t){if(null==t&&(t=U),t(e))return e},U=function(e){return!Ke(e)},D=function(e){return"function"==typeof e},q=function(e){return"string"==typeof e||e instanceof String},T=function(e){return"boolean"==typeof e||e instanceof Boolean},z=function(e){return"number"==typeof e||e instanceof Number},I=function(e){return"object"==typeof e&&!He(e)&&(Ie(e.constructor)||e.constructor===Object)},H=function(e){var t=typeof e;return"object"==t&&!He(e)||"function"==t},B=function(e){return e instanceof Element},P=function(e){return!(null==e||!e.jquery)},j=function(e){return H(e)&&D(e.then)},E=Array.isArray,F=function(e){return e instanceof FormData},me=function(e){return E(e)?e:Array.prototype.slice.call(e)},W=function(e){return E(e)||R(e)||S(e)||P(e)||N(e)},R=function(e){return e instanceof NodeList},N=function(e){return e instanceof HTMLCollection},S=function(e){return"[object Arguments]"===Object.prototype.toString.call(e)},Ae=function(e){return W(e)?e:je(e)?[]:[e]},(o=function(e,t){var n,r,i;if(H(e)&&e[o.key]?e=e[o.key]():W(e)?(e=Array.prototype.slice.call(e),n=!0):I(e)&&(e=Le({},e),n=!0),n&&t)for(r in e)i=e[r],e[r]=o(i,!0);return e}).key="up.util.copy",Date.prototype[o.key]=function(){return new Date(+this)},s=function(e){return o(e,!0)},X=function(){var e=1<=arguments.length?_e.call(arguments,0):[];return Le.apply(null,[{}].concat(_e.call(e)))},Y=function(e,t){return t?X(t,e):e?o(e):{}},y=function(e,t){for(var n,r=void 0,i=0,o=e.length;i<o;i++)if(t(n=e[i])){r=n;break}return r},he=function(e,t){return!!A(e,t)},A=function(e,t){var n,r,i,o;for(t=De(t),r=n=0,i=e.length;n<i;r=++n)if(o=t(e[r],r))return o},f=function(e,t){var n,r,i,o;for(t=De(t),o=!0,r=n=0,i=e.length;n<i;r=++n)if(!t(e[r],r)){o=!1;break}return o},r=function(e){return v(e,qe)},ge=function(e){return e.length<2?e:pe(n(e))},ve=function(e,n){var r;return e.length<2?e:(n=De(n),r=new Set,v(e,function(e,t){t=n(e,t);return!r.has(t)&&(r.add(t),!0)}))},pe=function(e){var t=[];return e.forEach(function(e){return t.push(e)}),t},n=function(e){var t=new Set;return e.forEach(function(e){return t.add(e)}),t},v=function(e,n){var r;return n=De(n),r=[],We(e,function(e,t){if(n(e,t))return r.push(e)}),r},se=function(e,n){return n=De(n),v(e,function(e,t){return!n(e,t)})},k=function(e,t){return v(e,function(e){return i(t,e)})},ce=function(e,t){return setTimeout(t,e)},oe=function(e){return setTimeout(e,0)},ie=function(e){return Promise.resolve().then(e)},G=function(e){return e[e.length-1]},a=function(e){e=e.key;return"Escape"===e||"Esc"===e},i=function(e,t){return 0<=e.indexOf(t)},J=function(){for(var e,t=arguments[0],n=2<=arguments.length?_e.call(arguments,1):[],r={},i=0,o=n.length;i<o;i++)(e=n[i])in t&&(r[e]=t[e]);return r},p=function(){for(var e=arguments[0],t=2<=arguments.length?_e.call(arguments,1):[],n=o(e),r=0,i=t.length;r<i;r++)delete n[t[r]];return n},_=function(e){return!(e.metaKey||e.shiftKey||e.ctrlKey)},V=function(e){return(Ie(e.button)||0===e.button)&&_(e)},ye=function(){return new Promise(be)},ae=function(e,t){var n=e.indexOf(t);if(0<=n)return e.splice(n,1),t},c=function(){var e=arguments[0],t=2<=arguments.length?_e.call(arguments,1):[];return D(e)?e.apply(null,t):e},g=function(){var e,t=1<=arguments.length?_e.call(arguments,0):[],n=E(t[0])?(e=t[0],t[1]||{}):(e=t,{});throw(t=up.log).error.apply(t,e),up.event.onReady(function(){return up.toast.open(e,n)}),t=(t=up.log).sprintf.apply(t,e),new Error(t)},t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},l=function(e){return e.replace(/[&<>"]/g,function(e){return t[e]})},u=function(e){return e.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")},te=function(e,t){var n=e[t];return delete e[t],n},ue=function(e,t,n){return e[n]=te(e,t)},d=function(e,t){if(t(G(e)))return e.pop()},h=function(e){return d(e,D)},m=function(e){return d(e,I)||{}},ee=function(){var t=arguments[0],n=2<=arguments.length?_e.call(arguments,1):[];return function(){var e=1<=arguments.length?_e.call(arguments,0):[];return t.apply(this,n.concat(e))}},x=function(e){return e},re=function(t){var n=$(),e=function(){var e=1<=arguments.length?_e.call(arguments,0):[],e=t.apply(null,e);return n.resolve(e),e};return e.promise=n.promise(),e},fe=function(e){return 1===e.length?e[0]:function(){return Ne(e,function(e){return e()})}},w=function(e){e=e.getBoundingClientRect();return e.left+.5*e.width<.5*up.viewport.rootWidth()?"left":"right"},C=function(e){for(var t,n=[],r=0,i=e.length;r<i;r++)t=e[r],W(t)?n.push.apply(n,t):n.push(t);return n},b=function(e,t){return C(Ne(e,t))},K=function(e){return!!e},e=function(e,t){return e.then(t,t)},Q=function(e){return null!=e?e.catch(be):void 0},$=function(){var n=void 0,r=void 0,e=new Promise(function(e,t){return n=e,r=t});return e.resolve=n,e.reject=r,e.promise=function(){return e},e},le=function(e){try{return e()}catch(e){return Promise.reject(e)}},de=function(e,t){var n,r,i,o;for(t=De(t),r=o=0,i=e.length;r<i;r++)n=t(e[r]),qe(n)&&(o+=n);return o},M=function(e){return Object.prototype.hasOwnProperty(e)},(L=function(t,n){var e,r;return null!=t&&t.valueOf&&(t=t.valueOf()),null!=n&&n.valueOf&&(n=n.valueOf()),typeof t==typeof n&&(W(t)&&W(n)?O(t,n):H(t)&&t[L.key]?t[L.key](n):I(t)&&I(n)?(e=Object.keys(t),r=Object.keys(n),!!O(e,r)&&f(e,function(e){return L(t[e],n[e])})):t===n)}).key="up.util.isEqual",O=function(e,n){return e.length===n.length&&f(e,function(e,t){return L(e,n[t])})},Oe=function(e,t){return null==t&&(t=" "),t=e.split(t),t=Ne(t,function(e){return e.trim()}),t=v(t,U)},Z=0,{parseUrl:Ee,normalizeUrl:ke,normalizeMethod:Me,methodAllowsPayload:Te,assign:Le,assignPolyfill:Be,copy:o,deepCopy:s,merge:X,options:Y,fail:g,each:We,eachIterator:Re,map:Ne,flatMap:b,mapObject:Pe,times:ze,findResult:A,some:he,any:function(){return up.legacy.warn("up.util.any() has been renamed to up.util.some()"),he.apply(null,arguments)},every:f,all:function(){return up.legacy.warn("up.util.all() has been renamed to up.util.every()"),f.apply(null,arguments)},detect:function(){return up.legacy.warn("up.util.find() has been renamed to up.util.find()"),y.apply(null,arguments)},find:y,select:function(){return up.legacy.warn("up.util.select() has been renamed to up.util.filter()"),v.apply(null,arguments)},filter:v,reject:se,intersect:k,compact:r,uniq:ge,uniqBy:ve,last:G,isNull:He,isDefined:Ue,isUndefined:Ie,isGiven:qe,isMissing:je,isPresent:U,isBlank:Ke,presence:ne,isObject:H,isFunction:D,isString:q,isBoolean:T,isNumber:z,isElement:B,isJQuery:P,isPromise:j,isOptions:I,isArray:E,isFormData:F,isNodeList:R,isArguments:S,isList:W,isUnmodifiedKeyEvent:_,isUnmodifiedMouseEvent:V,timer:ce,setTimer:function(){return up.legacy.warn("up.util.setTimer() has been renamed to up.util.timer()"),ce.apply(null,arguments)},escapePressed:a,contains:i,toArray:me,only:J,except:p,unresolvablePromise:ye,remove:ae,memoize:we,error:g,pluckKey:te,renameKey:ue,extractOptions:m,extractCallback:h,noop:be,asyncNoop:Ce,identity:x,escapeHtml:l,escapeRegexp:u,sequence:fe,previewable:re,evalOption:c,horizontalScreenHalf:w,flatten:C,isTruthy:K,newDeferred:$,always:e,muteRejection:Q,rejectOnError:le,isBasicObjectProperty:M,isCrossDomain:Se,selectorForElement:function(){return up.legacy.warn("up.util.selectorForElement() has been renamed to up.element.toSelector()"),up.element.toSelector.apply(null,arguments)},nextFrame:function(){return up.legacy.warn("up.util.nextFrame() has been renamed to up.util.task()"),oe.apply(null,arguments)},task:oe,microtask:ie,isEqual:L,splitValues:Oe,endsWith:function(e,t){return!(t.length>e.length)&&e.substring(e.length-t.length)===t},sum:de,wrapList:Ae,wrapValue:function(e,t){return e instanceof t?e:new t(e)},simpleEase:function(e){return e<.5?2*e*e:e*(4-2*e)-1},values:Fe,partial:ee,arrayToSet:n,setToArray:pe,uid:function(){return Z++}}),up.fail=up.util.fail}.call(this),function(){var r,i,o=[].slice,s=up.util;up.legacy=(r={},{renamedModule:function(e,t){return Object.defineProperty(up,e,{get:function(){return i("up."+e+" has been renamed to up."+t),up[t]}})},fixKey:function(e,t,n){if(t in e)return i("Property { %s } has been renamed to { %s } (found in %o)",t,n,e),s.renameKey(e,t,n)},warn:i=function(){var e,t=arguments[0],n=2<=arguments.length?o.call(arguments,1):[];if(t="[DEPRECATION] "+t,t=(e=up.log).sprintf.apply(e,[t].concat(o.call(n))),!r[t])return r[t]=!0,up.warn(t)}})}.call(this),function(){var n,e,t,r,i,o,s,l,a,u,c,f,p,h,d,m,g,v,y,A=[].slice;up.browser=(n=up.util,e=function(e,t){e=n.merge(t,{url:e});return new up.Request(e).navigate()},t=function(e){return e.submit()},r=function(){return location.href},i=n.memoize(function(){return!window.atob}),o=n.memoize(function(){return"ActiveXObject"in window}),s=function(){return n.isDefined(history.pushState)&&"get"===up.protocol.initialRequestMethod()},l=n.memoize(function(){return"transition"in document.documentElement.style}),a=n.memoize(function(){return"oninput"in document.createElement("input")}),u=n.memoize(function(){return!!window.Promise}),c=n.memoize(function(){return!!window.FormData}),f=n.memoize(function(){return c()&&!!FormData.prototype.entries}),p=n.memoize(function(){return!!window.DOMParser}),h=n.memoize(function(){return window.console&&console.debug&&console.info&&console.warn&&console.error&&console.group&&console.groupCollapsed&&console.groupEnd}),d=n.memoize(function(){return!!window.customElements}),m=n.memoize(function(){return"requestAnimationFrame"in window}),g=n.memoize(function(){return"scrollRestoration"in history}),y=function(){return!i()&&h()&&p()&&c()&&l()&&a()&&u()&&m()},{url:r,navigate:e,submitForm:t,canPushState:s,canFormData:c,canInspectFormData:f,canCustomElements:d,canControlScrollRestoration:g,canJQuery:v=function(){return!!window.jQuery},whenConfirmed:function(e){return e.preload||n.isBlank(e.confirm)||window.confirm(e.confirm)?Promise.resolve():Promise.reject(new Error("User canceled action"))},isSupported:y,popCookie:function(e){var t=null!=(t=document.cookie.match(new RegExp(e+"=(\\w+)")))?t[1]:void 0;return n.isPresent(t)&&(document.cookie=e+"=; expires=Thu, 01-Jan-70 00:00:01 GMT; path=/"),t},jQuery:function(){var e=1<=arguments.length?A.call(arguments,0):[];return v()||up.fail("jQuery must be published as window.jQuery"),jQuery.apply(null,e)},isIE11:o})}.call(this),function(){var n,t,r;function e(e,t){this.selector=e,this.filterFn=t}n=up.util,up.Selector=(t=new RegExp("\\:has\\(([^\\)]+)\\)$"),r=up.browser.isIE11()?"msMatchesSelector":"matches",e.prototype.matches=function(e){var t=e[r](this.selector);return this.filterFn&&(t=t&&this.filterFn(e)),t},e.prototype.descendants=function(e){e=e.querySelectorAll(this.selector);return this.filterFn&&(e=n.filter(e,this.filterFn)),e},e.prototype.descendant=function(e){var t;return this.filterFn?(t=e.querySelectorAll(this.selector),n.find(t,this.filterFn)):e.querySelector(this.selector)},e.prototype.subtree=function(e){var t=[];return this.matches(e)&&t.push(e),t.push.apply(t,this.descendants(e)),t},e.prototype.closest=function(e){return e.closest&&!this.filterFn?e.closest(this.selector):this.closestPolyfill(e)},e.prototype.closestPolyfill=function(e){return this.matches(e,this.selector)?e:this.ancestor(e)},e.prototype.ancestor=function(e){if(e=e.parentElement)return this.matches(e)?e:this.ancestor(e)},e.parse=function(e){var n=null;return new this(e=e.replace(t,function(e,t){return n=function(e){return e.querySelector(t)},""}),n)},e)}.call(this),function(){var g,e,n,t,r,i,o,s,l,a,u,c,f,p,h,d,m,v,y,A,b,C,w,x,k,S,E,M,T,B,L,O,F,D,N,P,W,R,z,H,I,U,j,q,K,_,V,G,X,Q,$,Y=[].slice;up.element=(g=up.util,e={getAttribute:function(){}},n=function(e){return up.Selector.parse(e)},t=function(){var e=1<=arguments.length?Y.call(arguments,0):[],t=e.pop(),e=null!=(e=e[0])?e:document;return n(t).descendant(e)},r=function(){var e=1<=arguments.length?Y.call(arguments,0):[],t=e.pop(),e=null!=(e=e[0])?e:document;return n(t).descendants(e)},i=function(e,t){return n(t).subtree(e)},o=function(e,t){return n(t).closest(e)},s=function(e,t){return n(t).matches(e)},l=function(e,t){return n(t).ancestor(e)},a=function(e){return g.isElement(e)?e:g.isString(e)?t(e):g.isJQuery(e)?(1<e.length&&up.fail("up.element.get(): Cannot cast multiple elements (%o) to a single element",e),e[0]):e},u=function(){var e=1<=arguments.length?Y.call(arguments,0):[];return g.flatMap(e,c)},c=function(e){return g.isString(e)?r(e):g.wrapList(e)},f=function(e){var t;return e.remove?e.remove():(t=e.parentNode)?t.removeChild(e):void 0},p=function(e){return e.style.display="none"},h=function(e){return e.style.display=""},d=function(e,t){return null==t&&(t=!$(e)),(t?h:p)(e)},m=function(e,t,n){e=e.classList;return null==n&&(n=!e.contains(t)),n?e.add(t):e.remove(t)},v=function(e,t){var n,r,i=[];for(n in t)r=t[n],i.push(e.setAttribute(n,r));return i},y=function(e){var e="meta"+E("name",e);return null!=(e=t(e))?e.getAttribute("content"):void 0},A=function(e,t){return e.insertAdjacentElement("beforebegin",t)},b=function(e,t){return e.parentElement.replaceChild(t,e)},C=function(e,t){for(var n,r,i,o,s,l,a,u=[],c=e.replace(/\[([\w-]+)(?:=(["'])?([^"'\]]*?)\2)?\]/g,function(e,t,n,r){return u.push(r||""),"["+t+"]"}).split(/[ >]+/),f=void 0,p=void 0,h=void 0,d=0,m=c.length;d<m;d++){if(n=c[d],l=void 0,n=n.replace(/^[\w-]+/,function(e){return l=e,""}),p=document.createElement(l||"div"),f=f||p,n=(n=n.replace(/\#([\w-]+)/,function(e,t){return p.id=t,""})).replace(/\.([\w-]+)/g,function(e,t){return p.classList.add(t),""}),u.length&&(n=n.replace(/\[([\w-]+)\]/g,function(e,t){return p.setAttribute(t,u.shift()),""})),""!==n)throw new Error("Cannot parse selector: "+e);null!=h&&h.appendChild(p),h=p}if(t){if(a=g.pluckKey(t,"class"))for(r=0,o=(s=g.wrapList(a)).length;r<o;r++)i=s[r],f.classList.add(i);(a=g.pluckKey(t,"style"))&&V(f,a),(a=g.pluckKey(t,"text"))&&(f.innerText=a),v(f,t)}return f},w=function(e,t,n){n=C(t,n);return e.appendChild(n),n},x=function(e){var t,n,r,i,o;if(g.isString(e))return e;if(e=a(e),i=void 0,k(e))i=S(e);else if(o=e.getAttribute("up-id"))i=E("up-id",o);else if(o=e.getAttribute("id"))i=o.match(/^[a-z0-9\-_]+$/i)?"#"+o:E("id",o);else if(o=e.getAttribute("name"))i=S(e)+E("name",o);else if(t=g.presence(M(e)))for(i="",n=0,r=t.length;n<r;n++)i+="."+t[n];else i=(o=e.getAttribute("aria-label"))?E("aria-label",o):S(e);return i},k=function(e){return s(e,"html, body, head, title")},S=function(e){return e.tagName.toLowerCase()},E=function(e,t){return"["+e+'="'+(t=t.replace(/"/g,'\\"'))+'"]'},M=function(e){var e=e.className,e=g.splitValues(e);return g.reject(e,function(e){return e.match(/^up-/)})},T=function(e){return(new DOMParser).parseFromString(e,"text/html")},B=function(e){return T(e).body.children[0]},L=function(){return document.documentElement},O=function(e){return e.offsetHeight},F=function(e){var t=U(e,{transition:"none"});return O(e),t},D=function(e){var t=g.isOptions(e)?e:j(e),e=t.transitionProperty,t=t.transitionDuration;return!("none"===e||"all"===e&&0===t)},N=function(e){var t,n=e.getBoundingClientRect();return e.style.position="absolute",t=e.offsetParent.getBoundingClientRect(),V(e,{left:n.left-q(e,"margin-left")-t.left,top:n.top-q(e,"margin-top")-t.top,right:"",bottom:""})},P=function(e,t){var n,r,i=[];for(n in t)r=t[n],g.isMissing(e.getAttribute(n))?i.push(e.setAttribute(n,r)):i.push(void 0);return i},W=function(t){var n=t.parentNode,e=g.toArray(t.childNodes);return g.each(e,function(e){return n.insertBefore(e,t)}),n.removeChild(t)},R=function(e,t,n){var r=e.getAttribute(t);switch(r){case"false":return!1;case"true":case"":case t:return!0;default:if(n)return r}},z=function(e,t){return R(e,t,!0)},H=function(e,t){t=e.getAttribute(t);if(null!=t&&t.match(/^[\d\.]+$/))return parseFloat(t)},I=function(e,t){var n;if(n="function"==typeof e.getAttribute&&null!=(n=e.getAttribute(t))?n.trim():void 0)return JSON.parse(n)},U=function(e,t,n){var r=K(e,Object.keys(t));return V(e,t),function(){return V(e,r)}},j=function(e,t){e=window.getComputedStyle(e);return _(e,t)},q=function(e,t){t=j(e,t);if(g.isGiven(t))return parseFloat(t)},K=function(e,t){e=e.style;return _(e,t)},_=function(e,t){return g.isString(t)?e[t]:g.only.apply(g,[e].concat(Y.call(t)))},V=function(e,t){var n,r,i=e.style,o=[];for(n in t)r=t[n],r=G(n,r),o.push(i[n]=r);return o},G=function(e,t){return g.isMissing(t)?t="":X.has(e.toLowerCase().replace(/-/,""))&&(t=Q(t)),t},X=g.arrayToSet(["top","right","bottom","left","padding","paddingtop","paddingright","paddingbottom","paddingleft","margin","margintop","marginright","marginbottom","marginleft","borderwidth","bordertopwidth","borderrightwidth","borderbottomwidth","borderleftwidth","width","height","maxwidth","maxheight","minwidth","minheight"]),Q=function(e){return g.isNumber(e)||g.isString(e)&&/^\d+$/.test(e)?e.toString()+"px":e},{first:t,all:r,subtree:i,closest:o,matches:s,ancestor:l,get:a,list:u,remove:f,toggle:d,toggleClass:m,hide:p,show:h,metaContent:y,replace:b,insertBefore:A,createFromSelector:C,setAttrs:v,affix:w,toSelector:x,isSingleton:k,attributeSelector:E,createDocumentFromHtml:T,createFromHtml:B,root:L,paint:O,concludeCssTransition:F,hasCssTransition:D,fixedToAbsolute:N,setMissingAttrs:P,unwrap:W,booleanAttr:R,numberAttr:H,jsonAttr:I,booleanOrStringAttr:z,setTemporaryStyle:U,style:j,styleNumber:q,inlineStyle:K,setStyle:V,resolveSelector:function(e,t){var n;return g.isString(e)?(n=e,g.contains(n,"&")&&(g.isPresent(t)?(t=x(t),n=n.replace(/\&/,t)):up.fail("Found origin reference (%s) in selector %s, but no origin was given","&",n))):n=x(e),n},none:function(){return e},isVisible:$=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}})}.call(this),function(){var u;function e(){this.unshiftFns=[]}u=up.element,up.BodyShifter=(e.prototype.shift=function(){var e,t,n,r,i,o,s,l=up.viewport.rootHasVerticalScrollbar(),a=up.viewport.rootOverflowElement();if(this.unshiftFns.push(u.setTemporaryStyle(a,{overflowY:"hidden"})),l){for(a=document.body,l=(s=up.viewport.scrollbarWidth())+u.styleNumber(a,"paddingRight"),this.unshiftFns.push(u.setTemporaryStyle(a,{paddingRight:l})),o=[],n=0,r=(i=up.viewport.anchoredRight()).length;n<r;n++)e=i[n],t=s+u.styleNumber(e,"right"),o.push(this.unshiftFns.push(u.setTemporaryStyle(e,{right:t})));return o}},e.prototype.unshift=function(){for(var e,t=[];e=this.unshiftFns.pop();)t.push(e());return t},e)}.call(this),function(){function t(e,t){return function(){return e.apply(t,arguments)}}var o,n=[].slice;function e(e){this.config=null!=e?e:{},this.get=t(this.get,this),this.isFresh=t(this.isFresh,this),this.remove=t(this.remove,this),this.set=t(this.set,this),this.timestamp=t(this.timestamp,this),this.alias=t(this.alias,this),this.makeRoomForAnotherKey=t(this.makeRoomForAnotherKey,this),this.keys=t(this.keys,this),this.log=t(this.log,this),this.clear=t(this.clear,this),this.isCachable=t(this.isCachable,this),this.isEnabled=t(this.isEnabled,this),this.normalizeStoreKey=t(this.normalizeStoreKey,this),this.expiryMillis=t(this.expiryMillis,this),this.maxKeys=t(this.maxKeys,this),this.store=this.config.store||new up.store.Memory}o=up.util,up.Cache=(e.prototype.maxKeys=function(){return o.evalOption(this.config.size)},e.prototype.expiryMillis=function(){return o.evalOption(this.config.expiry)},e.prototype.normalizeStoreKey=function(e){return this.config.key?this.config.key(e):e.toString()},e.prototype.isEnabled=function(){return 0!==this.maxKeys()&&0!==this.expiryMillis()},e.prototype.isCachable=function(e){return!this.config.cachable||this.config.cachable(e)},e.prototype.clear=function(){return this.store.clear()},e.prototype.log=function(){var e=1<=arguments.length?n.call(arguments,0):[];if(this.config.logPrefix)return e[0]="["+this.config.logPrefix+"] "+e[0],up.puts.apply(up,e)},e.prototype.keys=function(){return this.store.keys()},e.prototype.makeRoomForAnotherKey=function(){var n,r,i,e=o.copy(this.keys()),t=this.maxKeys();if(t&&e.length>=t&&(r=n=void 0,o.each(e,(i=this,function(e){var t=i.store.get(e).timestamp;if(!r||t<r)return n=e,r=t})),n))return this.store.remove(n)},e.prototype.alias=function(e,t){e=this.get(e,{silent:!0});if(o.isDefined(e))return this.set(t,e)},e.prototype.timestamp=function(){return(new Date).valueOf()},e.prototype.set=function(e,t){if(this.isEnabled()&&this.isCachable(e))return this.makeRoomForAnotherKey(),e=this.normalizeStoreKey(e),this.log("Setting entry %o to %o",e,t),t={timestamp:this.timestamp(),value:t},this.store.set(e,t)},e.prototype.remove=function(e){if(this.isCachable(e))return e=this.normalizeStoreKey(e),this.store.remove(e)},e.prototype.isFresh=function(e){var t=this.expiryMillis();return!t||this.timestamp()-e.timestamp<t},e.prototype.get=function(e,t){var n;if(null==t&&(t={}),this.isCachable(e)&&(n=this.store.get(this.normalizeStoreKey(e)))){if(this.isFresh(n))return t.silent||this.log("Cache hit for '%s'",e),n.value;t.silent||this.log("Discarding stale cache entry for '%s'",e),this.remove(e)}else t.silent||this.log("Cache miss for '%s'",e)},e)}.call(this),function(){var t,n=[].slice;function e(e){t.assign(this,this.attributes(e))}t=up.util,up.Record=(e.prototype.fields=function(){throw"Return an array of property names"},e.prototype.attributes=function(e){return null==e&&(e=this),t.only.apply(t,[e].concat(n.call(this.fields())))},e.prototype[""+t.copy.key]=function(){return this.variant()},e.prototype.variant=function(e){return null==e&&(e={}),e=t.merge(this.attributes(),e),new this.constructor(e)},e.prototype[""+t.isEqual.key]=function(e){return e&&this.constructor===e.constructor&&t.isEqual(this.attributes(),e.attributes())},e)}.call(this),function(){var t,f;function e(e,t,n){var r,i;this.root=e,this.compilers=t,null==n&&(n={}),this.isInSkippedSubtree=(r=this.isInSkippedSubtree,i=this,function(){return r.apply(i,arguments)}),this.skipSubtrees=n.skip,this.skipSubtrees.length&&this.root.querySelector("[up-keep]")||(this.skipSubtrees=void 0)}f=up.util,t=up.element,up.CompilePass=(e.prototype.compile=function(){return up.log.group("Compiling fragment %o",this.root,(o=this,function(){for(var e,t=o.compilers,n=[],r=0,i=t.length;r<i;r++)e=t[r],n.push(o.runCompiler(e));return n}));var o},e.prototype.runCompiler=function(a){var u,c=this.select(a.selector);if(c.length)return up.log.group(a.isDefault?void 0:"Compiling '%s' on %d element(s)",a.selector,c.length,(u=this,function(){var e,t,n,r,i,o,s,l;if(a.batch)u.compileBatch(a,c);else for(e=0,r=c.length;e<r;e++)o=c[e],u.compileOneElement(a,o);if(n=a.keep){for(l=f.isString(n)?n:"",s=[],t=0,i=c.length;t<i;t++)o=c[t],s.push(o.setAttribute("up-keep",l));return s}}))},e.prototype.compileOneElement=function(e,t){var n,r=[e.jQuery?up.browser.jQuery(t):t];if(1!==e.length&&(n=up.syntax.data(t),r.push(n)),r=e.apply(t,r),r=this.destructorPresence(r))return up.destructor(t,r)},e.prototype.compileBatch=function(e,t){var n,r=[e.jQuery?up.browser.jQuery(t):t];if(1!==e.length&&(n=f.map(t,up.syntax.data),r.push(n)),r=e.apply(t,r),this.destructorPresence(r))return up.fail("Compilers with { batch: true } cannot return destructors")},e.prototype.destructorPresence=function(e){if(f.isFunction(e)||f.isArray(e)&&f.every(e,f.isFunction))return e},e.prototype.select=function(e){return f.isFunction(e)&&(e=e()),e=t.subtree(this.root,e),this.skipSubtrees&&(e=f.reject(e,this.isInSkippedSubtree)),e},e.prototype.isInSkippedSubtree=function(e){return!!f.contains(this.skipSubtrees,e)||!!(e=e.parentElement)&&this.isInSkippedSubtree(e)},e)}.call(this),function(){var e;function t(e){this.blueprint=e,this.reset()}e=up.util,up.Config=(t.prototype.reset=function(){return e.assign(this,e.deepCopy(this.blueprint))},t)}.call(this),function(){function r(e,t){return function(){return e.apply(t,arguments)}}var t,i;function e(e,t,n){this.element=e,this.lastFrameKebab=t,this.startMotion=r(this.startMotion,this),this.resumeOldTransition=r(this.resumeOldTransition,this),this.pauseOldTransition=r(this.pauseOldTransition,this),this.finish=r(this.finish,this),this.onTransitionEnd=r(this.onTransitionEnd,this),this.listenToTransitionEnd=r(this.listenToTransitionEnd,this),this.stopFallbackTimer=r(this.stopFallbackTimer,this),this.startFallbackTimer=r(this.startFallbackTimer,this),this.onFinishEvent=r(this.onFinishEvent,this),this.listenToFinishEvent=r(this.listenToFinishEvent,this),this.start=r(this.start,this),this.lastFrameKeysKebab=Object.keys(this.lastFrameKebab),i.some(this.lastFrameKeysKebab,function(e){return e.match(/A-Z/)})&&up.fail("Animation keys must be kebab-case"),this.finishEvent=n.finishEvent,this.duration=n.duration,this.delay=n.delay,this.totalDuration=this.delay+this.duration,this.easing=n.easing,this.finished=!1}i=up.util,t=up.element,up.CssTransition=(e.prototype.start=function(){return 0===this.lastFrameKeysKebab.length?(this.finished=!0,Promise.resolve()):(this.deferred=i.newDeferred(),this.pauseOldTransition(),this.startTime=new Date,this.startFallbackTimer(),this.listenToFinishEvent(),this.listenToTransitionEnd(),this.startMotion(),this.deferred.promise())},e.prototype.listenToFinishEvent=function(){if(this.finishEvent)return this.stopListenToFinishEvent=this.element.addEventListener(this.finishEvent,this.onFinishEvent)},e.prototype.onFinishEvent=function(e){return e.stopPropagation(),this.finish()},e.prototype.startFallbackTimer=function(){var e;return this.fallbackTimer=i.timer(this.totalDuration+100,(e=this,function(){return e.finish()}))},e.prototype.stopFallbackTimer=function(){return clearTimeout(this.fallbackTimer)},e.prototype.listenToTransitionEnd=function(){return this.stopListenToTransitionEnd=up.on(this.element,"transitionend",this.onTransitionEnd)},e.prototype.onTransitionEnd=function(e){var t;if(e.target===this.element&&(t=new Date-this.startTime,t>.25*this.totalDuration&&(e=e.propertyName,i.contains(this.lastFrameKeysKebab,e))))return this.finish()},e.prototype.finish=function(){if(!this.finished)return this.finished=!0,this.stopFallbackTimer(),"function"==typeof this.stopListenToFinishEvent&&this.stopListenToFinishEvent(),"function"==typeof this.stopListenToTransitionEnd&&this.stopListenToTransitionEnd(),t.concludeCssTransition(this.element),this.resumeOldTransition(),this.deferred.resolve()},e.prototype.pauseOldTransition=function(){var e=t.style(this.element,["transitionProperty","transitionDuration","transitionDelay","transitionTimingFunction"]);if(t.hasCssTransition(e))return"all"!==e.transitionProperty&&(e=e.transitionProperty.split(/\s*,\s*/),e=t.style(this.element,e),this.setOldTransitionTargetFrame=t.setTemporaryStyle(this.element,e)),this.setOldTransition=t.concludeCssTransition(this.element)},e.prototype.resumeOldTransition=function(){return"function"==typeof this.setOldTransitionTargetFrame&&this.setOldTransitionTargetFrame(),"function"==typeof this.setOldTransition?this.setOldTransition():void 0},e.prototype.startMotion=function(){return t.setStyle(this.element,{transitionProperty:Object.keys(this.lastFrameKebab).join(", "),transitionDuration:this.duration+"ms",transitionDelay:this.delay+"ms",transitionTimingFunction:this.easing}),t.setStyle(this.element,this.lastFrameKebab)},e)}.call(this),function(){function e(e,t){return function(){return e.apply(t,arguments)}}var n,t=[].slice;function r(){this.asap=e(this.asap,this),this.poke=e(this.poke,this),this.allTasks=e(this.allTasks,this),this.promise=e(this.promise,this),this.reset=e(this.reset,this),this.reset()}n=up.util,up.DivertibleChain=(r.prototype.reset=function(){return this.queue=[],this.currentTask=void 0},r.prototype.promise=function(){var e=n.last(this.allTasks());return(null!=e?e.promise:void 0)||Promise.resolve()},r.prototype.allTasks=function(){var e=[];return this.currentTask&&e.push(this.currentTask),e=e.concat(this.queue)},r.prototype.poke=function(){var e,t;if(!this.currentTask&&(this.currentTask=this.queue.shift()))return e=this.currentTask(),n.always(e,(t=this,function(){return t.currentTask=void 0,t.poke()}))},r.prototype.asap=function(){var e=1<=arguments.length?t.call(arguments,0):[];return this.queue=n.map(e,n.previewable),this.poke(),this.promise()},r)}.call(this),function(){function o(e,t){return function(){return e.apply(t,arguments)}}var r,p;function e(e,t,n,r,i){this.element=e,this.eventName=t,this.selector=n,this.callback=r,null==i&&(i={}),this.nativeCallback=o(this.nativeCallback,this),this.unbind=o(this.unbind,this),this.jQuery=i.jQuery,this.key=this.constructor.key(this.eventName,this.selector,this.callback),this.isDefault=up.framework.isBooting()}p=up.util,r=up.element,up.EventListener=(e.prototype.bind=function(){var e=(e=this.element).upEventListeners||(e.upEventListeners={});return e[this.key]&&up.fail("up.on(): The %o callback %o cannot be registered more than once",this.eventName,this.callback),(e[this.key]=this).element.addEventListener(this.eventName,this.nativeCallback)},e.prototype.unbind=function(){var e;return(e=this.element.upEventListeners)&&delete e[this.key],this.element.removeEventListener(this.eventName,this.nativeCallback)},e.prototype.nativeCallback=function(e){var t,n=e.target;if(this.selector&&(n=r.closest(n,this.selector)),n)return t=[e,this.jQuery?up.browser.jQuery(n):n],1!==(e=this.callback.length)&&2!==e&&(e=up.syntax.data(n),t.push(e)),this.callback.apply(n,t)},e.parseArgs=function(e){var t;return(t=(e=p.copy(e)).pop()).upUid||(t.upUid=p.uid()),{elements:e[0].addEventListener?[e.shift()]:p.isJQuery(e[0])||p.isList(e[0])&&e[0][0].addEventListener?e.shift():[document],eventNames:p.splitValues(e.shift()),selector:e[0],callback:t}},e.bind=function(e,t){for(var n,r,i,o,s,l=this.parseArgs(e),a=[],u=l.elements,c=0,f=u.length;c<f;c++)for(n=u[c],r=0,i=(s=l.eventNames).length;r<i;r++)(o=new this(n,s[r],l.selector,l.callback,t)).bind(),a.push(o.unbind);return p.sequence(a)},e.key=function(e,t,n){return[e,t,n.upUid].join("|")},e.unbind=function(e){for(var t,i,o,s,l=this.parseArgs(e),n=l.elements,r=[],a=0,u=n.length;a<u;a++)t=n[a],s=t.upEventListeners,r.push(function(){for(var e=l.eventNames,t=[],n=0,r=e.length;n<r;n++)i=e[n],i=this.key(i,l.selector,l.callback),s&&(o=s[i])?t.push(o.unbind()):t.push(void 0);return t}.call(this));return r},e.unbindNonDefault=function(e){var t,n,r,i,o;if(e=e.upEventListeners){for(o=[],t=0,n=(i=p.values(e)).length;t<n;t++)(r=i[t]).isDefault?o.push(void 0):o.push(r.unbind());return o}},e)}.call(this),function(){function n(e,t){return function(){return e.apply(t,arguments)}}var i;function e(e,t){var r;this.oldPlanNotFound=n(this.oldPlanNotFound,this),this.matchingPlanNotFound=n(this.matchingPlanNotFound,this),this.bestMatchingSteps=n(this.bestMatchingSteps,this),this.bestPreflightSelector=n(this.bestPreflightSelector,this),this.detectPlan=n(this.detectPlan,this),this.matchingPlan=n(this.matchingPlan,this),this.newPlan=n(this.newPlan,this),this.oldPlan=n(this.oldPlan,this),this.options=i.options(t,{humanizedTarget:"selector",layer:"auto"}),null==(t=this.options).transition&&(t.transition=this.options.animation),null==(t=this.options).hungry&&(t.hungry=!0),this.candidates=this.buildCandidates(e),this.plans=i.map(this.candidates,(r=this,function(e,t){var n=i.copy(r.options);return 0<t&&(n.transition=null!=(t=up.fragment.config.fallbackTransition)?t:r.options.transition),new up.ExtractPlan(e,n)}))}i=up.util,up.ExtractCascade=(e.prototype.buildCandidates=function(e){e=[e,this.options.fallback,up.fragment.config.fallbacks];return e=i.flatten(e),e=i.filter(e,i.isTruthy),e=i.uniq(e),!1!==this.options.fallback&&!this.options.provideTarget||(e=[e[0]]),e},e.prototype.oldPlan=function(){return this.detectPlan("oldExists")},e.prototype.newPlan=function(){return this.detectPlan("newExists")},e.prototype.matchingPlan=function(){return this.detectPlan("matchExists")},e.prototype.detectPlan=function(t){return i.find(this.plans,function(e){return e[t]()})},e.prototype.bestPreflightSelector=function(){var e=this.options.provideTarget?this.plans[0]:this.oldPlan();return e?(e.resolveNesting(),e.selector()):this.oldPlanNotFound()},e.prototype.bestMatchingSteps=function(){var e;return(e=this.matchingPlan())?(e.addHungrySteps(),e.resolveNesting(),e.steps):this.matchingPlanNotFound()},e.prototype.matchingPlanNotFound=function(){var e,t;return this.newPlan()?this.oldPlanNotFound():(t=this.oldPlan()?"Could not find "+this.options.humanizedTarget+" in response":"Could not match "+this.options.humanizedTarget+" in current page and response",this.options.inspectResponse&&(e={label:"Open response",callback:this.options.inspectResponse}),up.fail([t+" (tried %o)",this.candidates],{action:e}))},e.prototype.oldPlanNotFound=function(){var e=this.options.layer;return"auto"===e&&(e="page, modal or popup"),up.fail("Could not find "+this.options.humanizedTarget+" in current "+e+" (tried %o)",this.candidates)},e)}.call(this),function(){function n(e,t){return function(){return e.apply(t,arguments)}}var u,o;function e(e,t){this.addHungrySteps=n(this.addHungrySteps,this),this.parseSteps=n(this.parseSteps,this),this.selector=n(this.selector,this),this.resolveNesting=n(this.resolveNesting,this),this.addSteps=n(this.addSteps,this),this.matchExists=n(this.matchExists,this),this.newExists=n(this.newExists,this),this.oldExists=n(this.oldExists,this),this.findNew=n(this.findNew,this),this.findOld=n(this.findOld,this),this.reveal=t.reveal,this.origin=t.origin,this.hungry=t.hungry,this.transition=t.transition,this.response=t.response,this.oldLayer=t.layer,e=u.resolveSelector(e,this.origin),this.parseSteps(e)}o=up.util,u=up.element,up.ExtractPlan=(e.prototype.findOld=function(){return o.each(this.steps,(t=this,function(e){return e.oldElement=up.fragment.first(e.selector,{layer:t.oldLayer})}));var t},e.prototype.findNew=function(){return o.each(this.steps,(t=this,function(e){return e.newElement=t.response.first(e.selector)}));var t},e.prototype.oldExists=function(){return this.findOld(),o.every(this.steps,function(e){return e.oldElement})},e.prototype.newExists=function(){return this.findNew(),o.every(this.steps,function(e){return e.newElement})},e.prototype.matchExists=function(){return this.oldExists()&&this.newExists()},e.prototype.addSteps=function(e){return this.steps=this.steps.concat(e)},e.prototype.resolveNesting=function(){var e;if(!(this.steps.length<2))return e=o.copy(this.steps),e=o.uniqBy(e,function(e){return e.oldElement}),(e=o.filter(e,function(r,i){return o.every(e,function(e,t){var n;return t===i||(n=r.oldElement,t=e.oldElement,e.pseudoClass||!t.contains(n))})}))[0].reveal=this.steps[0].reveal,this.steps=e},e.prototype.selector=function(){return o.map(this.steps,"expression").join(", ")},e.prototype.parseSteps=function(e){var i,t=/\ *,\ */;return this.steps=[],t=e.split(t),o.each(t,(i=this,function(e,t){var n,r=e.match(/^(.+?)(?:\:(before|after))?$/);return r||up.fail('Could not parse selector literal "%s"',e),"html"===(n=r[1])&&(n="body"),r=r[2],t=0===t&&i.reveal,i.steps.push({expression:e,selector:n,pseudoClass:r,transition:i.transition,origin:i.origin,reveal:t})}))},e.prototype.addHungrySteps=function(){var e,t,n,r,i,o,s,l,a=[];if(this.hungry)for(e=u.all(up.radio.hungrySelector()),l=null!=(o=up.radio.config.hungryTransition)?o:this.transition,n=0,r=e.length;n<r;n++)t=e[n],s=u.toSelector(t),(i=this.response.first(s))&&a.push({selector:s,oldElement:t,newElement:i,transition:l,reveal:!1,origin:null});return this.addSteps(a)},e)}.call(this),function(){function r(e,t){return function(){return e.apply(t,arguments)}}var i,u;function e(e,t,n){this.callback=n,this.check=r(this.check,this),this.readFieldValues=r(this.readFieldValues,this),this.requestCallback=r(this.requestCallback,this),this.isNewValues=r(this.isNewValues,this),this.scheduleValues=r(this.scheduleValues,this),this.scheduleTimer=r(this.scheduleTimer,this),this.cancelTimer=r(this.cancelTimer,this),this.stop=r(this.stop,this),this.start=r(this.start,this),this.fields=i.list(e),this.delay=t.delay,this.batch=t.batch}u=up.util,i=up.element,up.FieldObserver=(e.prototype.start=function(){return this.scheduledValues=null,this.processedValues=this.readFieldValues(),this.currentTimer=void 0,this.callbackRunning=!1,this.unbind=up.on(this.fields,"input change",this.check)},e.prototype.stop=function(){return this.unbind(),this.cancelTimer()},e.prototype.cancelTimer=function(){return clearTimeout(this.currentTimer),this.currentTimer=void 0},e.prototype.scheduleTimer=function(){return this.cancelTimer(),this.currentTimer=u.timer(this.delay,(e=this,function(){return e.currentTimer=void 0,e.requestCallback()}));var e},e.prototype.scheduleValues=function(e){return this.scheduledValues=e,this.scheduleTimer()},e.prototype.isNewValues=function(e){return!u.isEqual(e,this.processedValues)&&!u.isEqual(this.scheduledValues,e)},e.prototype.requestCallback=function(){var e,t,n,r,i,o;if(null!==this.scheduledValues&&!this.currentTimer&&!this.callbackRunning){if(n=this.changedValues(this.processedValues,this.scheduledValues),this.processedValues=this.scheduledValues,this.scheduledValues=null,this.callbackRunning=!0,e=[],this.batch)e.push(this.callback(n));else for(r in n)i=n[r],e.push(this.callback(i,r));return t=Promise.all(e),u.always(t,(o=this,function(){return o.callbackRunning=!1,o.requestCallback()}))}},e.prototype.changedValues=function(e,t){var n,r,i,o,s,l={},a=Object.keys(e);for(a=a.concat(Object.keys(t)),n=0,i=(a=u.uniq(a)).length;n<i;n++)s=e[r=a[n]],o=t[r],u.isEqual(s,o)||(l[r]=o);return l},e.prototype.readFieldValues=function(){return up.Params.fromFields(this.fields).toObject()},e.prototype.check=function(){var e=this.readFieldValues();if(this.isNewValues(e))return this.scheduleValues(e)},e)}.call(this),function(){}.call(this),function(){function n(e,t){return function(){return e.apply(t,arguments)}}var r,i,o=[].slice;function e(e,t){this.matchesLink=n(this.matchesLink,this),this.followLink=n(this.followLink,this),this.fullSelector=n(this.fullSelector,this),this.onMousedown=n(this.onMousedown,this),this.onClick=n(this.onClick,this),this.followNow=t.follow,this.preloadLink=t.preload,this.selectors=i.splitValues(e,",")}i=up.util,r=up.element,up.FollowVariant=(e.prototype.onClick=function(e,t){return up.link.shouldProcessEvent(e,t)?r.matches(t,"[up-instant]")&&t.upInstantSupported?(up.event.halt(e),void(t.upInstantSupported=!1)):(up.event.consumeAction(e),this.followLink(t)):up.link.allowDefault(e)},e.prototype.onMousedown=function(e,t){if(up.link.shouldProcessEvent(e,t))return t.upInstantSupported=!0,up.event.consumeAction(e),this.followLink(t)},e.prototype.fullSelector=function(s){var l;return null==s&&(s=""),l=[],this.selectors.forEach(function(e){for(var t,n=["a","[up-href]"],r=[],i=0,o=n.length;i<o;i++)t=n[i],r.push(l.push(""+t+e+s));return r}),l.join(", ")},e.prototype.registerEvents=function(){var t,n;return up.on("click",this.fullSelector(),(t=this,function(){var e=1<=arguments.length?o.call(arguments,0):[];return i.muteRejection(t.onClick.apply(t,e))})),up.on("mousedown",this.fullSelector("[up-instant]"),(n=this,function(){var e=1<=arguments.length?o.call(arguments,0):[];return i.muteRejection(n.onMousedown.apply(n,e))}))},e.prototype.followLink=function(e,t){var n,r;return null==t&&(t={}),n=(n=up.event.whenEmitted("up:link:follow",{log:"Following link",target:e})).then((r=this,function(){return t.preload||up.feedback.start(e),r.followNow(e,t)})),t.preload||i.always(n,function(){return up.feedback.stop(e)}),n},e.prototype.matchesLink=function(e){return r.matches(e,this.fullSelector())},e)}.call(this),function(){var t,r;function e(e){this.html=e,this.wrapNoscriptInHtml(),this.parsedDoc=t.createDocumentFromHtml(this.html)}r=up.util,t=up.element,up.HtmlParser=(e.prototype.title=function(){var e;return null!=(e=this.parsedDoc.querySelector("head title"))?e.textContent:void 0},e.prototype.first=function(e){return t.first(this.parsedDoc,e)},e.prototype.prepareForInsertion=function(e){return this.unwrapNoscriptInElement(e)},e.prototype.wrapNoscriptInHtml=function(){var n,e=/<noscript[^>]*>((.|\s)*?)<\/noscript>/gi;return this.html=this.html.replace(e,(n=this,function(e,t){return n.didWrapNoscript=!0,'<div class="up-noscript" data-html="'+r.escapeHtml(t)+'"></div>'}))},e.prototype.unwrapNoscriptInElement=function(e){var t,n,r,i,o,s,l;if(this.didWrapNoscript){for(i=[],t=0,n=(l=e.querySelectorAll(".up-noscript")).length;t<n;t++)o=(s=l[t]).getAttribute("data-html"),(r=document.createElement("noscript")).textContent=o,i.push(s.parentNode.replaceChild(r,s));return i}},e)}.call(this),function(){function t(e,t){return function(){return e.apply(t,arguments)}}var s,l;function e(e){this.reset=t(this.reset,this),this.whileForwardingFinishEvent=t(this.whileForwardingFinishEvent,this),this.unmarkCluster=t(this.unmarkCluster,this),this.markCluster=t(this.markCluster,this),this.whenElementFinished=t(this.whenElementFinished,this),this.emitFinishEvent=t(this.emitFinishEvent,this),this.finishOneElement=t(this.finishOneElement,this),this.isActive=t(this.isActive,this),this.expandFinishRequest=t(this.expandFinishRequest,this),this.finish=t(this.finish,this),this.startFunction=t(this.startFunction,this),this.activeClass="up-"+e,this.dataKey="up-"+e+"-finished",this.selector="."+this.activeClass,this.finishEvent="up:"+e+":finish",this.finishCount=0,this.clusterCount=0}l=up.util,s=up.element,up.MotionController=(e.prototype.startFunction=function(t,e,n){var r,i,o;return null==n&&(n={}),t=s.list(t),r=function(){return l.muteRejection(e())},n.trackMotion=null!=(i=n.trackMotion)?i:up.motion.isEnabled(),!1===n.trackMotion?l.microtask(r):(n.trackMotion=!1,this.finish(t).then((o=this,function(){var e=o.whileForwardingFinishEvent(t,r);return e=e.then(function(){return o.unmarkCluster(t)}),o.markCluster(t,e),e})))},e.prototype.startMotion=function(e,t,n){var r,i;return null==n&&(n={}),r=function(){return t.start()},i=function(){return t.finish()},i=up.on(e,this.finishEvent,i),this.startFunction(e,r,n).then(i)},e.prototype.finish=function(e){return this.finishCount++,0!==this.clusterCount&&up.motion.isEnabled()?(e=this.expandFinishRequest(e),e=l.map(e,this.finishOneElement),Promise.all(e)):Promise.resolve()},e.prototype.expandFinishRequest=function(e){return e?l.flatMap(e,(t=this,function(e){return s.list(s.closest(e,t.selector),s.all(e,t.selector))})):s.all(this.selector);var t},e.prototype.isActive=function(e){return e.classList.contains(this.activeClass)},e.prototype.finishOneElement=function(e){return this.emitFinishEvent(e),this.whenElementFinished(e)},e.prototype.emitFinishEvent=function(e,t){return null==t&&(t={}),t=l.merge({target:e,log:!1},t),up.emit(this.finishEvent,t)},e.prototype.whenElementFinished=function(e){return e[this.dataKey]||Promise.resolve()},e.prototype.markCluster=function(e,t){var n,r,i,o;for(this.clusterCount++,o=[],r=0,i=e.length;r<i;r++)(n=e[r]).classList.add(this.activeClass),o.push(n[this.dataKey]=t);return o},e.prototype.unmarkCluster=function(e){var t,n,r,i;for(this.clusterCount--,i=[],n=0,r=e.length;n<r;n++)(t=e[n]).classList.remove(this.activeClass),i.push(delete t[this.dataKey]);return i},e.prototype.whileForwardingFinishEvent=function(e,t){var n,r;return e.length<2?t():(r=this,n=function(t){if(!t.forwarded)return l.each(e,function(e){if(e!==t.target&&r.isActive(e))return r.emitFinishEvent(e,{forwarded:!0})})},n=up.on(e,this.finishEvent,n),t().then(n))},e.prototype.reset=function(){return this.finish().then((e=this,function(){return e.finishCount=0,e.clusterCount=0}));var e},e)}.call(this),function(){var d,l;function e(e){var t,n;this.arrayEntryToQuery=(t=this.arrayEntryToQuery,n=this,function(){return t.apply(n,arguments)}),this.clear(),this.addAll(e)}l=up.util,d=up.element,up.Params=(e.prototype.clear=function(){return this.entries=[]},e.prototype[""+l.copy.key]=function(){return new up.Params(this)},e.prototype.toObject=function(){for(var e,t,n={},r=this.entries,i=0,o=r.length;i<o;i++)e=(t=r[i]).name,t=t.value,l.isBasicObjectProperty(e)||(this.isArrayKey(e)?(n[e]||(n[e]=[]),n[e].push(t)):n[e]=t);return n},e.prototype.toArray=function(){return this.entries},e.prototype.toFormData=function(){for(var e,t=new FormData,n=this.entries,r=0,i=n.length;r<i;r++)e=n[r],t.append(e.name,e.value);return t},e.prototype.toQuery=function(){var e=l.map(this.entries,this.arrayEntryToQuery);return(e=l.compact(e)).join("&")},e.prototype.arrayEntryToQuery=function(e){var t=e.value;if(this.isPrimitiveValue(t))return e=encodeURIComponent(e.name),l.isGiven(t)&&(e+="=",e+=encodeURIComponent(t)),e},e.prototype.isPrimitiveValue=function(e){return l.isMissing(e)||l.isString(e)||l.isNumber(e)||l.isBoolean(e)},e.prototype.toURL=function(e){var t=[e,this.toQuery()];return t=l.filter(t,l.isPresent),e=l.contains(e,"?")?"&":"?",t.join(e)},e.prototype.add=function(e,t){return this.entries.push({name:e,value:t})},e.prototype.addAll=function(e){var t;return l.isMissing(e)||(e instanceof this.constructor?(t=this.entries).push.apply(t,e.entries):l.isArray(e)?(t=this.entries).push.apply(t,e):l.isString(e)?this.addAllFromQuery(e):l.isFormData(e)?this.addAllFromFormData(e):l.isObject(e)?this.addAllFromObject(e):up.fail("Unsupport params type: %o",e)),this},e.prototype.addAllFromObject=function(e){var r,t,i,o,n=[];for(r in e)t=e[r],o=l.isArray(t)?t:[t],n.push(function(){for(var e=[],t=0,n=o.length;t<n;t++)i=o[t],e.push(this.add(r,i));return e}.call(this));return n},e.prototype.addAllFromQuery=function(e){for(var t,n,r=e.split("&"),i=[],o=0,s=r.length;o<s;o++)(t=r[o])?(t=(n=t.split("="))[0],n=n[1],t=decodeURIComponent(t),n=l.isGiven(n)?decodeURIComponent(n):null,i.push(this.add(t,n))):i.push(void 0);return i},e.prototype.addAllFromFormData=function(e){return l.eachIterator(e.entries(),(t=this,function(e){return t.add.apply(t,e)}));var t},e.prototype.set=function(e,t){return this.delete(e),this.add(e,t)},e.prototype.delete=function(e){return this.entries=l.reject(this.entries,this.matchEntryFn(e))},e.prototype.matchEntryFn=function(t){return function(e){return e.name===t}},e.prototype.get=function(e){return this.isArrayKey(e)?this.getAll(e):this.getFirst(e)},e.prototype.getFirst=function(e){e=l.find(this.entries,this.matchEntryFn(e));return null!=e?e.value:void 0},e.prototype.getAll=function(e){return this.isArrayKey(e)?this.getAll(e):(e=l.map(this.entries,this.matchEntryFn(e)),l.map(e,"value"))},e.prototype.isArrayKey=function(e){return l.endsWith(e,"[]")},e.prototype[""+l.isBlank.key]=function(){return 0===this.entries.length},e.fromForm=function(e){if(e=d.get(e))return e=up.form.submissionFields(e),this.fromFields(e)},e.fromFields=function(e){for(var t,n=new this,r=l.wrapList(e),i=0,o=r.length;i<o;i++)t=r[i],n.addField(t);return n},e.prototype.addField=function(e){var t,n,r,i,o,s,l,a,u,c,f,p,h;new this.constructor;if((e=d.get(e))&&(s=e.name)&&!e.disabled){if(p=e.tagName,h=e.type,"SELECT"===p){for(c=[],n=0,i=(a=e.querySelectorAll("option")).length;n<i;n++)(l=a[n]).selected?c.push(this.add(s,l.value)):c.push(void 0);return c}if("checkbox"!==h&&"radio"!==h){if("file"!==h)return this.add(s,e.value);for(f=[],r=0,o=(u=e.files).length;r<o;r++)t=u[r],f.push(this.add(s,t));return f}if(e.checked)return this.add(s,e.value)}},e.prototype[""+l.isEqual.key]=function(e){return e&&this.constructor===e.constructor&&l.isEqual(this.entries,e.entries)},e.fromURL=function(e){var t=new this;return(e=l.parseUrl(e).search)&&(e=e.replace(/^\?/,""),t.addAll(e)),t},e.stripURL=function(e){return l.normalizeUrl(e,{search:!1})},e.wrap=function(e){return l.wrapValue(e,this)},e)}.call(this),t=up.util,up.Rect=function(e){t.assign(this,t.only(e,"left","top","width","height"))},up.Rect.prototype={get bottom(){return this.top+this.height},get right(){return this.left+this.width}},up.Rect.fromElement=function(e){return new up.Rect(e.getBoundingClientRect())},function(){var i,p,t=function(e,t){return function(){return e.apply(t,arguments)}},o={}.hasOwnProperty;function n(e){this.cacheKey=t(this.cacheKey,this),this.isCachable=t(this.isCachable,this),this.buildResponse=t(this.buildResponse,this),this.isCrossDomain=t(this.isCrossDomain,this),this.csrfToken=t(this.csrfToken,this),this.navigate=t(this.navigate,this),this.send=t(this.send,this),this.isSafe=t(this.isSafe,this),this.transferSearchToParams=t(this.transferSearchToParams,this),this.transferParamsToUrl=t(this.transferParamsToUrl,this),this.extractHashFromUrl=t(this.extractHashFromUrl,this),this.normalize=t(this.normalize,this),up.legacy.fixKey(e,"data","params"),n.__super__.constructor.call(this,e),this.normalize()}p=up.util,i=up.element,up.Request=(function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,up.Record),n.prototype.fields=function(){return["method","url","params","target","failTarget","headers","timeout","preload","cache"]},n.prototype.normalize=function(){if(this.params=new up.Params(this.params),this.method=p.normalizeMethod(this.method),this.headers||(this.headers={}),this.extractHashFromUrl(),!p.methodAllowsPayload(this.method))return this.transferParamsToUrl()},n.prototype.extractHashFromUrl=function(){var e=p.parseUrl(this.url);return this.hash=p.presence(e.hash),this.url=p.normalizeUrl(e,{hash:!1})},n.prototype.transferParamsToUrl=function(){if(!p.isBlank(this.params))return this.url=this.params.toURL(this.url),this.params.clear()},n.prototype.transferSearchToParams=function(){var e=up.Params.fromURL(this.url);if(!p.isBlank(e))return this.params.addAll(e),this.url=p.normalizeUrl(this.url,{search:!1})},n.prototype.isSafe=function(){return up.proxy.isSafeMethod(this.method)},n.prototype.send=function(){return new Promise((f=this,function(t,n){var e,r,i,o=new XMLHttpRequest,s=p.copy(f.headers),l=f.url,a=p.copy(f.params),u=up.proxy.wrapMethod(f.method,a),c=null;for(e in p.isBlank(a)||(delete s["Content-Type"],c=a.toFormData()),r=up.protocol.config,f.target&&(s[r.targetHeader]=f.target),f.failTarget&&(s[r.failTargetHeader]=f.failTarget),f.isCrossDomain()||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest"),(a=f.csrfToken())&&(s[r.csrfHeader]=a),o.open(u,l),s)i=s[e],o.setRequestHeader(e,i);return l=function(){var e=f.buildResponse(o);return(e.isSuccess()?t:n)(e)},o.onload=l,o.onerror=l,o.ontimeout=l,f.timeout&&(o.timeout=f.timeout),o.send(c)}));var f},n.prototype.navigate=function(){var e,t,n,r;return this.transferSearchToParams(),n=i.affix(document.body,"form.up-page-loader"),e=function(e){return i.affix(n,"input[type=hidden]",e)},r="GET"===this.method?"GET":(e({name:up.protocol.config.methodParam,value:this.method}),"POST"),i.setAttrs(n,{method:r,action:this.url}),(r=up.protocol.csrfParam())&&(t=this.csrfToken())&&e({name:r,value:t}),p.each(this.params.toArray(),e),i.hide(n),up.browser.submitForm(n)},n.prototype.csrfToken=function(){if(!this.isSafe()&&!this.isCrossDomain())return up.protocol.csrfToken()},n.prototype.isCrossDomain=function(){return p.isCrossDomain(this.url)},n.prototype.buildResponse=function(e){var t,n={method:this.method,url:this.url,text:e.responseText,status:e.status,request:this,xhr:e};return(t=up.protocol.locationFromXhr(e))&&(n.url=t,n.method=null!=(t=up.protocol.methodFromXhr(e))?t:"GET"),n.title=up.protocol.titleFromXhr(e),new up.Response(n)},n.prototype.isCachable=function(){return this.isSafe()&&!p.isFormData(this.params)},n.prototype.cacheKey=function(){return[this.url,this.method,this.params.toQuery(),this.target].join("|")},n.wrap=function(e){return p.wrapValue(e,this)},n)}.call(this),function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}},i={}.hasOwnProperty;function n(e){this.getHeader=t(this.getHeader,this),this.isFatalError=t(this.isFatalError,this),this.isError=t(this.isError,this),this.isSuccess=t(this.isSuccess,this),n.__super__.constructor.call(this,e)}e=up.util,up.Response=(function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,up.Record),n.prototype.fields=function(){return["method","url","text","status","request","xhr","title"]},n.prototype.isSuccess=function(){return this.status&&200<=this.status&&this.status<=299},n.prototype.isError=function(){return!this.isSuccess()},n.prototype.isFatalError=function(){return this.isError()&&e.isBlank(this.text)},n.prototype.getHeader=function(e){return this.xhr.getResponseHeader(e)},n)}.call(this),function(){var f;function e(e,t){var n,r;this.element=e,null==t&&(t={}),r=up.viewport.config,this.viewport=null!=(n=t.viewport)?n:up.viewport.closest(this.element),up.legacy.fixKey(r,"snap","revealSnap"),e=r.revealSnap,this.snap=null!=(n=null!=(n=t.snap)?n:t.revealSnap)?n:e,!1===this.snap?this.snap=0:!0===this.snap&&(this.snap=e),this.padding=null!=(e=null!=(e=t.padding)?e:t.revealPadding)?e:r.revealPadding,this.top=t.top,this.fixedTop=null!=(e=t.fixedTop)?e:r.fixedTop,this.fixedBottom=null!=(e=t.fixedBottom)?e:r.fixedBottom,this.speed=null!=(e=null!=(e=t.speed)?e:t.scrollSpeed)?e:r.scrollSpeed,this.behavior=null!=(r=t.behavior)?r:t.scrollBehavior}f=up.element,up.RevealMotion=(e.prototype.start=function(){var e,t,n=up.Rect.fromElement(this.element),r=this.getViewportRect(this.viewport);return this.addPadding(n),this.substractObstructions(r),r.height<=0?Promise.reject(new Error("Viewport has no visible area")):(e=t=this.viewport.scrollTop,this.top||n.height>r.height?e+=n.top-r.top:n.top<r.top?e-=r.top-n.top:n.bottom>r.bottom&&(e+=n.bottom-r.bottom),e<this.snap&&n.top<.5*r.height&&(e=0),e!==t?this.scrollTo(e):Promise.resolve())},e.prototype.scrollTo=function(e){var t={speed:this.speed,behavior:this.behavior};return this.scrollMotion=new up.ScrollMotion(this.viewport,e,t),this.scrollMotion.start()},e.prototype.getViewportRect=function(){return up.viewport.isRoot(this.viewport)?new up.Rect({left:0,top:0,width:up.viewport.rootWidth(),height:up.viewport.rootHeight()}):up.Rect.fromElement(this.viewport)},e.prototype.addPadding=function(e){return e.top-=this.padding,e.height+=2*this.padding},e.prototype.substractObstructions=function(e){for(var t,n,r,i,o,s,l,a=f.list.apply(f,this.fixedTop),u=0,c=a.length;u<c;u++)i=a[u],0<(t=(o=up.Rect.fromElement(i)).bottom-e.top)&&(e.top+=t,e.height-=t);for(l=[],n=0,r=(s=f.list.apply(f,this.fixedBottom)).length;n<r;n++)i=s[n],o=up.Rect.fromElement(i),0<(t=e.bottom-o.top)?l.push(e.height-=t):l.push(void 0);return l},e.prototype.finish=function(){var e;return null!=(e=this.scrollMotion)?e.finish():void 0},e)}.call(this),function(){function r(e,t){return function(){return e.apply(t,arguments)}}var t;function e(e,t,n){this.scrollable=e,this.targetTop=t,null==n&&(n={}),this.finish=r(this.finish,this),this.cancel=r(this.cancel,this),this.animationFrame=r(this.animationFrame,this),this.start=r(this.start,this),this.behavior=null!=(t=null!=(t=n.behavior)?t:n.scrollBehavior)?t:"auto",this.speed=.065*(null!=(n=null!=(t=n.speed)?t:n.scrollSpeed)?n:up.viewport.config.scrollSpeed)}t=up.util,up.ScrollMotion=(e.prototype.start=function(){return new Promise((n=this,function(e,t){return n.resolve=e,n.reject=t,"smooth"===n.behavior&&up.motion.isEnabled()?n.startAnimation():n.finish()}));var n},e.prototype.startAnimation=function(){return this.startTime=Date.now(),this.startTop=this.scrollable.scrollTop,this.topDiff=this.targetTop-this.startTop,this.duration=Math.sqrt(Math.abs(this.topDiff))/this.speed,requestAnimationFrame(this.animationFrame)},e.prototype.animationFrame=function(){var e;if(!this.settled)return this.frameTop&&1.5<Math.abs(this.frameTop-this.scrollable.scrollTop)&&this.cancel("Animation aborted due to user intervention"),e=Date.now()-this.startTime,e=Math.min(e/this.duration,1),this.frameTop=this.startTop+t.simpleEase(e)*this.topDiff,Math.abs(this.targetTop-this.frameTop)<.3?this.finish():(this.scrollable.scrollTop=this.frameTop,requestAnimationFrame(this.animationFrame))},e.prototype.cancel=function(e){return this.settled=!0,this.reject(new Error(e))},e.prototype.finish=function(){return this.settled=!0,this.scrollable.scrollTop=this.targetTop,this.resolve()},e)}.call(this),function(){function e(e,t){return function(){return e.apply(t,arguments)}}var t;function n(){this.values=e(this.values,this),this.keys=e(this.keys,this),this.remove=e(this.remove,this),this.set=e(this.set,this),this.get=e(this.get,this),this.clear=e(this.clear,this),this.clear()}up.store||(up.store={}),t=up.util,up.store.Memory=(n.prototype.clear=function(){return this.data={}},n.prototype.get=function(e){return this.data[e]},n.prototype.set=function(e,t){return this.data[e]=t},n.prototype.remove=function(e){return delete this.data[e]},n.prototype.keys=function(){return Object.keys(this.data)},n.prototype.values=function(){return t.values(this.data)},n)}.call(this),function(){function t(e,t){return function(){return e.apply(t,arguments)}}var i={}.hasOwnProperty;function n(e){this.saveToSessionStorage=t(this.saveToSessionStorage,this),this.loadFromSessionStorage=t(this.loadFromSessionStorage,this),this.remove=t(this.remove,this),this.set=t(this.set,this),this.clear=t(this.clear,this),this.rootKey=e,this.loadFromSessionStorage()}up.util,up.store.Session=(function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,up.store.Memory),n.prototype.clear=function(){return n.__super__.clear.call(this),this.saveToSessionStorage()},n.prototype.set=function(e,t){return n.__super__.set.call(this,e,t),this.saveToSessionStorage()},n.prototype.remove=function(e){return n.__super__.remove.call(this,e),this.saveToSessionStorage()},n.prototype.loadFromSessionStorage=function(){var e;try{(e="undefined"!=typeof sessionStorage&&null!==sessionStorage?sessionStorage.getItem(this.rootKey):void 0)&&(this.data=JSON.parse(e))}catch(e){}return this.data||(this.data={})},n.prototype.saveToSessionStorage=function(){var e=JSON.stringify(this.data);try{return"undefined"!=typeof sessionStorage&&null!==sessionStorage?sessionStorage.setItem(this.rootKey,e):void 0}catch(e){}},n)}.call(this),function(){function n(e,t){return function(){return e.apply(t,arguments)}}var r,i;function e(e){var t;this.sync=n(this.sync,this),this.scheduleSync=n(this.scheduleSync,this),this.anchor=e.anchor,t=e.position.split("-"),this.position=t[0],this.align=t[1],this.align?up.legacy.warn("The position value %o is deprecated. Use %o instead.",e.position,this.describeConstraints()):this.align=e.align,this.alignAxis="top"===this.position||"bottom"===this.position?"horizontal":"vertical",this.viewport=up.viewport.closest(this.anchor),this.parent=this.viewport===r.root()?document.body:this.viewport,this.syncOnScroll=!this.viewport.contains(this.anchor.offsetParent),this.root=r.affix(this.parent,".up-bounds"),this.setBoundsOffset(0,0),this.changeEventSubscription("on")}i=up.util,r=up.element,up.Tether=(e.prototype.destroy=function(){return r.remove(this.root),this.changeEventSubscription("off")},e.prototype.changeEventSubscription=function(e){if(up[e](window,"resize",this.scheduleSync),this.syncOnScroll)return up[e](this.viewport,"scroll",this.scheduleSync)},e.prototype.scheduleSync=function(){return clearTimeout(this.syncTimer),this.syncTimer=i.task(this.sync)},e.prototype.sync=function(){var e=this.root.getBoundingClientRect(),t=this.anchor.getBoundingClientRect(),n=void 0,r=void 0;switch(this.alignAxis){case"horizontal":r=function(){switch(this.position){case"top":return t.top-e.height;case"bottom":return t.top+t.height}}.call(this),n=function(){switch(this.align){case"left":return t.left;case"center":return t.left+.5*(t.width-e.width);case"right":return t.left+t.width-e.width}}.call(this);break;case"vertical":r=function(){switch(this.align){case"top":return t.top;case"center":return t.top+.5*(t.height-e.height);case"bottom":return t.top+t.height-e.height}}.call(this),n=function(){switch(this.position){case"left":return t.left-e.width;case"right":return t.left+t.width}}.call(this)}return i.isDefined(n)||i.isDefined(r)?this.moveTo(n,r):up.fail("Invalid tether constraints: %o",this.describeConstraints())},e.prototype.describeConstraints=function(){return{position:this.position,align:this.align}},e.prototype.moveTo=function(e,t){var n=this.root.getBoundingClientRect();return this.setBoundsOffset(e-n.left+this.offsetLeft,t-n.top+this.offsetTop)},e.prototype.setBoundsOffset=function(e,t){return this.offsetLeft=e,this.offsetTop=t,r.setStyle(this.root,{left:e,top:t})},e)}.call(this),function(){function n(e,t){return function(){return e.apply(t,arguments)}}var r;function e(e,t){this.urls=e,null==t&&(t={}),this[""+r.isEqual.key]=n(this[""+r.isEqual.key],this),this.matchesAny=n(this.matchesAny,this),this.doesMatchPattern=n(this.doesMatchPattern,this),this.doesMatchFully=n(this.doesMatchFully,this),this.matches=n(this.matches,this),this.normalizeUrl=t.normalizeUrl||r.normalizeUrl,this.urls=r.map(this.urls,this.normalizeUrl),this.urls=r.compact(this.urls)}r=up.util,up.UrlSet=(e.prototype.matches=function(e){return 0<=e.indexOf("*")?this.doesMatchPattern(e):this.doesMatchFully(e)},e.prototype.doesMatchFully=function(e){return r.contains(this.urls,e)},e.prototype.doesMatchPattern=function(t){var e="__ASTERISK__";return t=t.replace(/\*/g,e),t=(t=r.escapeRegexp(t)).replace(new RegExp(e,"g"),".*?"),t=new RegExp("^"+t+"$"),r.find(this.urls,function(e){return t.test(e)})},e.prototype.matchesAny=function(e){return r.find(e,this.matches)},e.prototype[""+r.isEqual.key]=function(e){return r.isEqual(this.urls,null!=e?e.urls:void 0)},e)}.call(this),function(){var e,t;up.framework=(e=up.util,t=!0,{reset:function(){return up.emit("up:framework:reset",{log:"Resetting framework"})},boot:function(){return up.browser.isSupported()?(up.emit("up:framework:booted",{log:"Framework booted"}),t=!1,up.event.onReady(function(){return e.task(function(){return up.emit("up:app:boot",{log:"Booting user application"}),up.emit("up:app:booted",{log:"User application booted"})})})):"function"==typeof console.log?console.log("Unpoly doesn't support this browser. Framework was not booted."):void 0},isBooting:function(){return t}})}.call(this),function(){var i,o,e,t,n,r,s,l,a,u,c,f,p,h,d,m=[].slice;up.event=(i=up.util,o=up.element,e=function(){var e=1<=arguments.length?m.call(arguments,0):[];return n(e)},t=function(){var e=1<=arguments.length?m.call(arguments,0):[];return n(e,{jQuery:!0})},n=function(e,t){return up.browser.isSupported()?up.EventListener.bind(e,t):function(){}},r=function(){var e=1<=arguments.length?m.call(arguments,0):[];return up.EventListener.unbind(e)},s=function(){var e,t,n,r=1<=arguments.length?m.call(arguments,0):[];return r[0].addEventListener?n=r.shift():i.isJQuery(r[0])&&(n=o.get(r.shift())),e=r[0],t=r[1]||{},(r=i.pluckKey(t,"target"))&&(n=r),null==n&&(n=document),a(e,t),t=l(e,t),n.dispatchEvent(t),t},l=function(e,t){var n=document.createEvent("Event");return n.initEvent(e,!0,!0),i.assign(n,t),up.browser.isIE11()&&(n.preventDefault=function(){return Object.defineProperty(n,"defaultPrevented",{get:function(){return!0}})}),n},a=function(e,t){var n,r;if(up.log.isEnabled())return n=i.pluckKey(t,"log"),r=i.isArray(n)?(n=(r=n)[0],2<=r.length?m.call(r,1):[]):[],i.isString(n)?i.isPresent(t)?up.puts.apply(up,[n+" (%s (%o))"].concat(m.call(r),[e],[t])):up.puts.apply(up,[n+" (%s)"].concat(m.call(r),[e])):!0===n?i.isPresent(t)?up.puts("Event %s (%o)",e,t):up.puts("Event %s",e):void 0},u=function(){var e=1<=arguments.length?m.call(arguments,0):[];return!s.apply(null,e).defaultPrevented},c=function(){var n=1<=arguments.length?m.call(arguments,0):[];return new Promise(function(e,t){return u.apply(null,n)?e():t(new Error("Event "+n[0]+" was prevented"))})},f=function(t){return e("keydown","body",function(e){if(i.escapePressed(e))return t(e)})},p=function(e){return e.stopImmediatePropagation(),e.preventDefault()},h=function(e){if(p(e),"up:action:consumed"!==e.type)return s(e.target,"up:action:consumed",{log:!1})},d=function(e){return"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)},e("up:framework:reset",function(){for(var e,t=[window,document,document.documentElement,document.body],n=[],r=0,i=t.length;r<i;r++)e=t[r],n.push(up.EventListener.unbindNonDefault(e));return n}),{on:e,$on:t,off:r,emit:s,nobodyPrevents:u,whenEmitted:c,onEscape:f,halt:p,consumeAction:h,onReady:d}),up.on=up.event.on,up.$on=up.event.$on,up.off=up.event.off,up.$off=up.event.off,up.emit=up.event.emit,up.legacy.renamedModule("bus","event")}.call(this),function(){}.call(this),function(){var t,e,n,r,i,o,s,l,a,u;up.protocol=(i=up.util,o=up.element,s=function(e){return e.getResponseHeader(t.locationHeader)||e.responseURL},l=function(e){return e.getResponseHeader(t.titleHeader)},a=function(e){if(e=e.getResponseHeader(t.methodHeader))return i.normalizeMethod(e)},u=i.memoize(function(){return(up.browser.popCookie(t.methodCookie)||"get").toLowerCase()}),up.on("up:framework:booted",u),t=new up.Config({targetHeader:"X-Up-Target",failTargetHeader:"X-Up-Fail-Target",locationHeader:"X-Up-Location",validateHeader:"X-Up-Validate",titleHeader:"X-Up-Title",methodHeader:"X-Up-Method",methodCookie:"_up_method",methodParam:"_method",csrfParam:function(){return o.metaContent("csrf-param")},csrfToken:function(){return o.metaContent("csrf-token")},csrfHeader:"X-CSRF-Token"}),e=function(){return i.evalOption(t.csrfParam)},n=function(){return i.evalOption(t.csrfToken)},r=function(){return t.reset()},up.on("up:framework:reset",r),{config:t,reset:r,locationFromXhr:s,titleFromXhr:l,methodFromXhr:a,csrfParam:e,csrfToken:n,initialRequestMethod:u})}.call(this),function(){var e,a,t,i,n,o,s,u,r,l,c,f,p,h,d,m,g=[].slice;up.log=(a=up.util,up.browser,t=new up.store.Session("up.log"),i=new up.Config({prefix:"[UP] ",enabled:t.get("enabled"),collapse:!1}),n=function(){return i.reset()},o=function(e){return""+i.prefix+e},s=/\%[odisf]/g,u=function(e){var t,n,r,i,o,s,l="";if(a.isString(e))o='"'+(o=(o=(o=e.replace(/[\n\r\t ]+/g," ")).replace(/^[\n\r\t ]+/,"")).replace(/[\n\r\t ]$/,""))+'"',l='"';else if(a.isUndefined(e))o="undefined";else if(a.isNumber(e)||a.isFunction(e))o=e.toString();else if(a.isArray(e))o="["+a.map(e,u).join(", ")+"]",l="]";else if(a.isJQuery(e))o="$("+a.map(e,u).join(", ")+")",l=")";else if(a.isElement(e)){for(o="<"+e.tagName.toLowerCase(),n=0,r=(i=["id","name","class"]).length;n<r;n++)t=i[n],(s=e.getAttribute(t))&&(o+=" "+t+'="'+s+'"');o+=">",l=">"}else o=JSON.stringify(e);return 200<o.length&&(o=o.substr(0,200)+" …",o+=l),o},r=function(){var e=arguments[0],t=2<=arguments.length?g.call(arguments,1):[];return l.apply(null,[a.identity,e].concat(g.call(t)))},l=function(){var t,n=arguments[0],e=arguments[1],r=3<=arguments.length?g.call(arguments,2):[];return a.isBlank(e)?"":(t=0,e.replace(s,function(){var e=r[t];return e=n(u(e)),t+=1,e}))},c=function(){var e=arguments[0],t=2<=arguments.length?g.call(arguments,1):[];if(i.enabled&&e)return console.debug.apply(console,[o(e)].concat(g.call(t)))},f=function(){var e=arguments[0],t=2<=arguments.length?g.call(arguments,1):[];if(i.enabled&&e)return console.log.apply(console,[o(e)].concat(g.call(t)))},p=function(){var e=arguments[0],t=2<=arguments.length?g.call(arguments,1):[];if(e)return console.warn.apply(console,[o(e)].concat(g.call(t)))},h=function(){var e,t=arguments[0],n=2<=arguments.length?g.call(arguments,1):[],r=n.pop();if(!i.enabled||!t)return r();e=i.collapse?"groupCollapsed":"group",console[e].apply(console,[o(t)].concat(g.call(n)));try{return r()}finally{t&&console.groupEnd()}},d=function(){var e=arguments[0],t=2<=arguments.length?g.call(arguments,1):[];if(e)return console.error.apply(console,[o(e)].concat(g.call(t)))},m=function(){var e=" __ _____  ___  ___  / /_ __\n/ // / _ \\/ _ \\/ _ \\/ / // /  "+up.version+"\n\\___/_//_/ .__/\\___/_/\\_. / \n        / /            / /\n\n";return i.enabled?e+="Call `up.log.disable()` to disable logging for this session.":e+="Call `up.log.enable()` to enable logging for this session.",console.log(e)},up.on("up:framework:booted",m),up.on("up:framework:reset",n),e=function(e){return t.set("enabled",e),i.enabled=e},{puts:f,sprintf:r,sprintfWithFormattedArgs:l,debug:c,error:d,warn:p,group:h,config:i,enable:function(){return e(!0)},disable:function(){return e(!1)},isEnabled:function(){return i.enabled}}),up.puts=up.log.puts,up.warn=up.log.warn}.call(this),function(){var n,r,i,o,e,s,t,l,a,u,c=[].slice;up.toast=(n=up.util,r=up.element,i=function(e){return"<span class='up-toast-variable'>"+n.escapeHtml(e)+"</span>"},o=new up.Config({element:null}),e=function(){return u(),o.reset()},s=function(e){var t;return e=n.isArray(e)?(e[0]=n.escapeHtml(e[0]),(t=up.log).sprintfWithFormattedArgs.apply(t,[i].concat(c.call(e)))):n.escapeHtml(e)},t=function(){return!!o.element},l=function(e,t){var n=o.element.querySelector(".up-toast-actions"),n=r.affix(n,".up-toast-action");return n.innerText=e,n.addEventListener("click",t)},a=function(e,t){return null==t&&(t={}),u(),e=s(e),o.element=r.createFromHtml('<div class="up-toast">\n  <div class="up-toast-message">'+e+'</div>\n  <div class="up-toast-actions"></div>\n</div>'),(t=t.action||t.inspect)&&l(t.label,t.callback),l("Close",u),document.body.appendChild(o.element)},u=function(){if(t())return r.remove(o.element),o.element=null},up.on("up:framework:reset",e),{open:a,close:u,reset:e,isOpen:t})}.call(this),function(){var i,t,r,o,s,n,e,l,a,u,c,f,p,h,d,m,g,v,y=[].slice;up.syntax=(i=up.util,t=up.element,r={"[up-back]":-100,"[up-drawer]":-200,"[up-dash]":-200,"[up-expand]":-300,"[data-method]":-400,"[data-confirm]":-400},o=[],s=[],n=function(){var e=1<=arguments.length?y.call(arguments,0):[],e=f(e);return p(o,e)},e=function(){var e=1<=arguments.length?y.call(arguments,0):[],e=n.apply(null,e);return e.jQuery=!0,e},l=function(){var e=1<=arguments.length?y.call(arguments,0):[],e=f(e);return up.framework.isBooting()&&(e.priority=u(e.selector)||up.fail("Unregistered priority for system macro %o",e.selector)),p(s,e)},a=function(){var e=1<=arguments.length?y.call(arguments,0):[],e=l.apply(null,e);return e.jQuery=!0,e},u=function(e){var t,n;for(n in r)if(t=r[n],0<=e.indexOf(n))return t},c=function(e){var t=e.shift(),n=e.pop();return[t,i.extractOptions(e),n]},f=function(e){var t=c(e),n=t[0],e=t[1],t=t[2];return e=i.options(e,{selector:n,isDefault:up.framework.isBooting(),priority:0,batch:!1,keep:!1,jQuery:!1}),i.assign(t,e)},p=function(e,t){for(var n,r=0;(n=e[r])&&n.priority>=t.priority;)r+=1;return e.splice(r,0,t),t},h=function(e,t){var n=s.concat(o);return new up.CompilePass(e,n,t).compile()},d=function(e,t){var n;return(n=e.upDestructors)||(n=[],e.upDestructors=n,e.classList.add("up-can-clean")),i.isArray(t)?n.push.apply(n,t):n.push(t)},m=function(e){e=t.subtree(e,".up-can-clean");return i.each(e,function(e){var t,n,r;if(t=i.pluckKey(e,"upDestructors"))for(n=0,r=t.length;n<r;n++)(0,t[n])();return e.classList.remove("up-can-clean")})},g=function(e){e=t.get(e);return t.jsonAttr(e,"up-data")||{}},v=function(){return o=i.filter(o,"isDefault"),s=i.filter(s,"isDefault")},up.on("up:framework:reset",v),{compiler:n,macro:l,$compiler:e,$macro:a,destructor:d,compile:h,clean:m,data:g}),up.compiler=up.syntax.compiler,up.$compiler=up.syntax.$compiler,up.destructor=up.syntax.destructor,up.macro=up.syntax.macro,up.$macro=up.syntax.$macro}.call(this),function(){var n,t,r,i,o,e,s,l,a,u,c,f,p,h,d,m;up.history=(n=up.util,t=up.element,r=new up.Config({enabled:!0,popTargets:["body"],restoreScroll:!0}),o=i=void 0,e=function(){return r.reset(),o=i=void 0},s=function(e,t){return(t=t||{}).hash=!0,n.normalizeUrl(e,t)},l=function(e){return s(up.browser.url(),e)},a=function(e){var t={stripTrailingSlash:!0};return s(e,t)===l(t)},u=function(e){return o&&(i=o,o=void 0),o=e},c=function(e){if(p("replaceState",e))return up.emit("up:history:replaced",{url:e})},f=function(e,t){if(t=n.options(t,{force:!1}),e=s(e),(t.force||!a(e))&&up.event.nobodyPrevents("up:history:push",{url:e,log:"Adding history entry for "+e}))return p("pushState",e)?up.emit("up:history:pushed",{url:e,log:"Advanced to location "+e}):up.emit("up:history:muted",{url:e,log:"Did not advance to "+e+" (history is unavailable)"})},p=function(e,t){var n;return!(!up.browser.canPushState()||!r.enabled)&&(n=h(),window.history[e](n,"",t),u(l()),!0)},h=function(){return{fromUp:!0}},d=function(e){var t,n;return null!=e&&e.fromUp?(n=l(),up.emit("up:history:restore",{url:n,log:"Restoring location "+n}),t=r.popTargets.join(", "),up.replace(t,n,{history:!1,title:!0,reveal:!1,saveScroll:!1,restoreScroll:r.restoreScroll,layer:"page"}).then(function(){return n=l(),up.emit("up:history:restored",{url:n,log:"Restored location "+n})})):up.puts("Ignoring a state not pushed by Unpoly (%o)",e)},m=function(e){return u(l()),up.viewport.saveScroll({url:i}),e=e.state,d(e)},up.on("up:app:boot",function(){var e;if(up.browser.canPushState())return e=function(){return up.browser.canControlScrollRestoration()&&(window.history.scrollRestoration="manual"),window.addEventListener("popstate",m),c(l())},"undefined"!=typeof jasmine&&null!==jasmine?e():setTimeout(e,100)}),up.macro("a[up-back], [up-href][up-back]",function(e){if(n.isPresent(i))return t.setMissingAttrs(e,{"up-href":i,"up-restore-scroll":""}),e.removeAttribute("up-back"),up.link.makeFollowable(e)}),up.on("up:framework:reset",e),{config:r,push:f,replace:c,url:l,isUrl:a,previousUrl:function(){return i},normalizeUrl:s})}.call(this),function(){var s,l,n,i,r,e,o,t,a,u,c,f,p,h,d,m,g,v,y,A,b,C,w,x,k,S,E,M,T,B,L,O,F,D=[].slice;up.viewport=(s=up.util,l=up.element,n=new up.Config({duration:0,viewports:[".up-modal-viewport","[up-viewport]","[up-fixed]"],fixedTop:["[up-fixed~=top]"],fixedBottom:["[up-fixed~=bottom]"],anchoredRight:["[up-anchored~=right]","[up-fixed~=top]","[up-fixed~=bottom]","[up-fixed~=right]"],revealSnap:50,revealPadding:0,scrollSpeed:1}),i=new up.Cache({size:30,key:up.history.normalizeUrl}),r=new up.MotionController("scrolling"),e=function(){return n.reset(),i.clear(),r.reset()},o=function(e,t,n){t=new up.ScrollMotion(e,t,n);return r.startMotion(e,t,n)},t=function(){var e=n.anchoredRight.join(",");return l.all(e)},a=function(e,t){var n=l.get(e),e=new up.RevealMotion(n,t);return r.startMotion(n,e,t)},u=function(e,t){var n,r,i,o;return null==t&&(t={}),n=t.hash,i=t.reveal,r=t.restoreScroll,o=s.only(t,"scrollBehavior","scrollSpeed"),r?(r=s.presence(r,s.isObject),B({around:e,scrollTops:r})):n&&!0===i?c(n,o):i?(s.isElement(i)||s.isJQuery(i)?e=l.get(i):s.isString(i)&&(t=l.resolveSelector(i,t.origin),e=up.fragment.first(t)),e?a(e,o):void 0):Promise.resolve()},c=function(e){var t;return e&&(t=O(e))?a(t,{top:!0}):Promise.resolve()},f=function(){return[g()].concat(D.call(n.viewports)).join(",")},p=function(e){e=l.get(e);return l.closest(e,f())},h=function(e){e=l.get(e);return l.subtree(e,f())},d=function(e){e=l.get(e);return l.list(p(e),h(e))},m=function(){return l.all(f())},g=function(){var e;return(e=document.scrollingElement)?e.tagName:"html"},v=function(){return document.querySelector(g())},y=function(){return l.root().clientWidth},A=function(){return l.root().clientHeight},b=function(e){return l.matches(e,g())},C=function(){return window.innerWidth>document.documentElement.offsetWidth},w=function(){var e=document.body,t=document.documentElement;return s.find([t,e],x)||v()},x=function(e){e=l.style(e,"overflow-y");return"auto"===e||"scroll"===e},k=s.memoize(function(){var e={position:"absolute",top:"0",left:"0",width:"100px",height:"100px",overflowY:"scroll"},t=up.element.affix(document.body,"[up-viewport]",{style:e}),e=t.offsetWidth-t.clientWidth;return up.element.remove(t),e}),S=function(e){return l.toSelector(e)},E=function(){return s.mapObject(m(),function(e){return[S(e),e.scrollTop]})},M=function(e){var t;return null==e&&(e=document),t=["[up-fixed]"].concat(n.fixedTop).concat(n.fixedBottom),e.querySelectorAll(t.join(","))},T=function(e){var t;return null==e&&(e={}),t=null!=(t=e.url)?t:up.history.url(),e=null!=(e=e.tops)?e:E(),i.set(t,e)},B=function(e){var n,t,r;return null==e&&(e={}),t=up.history.url(),r=e.around?d(e.around):m(),n=e.scrollTops||i.get(t)||{},up.log.group("Restoring scroll positions for URL %s to %o",t,n,function(){var e=s.map(r,function(e){var t=S(e);return o(e,n[t]||0,{duration:0})});return Promise.all(e)})},L=function(e,t){var n,r,i,o;return null==t&&(t={}),i=l.get(e),o=up.viewport.closest(i).getBoundingClientRect(),e=i.getBoundingClientRect(),r=new up.Rect({left:e.left-o.left,top:e.top-o.top,width:e.width,height:e.height}),"function"==typeof t.afterMeasure&&t.afterMeasure(),l.setStyle(i,{position:"static"===i.style.position?"static":"relative",top:"auto",right:"auto",bottom:"auto",left:"auto",width:"100%",height:"100%"}),n=l.createFromSelector(".up-bounds"),l.insertBefore(i,n),n.appendChild(i),(o=function(e,t){return r.left+=e,r.top+=t,l.setStyle(n,r)})(0,0),t=i.getBoundingClientRect(),o(e.left-t.left,e.top-t.top),s.each(M(i),l.fixedToAbsolute),{bounds:n,moveBounds:o}},O=function(e){if(e=F(e))return e=[l.attributeSelector("up-id",e),l.attributeSelector("id",e),"a"+l.attributeSelector("name",e)].join(","),up.fragment.first(e)},F=function(e){return e&&"#"===e[0]&&(e=e.substr(1)),s.presence(e)},up.on("up:app:booted",function(){return c(location.hash)}),up.on("up:framework:reset",e),{reveal:a,revealHash:c,firstHashTarget:O,scroll:o,config:n,closest:p,subtree:h,around:d,all:m,rootSelector:g,root:v,rootWidth:y,rootHeight:A,rootHasVerticalScrollbar:C,rootOverflowElement:w,isRoot:b,scrollbarWidth:k,scrollTops:E,saveScroll:T,restoreScroll:B,scrollAfterInsertFragment:u,anchoredRight:t,fixedElements:M,absolutize:L}),up.scroll=up.viewport.scroll,up.reveal=up.viewport.reveal,up.revealHash=up.viewport.revealHash,up.legacy.renamedModule("layout","viewport")}.call(this),function(){var h,d,e,t,m,g,r,f,c,l,p,v,y,A,b,C,w,a,x,k,i,n,o,s,u,S,E,M,T,B,L,O=[].slice;up.fragment=(h=up.util,d=up.element,e=new up.Config({fallbacks:["body"],fallbackTransition:null}),t=function(){return e.reset()},m=function(e,t){if(!1!==t)return h.isPresent(t)&&(t=h.normalizeUrl(t)),e.setAttribute("up-source",t)},g=function(e){e=d.get(e);return(e=d.closest(e,"[up-source]"))?e.getAttribute("up-source"):up.browser.url()},r=function(e,t,n){var r,i,o,s,l,a,u,c;if((n=h.options(n)).inspectResponse=s=function(){return up.browser.navigate(t,h.only(n,"method","params"))},!up.browser.canPushState()&&!1!==n.history)return n.preload||s(),h.unresolvablePromise();c=h.merge(n,{humanizedTarget:"target"}),r=h.merge(n,{humanizedTarget:"failure target",provideTarget:void 0,restoreScroll:!1}),h.renameKey(r,"failTransition","transition"),h.renameKey(r,"failLayer","layer"),h.renameKey(r,"failReveal","reveal");try{o=p(e,c),i=p(n.failTarget,r)}catch(e){return Promise.reject(e)}return u=h.only(n,"method","data","params","cache","preload","headers","timeout"),h.assign(u,{url:t,target:o,failTarget:i}),a=new up.Request(u),l=function(e){return f(!0,o,a,e,c)},s=function(e){var t,n=function(){return Promise.reject(e)};return e.isFatalError()?n():(t=f(!1,i,a,e,r),h.always(t,n))},u=up.request(a),n.preload||(u=u.then(l,s)),u},f=function(e,t,n,r,i){var o=r.url,s=o;return(n=n.hash)&&(s+=i.hash=n),n="GET"===r.method,e?n?(!1===i.history||h.isString(i.history)||(i.history=s),!1===i.source||h.isString(i.source)||(i.source=o)):(h.isString(i.history)||(i.history=!1),h.isString(i.source)||(i.source="keep")):n?(!1!==i.history&&(i.history=s),!1!==i.source&&(i.source=o)):(i.history=!1,i.source="keep"),c(i)&&r.title&&(i.title=r.title),l(t,r.text,i)},c=function(e){return!(!1===e.title||h.isString(e.title)||!1===e.history&&!0!==e.title)},l=function(l,a,u){return up.log.group("Extracting %s from %d bytes of HTML",l,null!=a?a.length:void 0,function(){return!1!==(u=h.options(u,{historyMethod:"push",keep:!0,layer:"auto"})).saveScroll&&up.viewport.saveScroll(),h.rejectOnError(function(){var e,t,n,r,i,o,s;for("function"==typeof u.provideTarget&&u.provideTarget(),r=new up.HtmlParser(a),e=v(l,r,u),c(u)&&(i=r.title())&&(u.title=i),y(u),s=[],t=0,n=e.length;t<n;t++)o=e[t],up.log.group("Swapping fragment %s",o.selector,function(){var e=h.merge(u,h.only(o,"origin","reveal"));return r.prepareForInsertion(o.newElement),e=A(o.oldElement,o.newElement,o.pseudoClass,o.transition,e),s.push(e)});return Promise.all(s)})})},p=function(e,t){return new up.ExtractCascade(e,t).bestPreflightSelector()},v=function(e,t,n){return n=h.merge(n,{response:t}),new up.ExtractCascade(e,n).bestMatchingSteps()},y=function(e){if((e=h.options(e,{historyMethod:"push"})).history&&up.history[e.historyMethod](e.history),h.isString(e.title))return document.title=e.title},A=function(e,t,n,r,i){var o,s,l,a,u,c,f,p;if(r=r||"none","keep"===i.source&&(i=h.merge(i,{source:g(e)})),m(t,i.source),n){for(p=d.createFromSelector(".up-insertion");s=t.firstChild;)p.appendChild(s);for("before"===n?e.insertAdjacentElement("afterbegin",p):e.insertAdjacentElement("beforeend",p),l=0,a=(f=p.children).length;l<a;l++)o=f[l],w(o,i);return c=up.viewport.scrollAfterInsertFragment(p,i),c=(c=h.always(c,up.animate(p,r,i))).then(function(){return d.unwrap(p)})}return(c=C(e,t,i))?(x(c),Promise.resolve()):(i.keepPlans=b(e,t,i),u=e.parentNode,c=h.merge(i,{beforeStart:function(){return B(e)},afterInsert:function(){return up.hello(t,i)},beforeDetach:function(){return up.syntax.clean(e)},afterDetach:function(){return d.remove(e),k(e,{parent:u,log:!1})}}),up.morph(e,t,r,c))},b=function(e,t,n){var r,i,o,s,l,a,u=[];if(n.keep)for(r=0,s=(a=e.querySelectorAll("[up-keep]")).length;r<s;r++)i=a[r],(l=C(i,t,h.merge(n,{descendantsOnly:!0})))&&(o=i.cloneNode(!0),d.replace(i,o),d.replace(l.newElement,i),u.push(l));return u},C=function(e,t,n){var r,i;if(n.keep&&(r=e,(e=d.booleanOrStringAttr(r,"up-keep"))&&(h.isString(e)||(e="&"),e=d.resolveSelector(e,r),e=n.descendantsOnly?d.first(t,e):d.subtree(t,e)[0],e&&d.matches(e,"[up-keep]")&&(r={target:r,newFragment:e,newData:(i={oldElement:r,newElement:e,newData:up.syntax.data(e)}).newData,log:["Keeping element %o",r]},up.event.nobodyPrevents("up:fragment:keep",r)))))return i},w=function(e,t){for(var n,r,e=d.get(e),i=[],o=0,s=(r=(t=h.options(t,{keepPlans:[]})).keepPlans).length;o<s;o++)n=r[o],x(n),i.push(n.oldElement);return up.syntax.compile(e,{skip:i}),a(e,t),e},a=function(e,t){return up.emit(e,"up:fragment:inserted",{log:["Inserted fragment %o",e],origin:t.origin})},x=function(e){var t=e.oldElement,t={target:t,newFragment:e.newElement,newData:e.newData,log:["Kept fragment %o",t]};return up.emit("up:fragment:kept",t)},k=function(e,t){var n;return T(e,t)&&(n=["Destroyed fragment %o",e]),t=t.parent||up.fail("Missing { parent } option"),up.emit(t,"up:fragment:destroyed",{fragment:e,parent:t,log:n})},i=function(e){return!d.closest(e,".up-destroying")},n=function(){var e=1<=arguments.length?O.call(arguments,0):[],t=h.extractOptions(e),n=e.pop(),r=e[0]||document,e=null!=(e=t.layer)?e:"auto",t=t.origin;return n=d.resolveSelector(n,t),"auto"===e?o(r,n,t):s(r,n,e)},o=function(t,n,e){var r=["popup","modal","page"];return e&&(e=u(e),h.remove(r,e),r.unshift(e)),h.findResult(r,function(e){return s(t,n,e)})},s=function(e,t,n){t=d.all(e,t);return h.findResult(t,function(e){if(i(e)&&S(e,n))return e})},u=function(e){return up.popup.contains(e)?"popup":up.modal.contains(e)?"modal":"page"},S=function(e,t){return!t||u(e)===t},E=function(e,t){return null==t&&(t=document.body),d.affix(t,e,{class:"up-placeholder"})},M=function(e,t){var n=d.get(e);return t=h.options(t,{animation:!1}),n?(B(n),y(t),e=function(){var e=n.parentNode;return up.syntax.clean(n),up.browser.canJQuery()?jQuery(n).remove():d.remove(n),k(n,{parent:e,log:t.log})},function(){var e=up.motion.animateOptions(t);return up.motion.animate(n,t.animation,e)}().then(e)):Promise.resolve()},T=function(e,t){return!1!==t.log&&!d.matches(e,".up-placeholder, .up-tooltip, .up-modal, .up-popup")},B=function(e){return e.classList.add("up-destroying"),e.setAttribute("aria-hidden","true")},L=function(e,t){var n=(t=h.options(t,{cache:!1})).url||g(e);return r(e,n,t)},up.on("up:app:boot",function(){var e=document.body;return m(e,up.browser.url()),w(e)}),up.on("up:framework:reset",t),{createPlaceholder:E,replace:r,reload:L,destroy:M,extract:l,first:n,source:g,hello:w,config:e,layerOf:u}),up.replace=up.fragment.replace,up.extract=up.fragment.extract,up.reload=up.fragment.reload,up.destroy=up.fragment.destroy,up.hello=up.fragment.hello,up.first=function(){var e,t=1<=arguments.length?O.call(arguments,0):[];return up.legacy.warn("up.first() has been renamed to up.fragment.first()"),(e=up.fragment).first.apply(e,t)},up.legacy.renamedModule("flow","fragment"),up.legacy.renamedModule("dom","fragment")}.call(this),function(){var r,d,m,n,e,i,t,g,o,s,l,a,v,u,c,y,f,p,h,A,b,C,w,x,k,S,E,M=[].slice;up.motion=(d=up.util,m=up.element,n={},e={},i={},t={},g=new up.MotionController("motion"),o=new up.Config({duration:300,delay:0,easing:"ease",enabled:!0}),s=function(){return g.reset(),n=d.copy(e),i=d.copy(t),o.reset()},l=function(){return o.enabled},a=function(e,t,n){var r,i=m.get(e);return n=y(n),r=C(t),v(i,t,n)?(e=function(){return r(i,n)},g.startFunction(i,e,n)):u(i,t)},v=function(e,t,n){return n=y(n),l()&&!E(t)&&0<n.duration&&!m.isSingleton(e)},u=function(e,t){return d.isOptions(t)&&m.setStyle(e,t),Promise.resolve()},c=function(e,t,n){return n=d.merge(n,{finishEvent:g.finishEvent}),new up.CssTransition(e,t,n).start()},y=function(){var e=1<=arguments.length?M.call(arguments,0):[],t=null!=(i=e.shift())?i:{},n=d.extractOptions(e),r=e.pop()||m.none(),i={};return i.easing=null!=(e=null!=(e=null!=(e=t.easing)?e:r.getAttribute("up-easing"))?e:n.easing)?e:o.easing,i.duration=null!=(e=null!=(e=null!=(e=t.duration)?e:m.numberAttr(r,"up-duration"))?e:n.duration)?e:o.duration,i.delay=null!=(n=null!=(r=null!=(e=t.delay)?e:m.numberAttr(r,"up-delay"))?r:n.delay)?n:o.delay,i.trackMotion=t.trackMotion,i},f=function(e){return n[e]||up.fail("Unknown animation %o",e)},p=function(e){return g.finish(e)},h=function(t,n,e,r){var i,o,s,l,a,u,c,f,p,h;return r=d.options(r),d.assign(r,y(r)),t=m.get(t),n=m.get(n),f=A(e),h=v(t,f,r),l=d.pluckKey(r,"beforeStart")||d.noop,o=d.pluckKey(r,"afterInsert")||d.noop,s=d.pluckKey(r,"beforeDetach")||d.noop,i=d.pluckKey(r,"afterDetach")||d.noop,l(),u=function(){var e=d.merge(r,{scrollBehavior:"auto"});return up.viewport.scrollAfterInsertFragment(n,e)},h?g.isActive(t)&&!1===r.trackMotion?f(t,n,r):(up.puts("Morphing %o to %o with transition %o",t,n,e),p=up.viewport.closest(t),c=p.scrollTop,a=up.viewport.absolutize(t,{afterMeasure:function(){return m.insertBefore(t,n),o()}}),e=function(){var e=u();return e=(e=e.then(function(){var e=p.scrollTop;return a.moveBounds(0,e-c),f(t,n,r)})).then(function(){return s(),m.remove(a.bounds),i()})},g.startFunction([t,n],e,r)):(s(),w(t,n),o(),i(),u())},A=function(e){var t;if(!E(e))return d.isFunction(e)?e:d.isArray(e)?b.apply(null,e):d.isString(e)?0<=e.indexOf("/")?b.apply(null,e.split("/")):(t=i[e])?A(t):void 0:up.fail("Unknown transition %o",e)},b=function(e,t){var r,i;if(!E(e)||!E(e))return i=C(e)||d.asyncNoop,r=C(t)||d.asyncNoop,function(e,t,n){return Promise.all([i(e,n),r(t,n)])}},C=function(n){if(!E(n))return d.isFunction(n)?n:d.isString(n)?f(n):d.isOptions(n)?function(e,t){return c(e,n,t)}:up.fail("Unknown animation %o",n)},w=function(e,t){return m.replace(e,t)},x=function(e,t){return i[e]=A(t)},S=function(){return e=d.copy(n),t=d.copy(i)},E=function(e){return!e||"none"===e||d.isBlank(e)},(k=function(e,t){return n[e]=C(t)})("fade-in",function(e,t){return m.setStyle(e,{opacity:0}),c(e,{opacity:1},t)}),k("fade-out",function(e,t){return m.setStyle(e,{opacity:1}),c(e,{opacity:0},t)}),r=function(e,t){return{transform:"translate("+e+"px, "+t+"px)"}},k("move-to-top",function(e,t){var n;return m.setStyle(e,r(0,0)),n=(n=e.getBoundingClientRect()).top+n.height,c(e,r(0,-n),t)}),k("move-from-top",function(e,t){var n;return m.setStyle(e,r(0,0)),n=(n=e.getBoundingClientRect()).top+n.height,m.setStyle(e,r(0,-n)),c(e,r(0,0),t)}),k("move-to-bottom",function(e,t){var n;return m.setStyle(e,r(0,0)),n=e.getBoundingClientRect(),n=m.root().clientHeight-n.top,c(e,r(0,n),t)}),k("move-from-bottom",function(e,t){var n;return m.setStyle(e,r(0,0)),n=e.getBoundingClientRect(),n=up.viewport.rootHeight()-n.top,m.setStyle(e,r(0,n)),c(e,r(0,0),t)}),k("move-to-left",function(e,t){var n;return m.setStyle(e,r(0,0)),n=(n=e.getBoundingClientRect()).left+n.width,c(e,r(-n,0),t)}),k("move-from-left",function(e,t){var n;return m.setStyle(e,r(0,0)),n=(n=e.getBoundingClientRect()).left+n.width,m.setStyle(e,r(-n,0)),c(e,r(0,0),t)}),k("move-to-right",function(e,t){var n;return m.setStyle(e,r(0,0)),n=e.getBoundingClientRect(),n=up.viewport.rootWidth()-n.left,c(e,r(n,0),t)}),k("move-from-right",function(e,t){var n;return m.setStyle(e,r(0,0)),n=e.getBoundingClientRect(),n=up.viewport.rootWidth()-n.left,m.setStyle(e,r(n,0)),c(e,r(0,0),t)}),k("roll-down",function(e,t){var n=m.style(e,"height"),r=m.setTemporaryStyle(e,{height:"0px",overflow:"hidden"}),t=a(e,{height:n},t);return t.then(r),t}),x("move-left",["move-to-left","move-from-right"]),x("move-right",["move-to-right","move-from-left"]),x("move-up",["move-to-top","move-from-bottom"]),x("move-down",["move-to-bottom","move-from-top"]),x("cross-fade",["fade-out","fade-in"]),up.on("up:framework:booted",S),up.on("up:framework:reset",s),{morph:h,animate:a,animateOptions:y,finish:p,finishCount:function(){return g.finishCount},transition:x,animation:k,config:o,isEnabled:l,isNone:E}),up.transition=up.motion.transition,up.animation=up.motion.animation,up.morph=up.motion.morph,up.animate=up.motion.animate}.call(this),function(){var e,t,i,n,r,o,s,l,a,u,c,f,p,h,d,m,g,v,y,A,b,C,w,x,k,S,E,M,T,B,L,O,F,D,N,P,W=[].slice;up.proxy=(w=up.util,x=up.element,T=M=E=S=k=void 0,B=[],L=new up.Config({slowDelay:300,preloadDelay:75,cacheSize:70,cacheExpiry:3e5,maxRequests:4,wrapMethods:["PATCH","PUT","DELETE"],safeMethods:["GET","OPTIONS","HEAD"]}),O=new up.Cache({size:function(){return L.cacheSize},expiry:function(){return L.cacheExpiry},key:function(e){return up.Request.wrap(e).cacheKey()},cachable:function(e){return up.Request.wrap(e).isCachable()}}),F=function(e){var t,n,r,i,o=[e=up.Request.wrap(e)];for("html"!==e.target&&(r=e.variant({target:"html"}),o.push(r),"body"!==e.target&&(e=e.variant({target:"body"}),o.push(e))),t=0,n=o.length;t<n;t++)if(i=o[t],i=O.get(i))return i},D=function(){return clearTimeout(S),S=null},N=function(){return clearTimeout(E),E=null},(P=function(){return k=null,D(),N(),M=0,L.reset(),O.clear(),T=!1,B=[]})(),c=function(){var e,t,n,r=1<=arguments.length?W.call(arguments,0):[];return w.isString(r[0])&&(n=r.shift()),r=r.shift()||{},n&&(r.url=n),(t=up.Request.wrap(r)).isSafe()||i(),!(!1===t.cache)&&(e=F(t))?up.puts("Re-using cached response for %s %s",t.method,t.url):(e=a(t),y(t,e),e.catch(function(){return g(t)})),t.preload||(u(),w.always(e,l)),e},e=function(){var r=1<=arguments.length?W.call(arguments,0):[];return up.legacy.warn("up.ajax() has been deprecated. Use up.request() instead."),new Promise(function(t,e){var n=function(e){return t(e.text)};return c.apply(null,r).then(n,e)})},r=function(){return 0===M},n=function(){return 0<M},u=function(){var e;if(M+=1,!E)return e=function(){if(0<M)return up.emit("up:proxy:slow",{log:"Proxy is slow to respond"}),T=!0},E=w.timer(L.slowDelay,e)},l=function(){if(--M,r()&&(N(),T))return up.emit("up:proxy:recover",{log:"Proxy has recovered from slow response"}),T=!1},a=function(e){return(M<L.maxRequests?s:d)(e)},d=function(e){var t;return up.puts("Queuing request for %s %s",e.method,e.url),t=function(){return s(e)},t=w.previewable(t),B.push(t),t.promise},s=function(e){var t={request:e,log:["Loading %s %s",e.method,e.url]};return up.event.nobodyPrevents("up:proxy:load",t)?(e=e.send(),w.always(e,v),w.always(e,f),e):(w.microtask(f),Promise.reject(new Error("Event up:proxy:load was prevented")))},m=function(e){var t=e.request;if(e.url&&t.url!==e.url)return e=t.variant({method:e.method,url:e.url}),up.proxy.alias(t,e)},v=function(e){return e.isFatalError()?up.emit("up:proxy:fatal",{log:"Fatal error during request",request:e.request,response:e}):(e.isError()||m(e),up.emit("up:proxy:loaded",{log:["Server responded with HTTP %d (%d bytes)",e.status,e.text.length],request:e.request,response:e}))},f=function(){var e;"function"==typeof(e=B.shift())&&e()},t=O.alias,y=O.set,g=O.remove,i=O.clear,h=function(e){var t=x.numberAttr(e,"up-delay")||L.preloadDelay;if(e!==k)return k=e,D(),A(function(){return w.muteRejection(p(e)),k=null},t)},A=function(e,t){return S=setTimeout(e,t)},b=function(e){if(e===k)return k=void 0,D()},p=function(e,t){var n=x.get(e);return up.link.isSafe(n)?(e={log:["Preloading link %o",n],target:n},up.event.whenEmitted("up:link:preload",e).then(function(){return up.link.followVariantForLink(n).preloadLink(n,t)})):Promise.reject(new Error("Won't preload unsafe link"))},o=function(e){return w.contains(L.safeMethods,e)},C=function(e,t){return w.contains(L.wrapMethods,e)&&(t.add(up.protocol.config.methodParam,e),e="POST"),e},up.compiler("a[up-preload], [up-href][up-preload]",function(t){if(up.link.isSafe(t))return t.addEventListener("mouseenter",function(e){if(up.link.shouldProcessEvent(e,t))return h(t)}),t.addEventListener("mouseleave",function(){return b(t)})}),up.on("up:framework:reset",P),{preload:p,ajax:e,request:c,get:F,alias:t,clear:i,remove:g,isIdle:r,isBusy:n,isSafeMethod:o,wrapMethod:C,config:L}),up.ajax=up.proxy.ajax,up.request=up.proxy.request}.call(this),function(){var s,u,e,t,n,l,r,i,o,a,c,f,p,h,d;up.link=(s=up.util,u=up.element,e=function(e,t){var n;return null==t&&(t={}),n=null!=(n=t.target)?n:"body",up.replace(n,e,t)},t=function(e,t){e=u.get(e);return c(e).followLink(e,t)},n=function(e,t){var n,r,i,o;return t=s.options(t),o=null!=(n=null!=(n=t.url)?n:e.getAttribute("up-href"))?n:e.getAttribute("href"),i=null!=(n=t.target)?n:e.getAttribute("up-target"),null==t.failTarget&&(t.failTarget=e.getAttribute("up-fail-target")),null==t.fallback&&(t.fallback=e.getAttribute("up-fallback")),null==t.transition&&(t.transition=u.booleanOrStringAttr(e,"up-transition")),null==t.failTransition&&(t.failTransition=u.booleanOrStringAttr(e,"up-fail-transition")),null==t.history&&(t.history=u.booleanOrStringAttr(e,"up-history")),null==t.reveal&&(t.reveal=null==(r=u.booleanOrStringAttr(e,"up-reveal"))||r),null==t.failReveal&&(t.failReveal=null==(r=u.booleanOrStringAttr(e,"up-fail-reveal"))||r),null==t.cache&&(t.cache=u.booleanAttr(e,"up-cache")),null==t.restoreScroll&&(t.restoreScroll=u.booleanAttr(e,"up-restore-scroll")),t.method=l(e,t),null==t.origin&&(t.origin=e),null==t.layer&&(t.layer=e.getAttribute("up-layer")),null==t.failLayer&&(t.failLayer=e.getAttribute("up-fail-layer")),null==t.confirm&&(t.confirm=e.getAttribute("up-confirm")),null==t.scrollBehavior&&(t.scrollBehavior=e.getAttribute("up-scroll-behavior")),null==t.scrollSpeed&&(t.scrollSpeed=e.getAttribute("up-scroll-speed")),t=s.merge(t,up.motion.animateOptions(t,e)),up.browser.whenConfirmed(t).then(function(){return up.replace(i,o,t)})},l=function(e,t){return null==t&&(t={}),(null!=(e=null!=(t=null!=(t=t.method)?t:e.getAttribute("up-method"))?t:e.getAttribute("data-method"))?e:"GET").toUpperCase()},r=function(e){},i=[],a=function(e){return e=u.get(e),!!c(e,{default:!1})},c=function(t,e){var n;return null==e&&(e={}),n=s.find(i,function(e){return e.matchesLink(t)}),!1!==e.default&&(n=n||d),n},f=function(e){if(!a(e))return e.setAttribute("up-follow","")},p=function(e,t){var n=e.target;return!!s.isUnmodifiedMouseEvent(e)&&(n===t||(e="a, [up-href], "+up.form.fieldSelector(),!(e=u.closest(n,e))||e===t))},h=function(e,t){t=l(e,t);return up.proxy.isSafeMethod(t)},d=(o=function(e,t){t=new up.FollowVariant(e,t);return i.push(t),t.registerEvents(),t})("[up-target], [up-follow]",{follow:n,preload:function(e,t){return(t=s.options(t)).preload=!0,n(e,t)}}),up.macro("[up-dash]",function(e){var t,n=u.booleanOrStringAttr(e,"up-dash");return e.removeAttribute("up-dash"),t={"up-preload":"","up-instant":""},!0===n?f(e):t["up-target"]=n,u.setMissingAttrs(e,t)}),up.macro("[up-expand]",function(e){var t,n,r,i,o,s,l,a=e.getAttribute("up-expand")||"a, [up-href]";if(a=u.all(e,a)[0]){for(l=/^up-/,(o={})["up-href"]=a.getAttribute("href"),n=0,r=(s=a.attributes).length;n<r;n++)(i=(t=s[n]).name).match(l)&&(o[i]=t.value);return u.setMissingAttrs(e,o),e.removeAttribute("up-expand"),f(e)}}),{visit:e,follow:t,makeFollowable:f,isSafe:h,isFollowable:a,shouldProcessEvent:p,followMethod:l,addFollowVariant:o,followVariantForLink:c,allowDefault:r}),up.visit=up.link.visit,up.follow=up.link.follow}.call(this),function(){var a,u,o,e,n,s,t,r,i,l,c,f,p,h,d,m,g,v,y,A,b=[].slice;up.form=(a=up.util,u=up.element,o=new up.Config({validateTargets:["[up-fieldset]:has(&)","fieldset:has(&)","label:has(&)","form:has(&)"],fields:["select","input:not([type=submit]):not([type=image])","button[type]:not([type=submit])","textarea"],submitButtons:["input[type=submit]","input[type=image]","button[type=submit]","button:not([type])"],observeDelay:0}),e=function(){return o.reset()},n=function(t){return null==t&&(t=""),o.fields.map(function(e){return e+t}).join(",")},s=function(e){var t;return e=u.get(e),t=u.subtree(e,n()),u.matches(e,"form[id]")&&(e=n(u.attributeSelector("form",e.id)),e=u.all(e),t.push.apply(t,e),t=a.uniq(t)),t},t=function(e){var t=s(e);return(e=r(e))&&(t=a.toArray(t)).push(e),t},r=function(e){var t=i(),n=document.activeElement;return n&&u.matches(n,t)&&e.contains(n)?n:u.first(e,t)},i=function(){return o.submitButtons.join(",")},l=function(e,t){var n,r,i,o,s,l;return t=a.options(t),n=u.get(e),n=u.closest(n,"form"),s=null!=(e=null!=(e=t.target)?e:n.getAttribute("up-target"))?e:"body",null==t.failTarget&&(t.failTarget=null!=(r=n.getAttribute("up-fail-target"))?r:u.toSelector(n)),null==t.reveal&&(t.reveal=null==(r=u.booleanOrStringAttr(n,"up-reveal"))||r),null==t.failReveal&&(t.failReveal=null==(i=u.booleanOrStringAttr(n,"up-fail-reveal"))||i),null==t.fallback&&(t.fallback=n.getAttribute("up-fallback")),null==t.history&&(t.history=null==(i=u.booleanOrStringAttr(n,"up-history"))||i),null==t.transition&&(t.transition=u.booleanOrStringAttr(n,"up-transition")),null==t.failTransition&&(t.failTransition=u.booleanOrStringAttr(n,"up-fail-transition")),null==t.method&&(t.method=a.normalizeMethod(null!=(o=null!=(o=null!=(o=n.getAttribute("up-method"))?o:n.getAttribute("data-method"))?o:n.getAttribute("method"))?o:"post")),null==t.cache&&(t.cache=u.booleanAttr(n,"up-cache")),null==t.restoreScroll&&(t.restoreScroll=u.booleanAttr(n,"up-restore-scroll")),null==t.origin&&(t.origin=n),null==t.layer&&(t.layer=n.getAttribute("up-layer")),null==t.failLayer&&(t.failLayer=n.getAttribute("up-fail-layer")),t.params=up.Params.fromForm(n).addAll(t.params),(t=a.merge(t,up.motion.animateOptions(t,n))).validate&&(t.headers||(t.headers={}),t.transition=!1,t.failTransition=!1,t.headers[up.protocol.config.validateHeader]=t.validate),l=null!=(o=null!=(o=t.url)?o:n.getAttribute("action"))?o:up.browser.url(),"GET"===t.method&&(l=up.Params.stripURL(l)),up.event.whenEmitted("up:form:submit",{log:"Submitting form",target:n}).then(function(){var e;return up.feedback.start(n),up.browser.canPushState()||!1===t.history?(e=up.replace(s,l,t),a.always(e,function(){return up.feedback.stop(n)}),e):(n.submit(),a.unresolvablePromise())})},c=function(){var e,t,n,r=arguments[0],i=2<=arguments.length?b.call(arguments,1):[];return r=u.list(r),e=a.flatMap(r,s),n=null!=(t=null!=(n=a.extractCallback(i))?n:f(r[0]))?t:up.fail("up.observe: No change callback given"),(t=a.extractOptions(i)).delay=null!=(r=null!=(i=t.delay)?i:u.numberAttr(r[0],"up-delay"))?r:o.observeDelay,(n=new up.FieldObserver(e,t,n)).start(),n.stop},f=function(e){if(e=e.getAttribute("up-observe"))return new Function("value","name",e)},p=function(e,t){return c(e,t,function(){return l(e)})},h=function(e,t){var n=null!=(n=t.target)?n:e.getAttribute("up-validate");return(n=n||a.findResult(o.validateTargets,function(e){e=u.resolveSelector(e,t.origin);if(u.first(e))return e}))||up.fail("Could not find validation target for %o (tried defaults %o)",e,o.validateTargets),u.resolveSelector(n,t.origin)},d=function(e,t){var n=u.get(e);return(t=a.options(t)).origin=n,t.target=h(n,t),t.failTarget=t.target,null==t.reveal&&(t.reveal=null!=(e=u.booleanOrStringAttr(n,"up-reveal"))&&e),t.history=!1,t.validate=n.getAttribute("name")||":none",t=a.merge(t,up.motion.animateOptions(t,n)),up.submit(n,t)},m=function(e){var t,n,r=void 0,i=void 0;return u.matches(e,"input[type=checkbox]")?i=e.checked?(r=e.value,":checked"):":unchecked":u.matches(e,"input[type=radio]")?(t=A(e),n=e.getAttribute("name"),(n=t.querySelector("input[type=radio]"+u.attributeSelector("name",n)+":checked"))?(i=":checked",r=n.value):i=":unchecked"):r=e.value,e=[],a.isPresent(r)?(e.push(r),e.push(":present")):e.push(":blank"),a.isPresent(i)&&e.push(i),e},g=function(e,t){var n,r;return null==t&&(t={}),t=null!=(r=t.target)?r:e.getAttribute("up-switch"),r=A(e),a.isPresent(t)||up.fail("No switch target given for %o",e),n=m(e),a.each(u.all(r,t),function(e){return v(e,n)})},v=function(e,t){var n,r;return t=t||m(y(e)),r=(n=e.getAttribute("up-hide-for"))?(n=a.splitValues(n),0===a.intersect(t,n).length):(r=(r=e.getAttribute("up-show-for"))?a.splitValues(r):[":present",":checked"],0<a.intersect(t,r).length),u.toggle(e,r),e.classList.add("up-switched")},y=function(t){var e=A(t),e=u.all(e,"[up-switch]");return a.find(e,function(e){e=e.getAttribute("up-switch");return u.matches(t,e)})||a.fail("Could not find [up-switch] field for %o",t)},A=function(e){return u.closest(e,"form, body")},up.on("submit","form[up-target]",function(e,t){return up.event.consumeAction(e),a.muteRejection(l(t))}),up.on("change","[up-validate]",function(e){e=s(e.target)[0];return a.muteRejection(d(e))}),up.compiler("[up-switch]",function(e){return g(e)}),up.on("change","[up-switch]",function(e,t){return g(t)}),up.compiler("[up-show-for]:not(.up-switched), [up-hide-for]:not(.up-switched)",function(e){return v(e)}),up.compiler("[up-observe]",function(e){return c(e)}),up.compiler("[up-autosubmit]",function(e){return p(e)}),up.compiler("[autofocus]",{batch:!0},function(e){return a.last(e).focus()}),up.on("up:framework:reset",e),{config:o,submit:l,observe:c,validate:d,autosubmit:p,fieldSelector:n,fields:s,submissionFields:t}),up.submit=up.form.submit,up.observe=up.form.observe,up.autosubmit=up.form.autosubmit,up.validate=up.form.validate}.call(this),function(){var f,p,h,d,n,e,t,m,g,v,r,i,o,s,l,a,u,c,y;up.popup=(f=up.util,p=up.element,h=new up.Config({openAnimation:"fade-in",closeAnimation:"fade-out",openDuration:150,closeDuration:100,openEasing:null,closeEasing:null,position:"bottom",align:"left",history:!1}),d=new up.Config({phase:"closed",anchor:null,popup:null,content:null,tether:null,position:null,align:null,sticky:null,url:null,coveredUrl:null,coveredTitle:null}),n=new up.DivertibleChain,e=function(){var e;return null!=(e=d.tether)&&e.destroy(),d.reset(),n.reset(),h.reset()},t=function(){return d.coveredTitle=null,d.coveredUrl=null},m=function(e){return d.tether=new up.Tether(f.only(d,"anchor","position","align")),d.popup=p.affix(d.tether.root,".up-popup",{"up-position":d.position,"up-align":d.align}),d.content=p.affix(d.popup,".up-popup-content"),up.fragment.createPlaceholder(e,d.content),p.hide(d.popup)},g=function(){return p.show(d.popup)},v=function(){var e;return null!=(e=d.tether)?e.sync():void 0},r=function(){return"opened"===d.phase||"opening"===d.phase},i=function(e,t){return n.asap(l,function(){return o(e,t)})},o=function(e,t){var n,r,i,o,s,l,a,u,c=p.get(e);return null==t&&(t={}),u=null!=(e=null!=(e=f.pluckKey(t,"url"))?e:c.getAttribute("up-href"))?e:c.getAttribute("href"),o=f.pluckKey(t,"html"),u||o||up.fail("up.popup.attach() requires either an { url } or { html } option"),a=null!=(e=f.pluckKey(t,"target"))?e:c.getAttribute("up-popup")||up.fail("No target selector given for [up-popup]"),s=null!=(e=null!=(e=t.position)?e:c.getAttribute("up-position"))?e:h.position,n=null!=(e=null!=(e=t.align)?e:c.getAttribute("up-align"))?e:h.align,null==t.animation&&(t.animation=null!=(e=c.getAttribute("up-animation"))?e:h.openAnimation),null==t.sticky&&(t.sticky=null!=(l=p.booleanAttr(c,"up-sticky"))?l:h.sticky),t.history=!!up.browser.canPushState()&&(null!=(l=null!=(l=t.history)?l:p.booleanOrStringAttr(c,"up-history"))?l:h.history),null==t.confirm&&(t.confirm=c.getAttribute("up-confirm")),t.method=up.link.followMethod(c,t),t.layer="popup",null==t.failTarget&&(t.failTarget=c.getAttribute("up-fail-target")),null==t.failLayer&&(t.failLayer=c.getAttribute("up-fail-layer")),t.provideTarget=function(){return m(a)},r=up.motion.animateOptions(t,c,{duration:h.openDuration,easing:h.openEasing}),i=f.merge(t,{animation:!1}),t.preload&&u?up.replace(a,u,t):up.browser.whenConfirmed(t).then(function(){return up.event.whenEmitted("up:popup:open",{url:u,anchor:c,log:"Opening popup"}).then(function(){return d.phase="opening",d.anchor=c,d.position=s,d.align=n,t.history&&(d.coveredUrl=up.browser.url(),d.coveredTitle=document.title),d.sticky=t.sticky,(o?up.extract(a,o,i):up.replace(a,u,i)).then(function(){return g(),v(),up.animate(d.popup,t.animation,r)}).then(function(){return d.phase="opened",up.emit(d.popup,"up:popup:opened",{anchor:d.anchor,log:"Popup opened"})})})})},s=function(e){return n.asap(function(){return l(e)})},l=function(e){var t;return r()?(e=f.options(e,{animation:h.closeAnimation,history:d.coveredUrl,title:d.coveredTitle}),t=up.motion.animateOptions(e,{duration:h.closeDuration,easing:h.closeEasing}),f.assign(e,t),up.event.whenEmitted("up:popup:close",{anchor:d.anchor,log:"Closing popup"}).then(function(){return d.phase="closing",d.url=null,d.coveredUrl=null,d.coveredTitle=null,up.destroy(d.popup,e).then(function(){return d.phase="closed",d.tether.destroy(),d.tether=null,d.popup=null,d.content=null,d.anchor=null,d.sticky=null,up.emit("up:popup:closed",{anchor:d.anchor,log:"Popup closed"})})})):Promise.resolve()},a=function(e,t){return(t=f.options(t)).preload=!0,o(e,t)},u=function(e,t){return e.classList.contains("up-current")?s():i(e,t)},c=function(){if(!d.sticky)return t(),s()},y=function(e){e=p.get(e);return!!p.closest(e,".up-popup")},up.link.addFollowVariant("[up-popup]",{follow:u,preload:a}),up.on("click up:action:consumed",function(e){e=e.target;if(!p.closest(e,".up-popup, [up-popup]"))return f.muteRejection(s())}),up.on("up:fragment:inserted",function(e,t){if(y(t)){if(t=t.getAttribute("up-source"))return d.url=t}else if(e.origin&&y(e.origin))return f.muteRejection(c())}),up.event.onEscape(function(){return f.muteRejection(s())}),up.on("click",".up-popup [up-close]",function(e){return f.muteRejection(s()),up.event.consumeAction(e)}),up.on("up:history:restore",function(){return f.muteRejection(s())}),up.on("up:framework:reset",e),{attach:i,close:s,url:function(){return d.url},coveredUrl:function(){return d.coveredUrl},config:h,contains:y,isOpen:r,sync:v})}.call(this),function(){var p,h,d,t,m,g,n,e,i,r,o,v,y,s,l,a,u,c,f,A,b,C,w,x,k,S,E,M,T,B;up.modal=(p=up.util,h=up.element,d=new up.Config({maxWidth:null,width:null,height:null,history:!0,openAnimation:"fade-in",closeAnimation:"fade-out",openDuration:null,closeDuration:null,openEasing:null,closeEasing:null,backdropOpenAnimation:"fade-in",backdropCloseAnimation:"fade-out",closeLabel:"×",closable:!0,sticky:!1,flavor:"default",position:null,template:function(e){return'<div class="up-modal">\n  <div class="up-modal-backdrop"></div>\n  <div class="up-modal-viewport">\n    <div class="up-modal-dialog">\n      <div class="up-modal-content"></div>\n      <div class="up-modal-close" up-close>'+e.closeLabel+"</div>\n    </div>\n  </div>\n</div>"}}),t=new up.Config({default:{}}),m=new up.Config({phase:"closed",anchorElement:null,modalElement:null,sticky:null,closable:null,flavor:null,url:null,coveredUrl:null,coveredTitle:null,position:null}),g=new up.BodyShifter,n=new up.DivertibleChain,e=function(){return m.modalElement&&h.remove(m.modalElement),g.unshift(),m.reset(),n.reset(),d.reset(),t.reset()},i=function(){var e=B("template");return p.evalOption(e,{closeLabel:B("closeLabel")})},r=function(){return m.coveredTitle=null,m.coveredUrl=null},o=function(e){e=".up-modal-"+e;return m.modalElement.querySelector(e)},v=function(e,t){var n,r=i();return m.modalElement=r=h.createFromHtml(r),r.setAttribute("aria-modal","true"),r.setAttribute("up-flavor",m.flavor),p.isPresent(m.position)&&r.setAttribute("up-position",m.position),t=p.only(t,"width","maxWidth","height"),h.setStyle(o("dialog"),t),m.closable||(n=o("close"),h.remove(n)),n=o("content"),up.fragment.createPlaceholder(e,n),h.hide(r),document.body.appendChild(r)},y=function(){return h.show(m.modalElement)},s=function(){return"opened"===m.phase||"opening"===m.phase},l=function(e,t){return(t=p.options(t)).link=h.get(e),f(t)},a=function(e,t){return(t=p.options(t)).link=e,t.preload=!0,A(t)},u=function(e,t){return(t=p.options(t)).url=e,f(t)},c=function(e,t,n){return(n=p.options(n)).html=t,null==n.history&&(n.history=!1),n.target=e,f(n)},f=function(e){return n.asap(w,function(){return A(e)})},A=function(t){var n,r,e,i,o,s,l,a,u,c,f;return t=p.options(t),i=p.pluckKey(t,"link")||h.none(),f=null!=(o=null!=(o=p.pluckKey(t,"url"))?o:i.getAttribute("up-href"))?o:i.getAttribute("href"),r=p.pluckKey(t,"html"),c=null!=(o=p.pluckKey(t,"target"))?o:i.getAttribute("up-modal"),b(c),null==t.flavor&&(t.flavor=null!=(s=i.getAttribute("up-flavor"))?s:d.flavor),null==t.position&&(t.position=null!=(s=i.getAttribute("up-position"))?s:B("position",t.flavor)),t.position=p.evalOption(t.position,{link:i}),null==t.width&&(t.width=null!=(l=i.getAttribute("up-width"))?l:B("width",t.flavor)),null==t.maxWidth&&(t.maxWidth=null!=(l=i.getAttribute("up-max-width"))?l:B("maxWidth",t.flavor)),null==t.height&&(t.height=null!=(a=i.getAttribute("up-height"))?a:B("height")),null==t.animation&&(t.animation=null!=(a=i.getAttribute("up-animation"))?a:B("openAnimation",t.flavor)),t.animation=p.evalOption(t.animation,{position:t.position}),null==t.backdropAnimation&&(t.backdropAnimation=null!=(u=i.getAttribute("up-backdrop-animation"))?u:B("backdropOpenAnimation",t.flavor)),t.backdropAnimation=p.evalOption(t.backdropAnimation,{position:t.position}),null==t.sticky&&(t.sticky=null!=(u=h.booleanAttr(i,"up-sticky"))?u:B("sticky",t.flavor)),null==t.closable&&(t.closable=null!=(e=h.booleanAttr(i,"up-closable"))?e:B("closable",t.flavor)),null==t.confirm&&(t.confirm=i.getAttribute("up-confirm")),t.method=up.link.followMethod(i,t),t.layer="modal",null==t.failTarget&&(t.failTarget=i.getAttribute("up-fail-target")),null==t.failLayer&&(t.failLayer=null!=(e=i.getAttribute("up-fail-layer"))?e:"auto"),null==t.cache&&(t.cache=h.booleanAttr(i,"up-cache")),n=up.motion.animateOptions(t,i,{duration:B("openDuration",t.flavor),easing:B("openEasing",t.flavor)}),null==t.history&&(t.history=null!=(i=h.booleanOrStringAttr(i,"up-history"))?i:B("history",t.flavor)),up.browser.canPushState()||(t.history=!1),t.provideTarget=function(){return v(c,t)},t.preload?up.replace(c,f,t):up.browser.whenConfirmed(t).then(function(){return up.event.whenEmitted("up:modal:open",{url:f,log:"Opening modal"}).then(function(){var e;return m.phase="opening",m.flavor=t.flavor,m.sticky=t.sticky,m.closable=t.closable,m.position=t.position,t.history&&(m.coveredUrl=up.browser.url(),m.coveredTitle=document.title),e=p.merge(t,{animation:!1}),(r?up.extract(c,r,e):up.replace(c,f,e)).then(function(){return g.shift(),y(),k(t.animation,t.backdropAnimation,n)}).then(function(){return m.phase="opened",up.emit("up:modal:opened",{log:"Modal opened"})})})})},b=function(e){return p.isBlank(e)?up.fail("Cannot open a modal without a target selector"):"body"===e?up.fail("Cannot open the <body> in a modal"):void 0},C=function(e){return n.asap(function(){return w(e)})},w=function(e){var t,n,r,i,o;return e=p.options(e),s()?(o=null!=(i=e.animation)?i:B("closeAnimation"),o=p.evalOption(o,{position:m.position}),n=null!=(i=e.backdropAnimation)?i:B("backdropCloseAnimation"),n=p.evalOption(n,{position:m.position}),t=up.motion.animateOptions(e,{duration:B("closeDuration"),easing:B("closeEasing")}),r=p.options(p.except(e,"animation","duration","easing","delay"),{history:m.coveredUrl,title:m.coveredTitle}),up.event.whenEmitted(m.modalElement,"up:modal:close",{log:"Closing modal"}).then(function(){return m.phase="closing",m.url=null,m.coveredUrl=null,m.coveredTitle=null,k(o,n,t).then(function(){return up.destroy(m.modalElement,r)}).then(function(){return g.unshift(),m.phase="closed",m.modalElement=null,m.flavor=null,m.sticky=null,m.closable=null,m.position=null,up.emit("up:modal:closed",{log:"Modal closed"})})})):Promise.resolve()},x=function(e){return null==e&&(e=!0),h.toggleClass(m.modalElement,"up-modal-animating",e)},k=function(e,t,n){return up.motion.isNone(e)?Promise.resolve():(x(),Promise.all([up.animate(o("viewport"),e,n),up.animate(o("backdrop"),t,n)]).then(function(){return x(!1)}))},S=function(){if(!m.sticky)return r(),C()},E=function(e){e=h.get(e);return!!h.closest(e,".up-modal")},M=function(e,t){return null==t&&(t={}),up.legacy.warn("up.modal.flavor() is deprecated. Use the up.modal.flavors property instead."),p.assign(T(e),t)},T=function(e){return t[e]||(t[e]={})},B=function(e,t){var n;return null==t&&(t=m.flavor),t&&(n=T(t)[e]),p.isMissing(n)&&(n=d[e]),n},up.link.addFollowVariant("[up-modal]",{follow:l,preload:a}),up.on("click",".up-modal",function(e){var t;if(m.closable)return t=e.target,h.closest(t,".up-modal-dialog")||h.closest(t,"[up-modal]")?void 0:(up.event.consumeAction(e),p.muteRejection(C()))}),up.on("up:fragment:inserted",function(e,t){var n;if(E(t)){if(n=t.getAttribute("up-source"))return m.url=n}else if(e.origin&&E(e.origin)&&!up.popup.contains(t))return p.muteRejection(S())}),up.event.onEscape(function(){if(m.closable)return p.muteRejection(C())}),up.on("click",".up-modal [up-close]",function(e){return p.muteRejection(C()),up.event.consumeAction(e)}),up.macro("a[up-drawer], [up-href][up-drawer]",function(e){var t=e.getAttribute("up-drawer");return h.setAttrs(e,{"up-modal":t,"up-flavor":"drawer"})}),t.drawer={openAnimation:function(e){switch(e.position){case"left":return"move-from-left";case"right":return"move-from-right"}},closeAnimation:function(e){switch(e.position){case"left":return"move-to-left";case"right":return"move-to-right"}},position:function(e){return p.isPresent(e.link)?p.horizontalScreenHalf(e.link):"left"}},up.on("up:history:restore",function(){return p.muteRejection(C())}),up.on("up:framework:reset",e),{visit:u,follow:l,extract:c,close:C,url:function(){return m.url},coveredUrl:function(){return m.coveredUrl},config:d,flavors:t,contains:E,isOpen:s,flavor:M})}.call(this),function(){var n,l,a,u,r,e,c,f,t,i,o,s,p;up.tooltip=(n=up.util,l=up.element,a=new up.Config({position:"top",align:"center",openAnimation:"fade-in",closeAnimation:"fade-out",openDuration:100,closeDuration:50,openEasing:null,closeEasing:null}),u=new up.Config({phase:"closed",anchor:null,tooltip:null,content:null,tether:null,position:null,align:null}),r=new up.DivertibleChain,e=function(){var e;return null!=(e=u.tether)&&e.destroy(),u.reset(),r.reset(),a.reset()},c=function(e){return u.tether=new up.Tether(n.only(u,"anchor","position","align")),u.tooltip=l.affix(u.tether.root,".up-tooltip",{"up-position":u.position,"up-align":u.align}),u.content=l.affix(u.tooltip,".up-tooltip-content"),e.text?u.content.innerText=e.text:u.content.innerHTML=e.html},f=function(){var e;return null!=(e=u.tether)?e.sync():void 0},t=function(e,t){return r.asap(s,function(){return i(e,t)})},i=function(e,t){var n,r,i,o,s;return null==t&&(t={}),n=l.get(e),r=null!=(o=t.html)?o:n.getAttribute("up-tooltip-html"),s=null!=(i=t.text)?i:n.getAttribute("up-tooltip"),i=null!=(o=null!=(e=t.position)?e:n.getAttribute("up-position"))?o:a.position,e=null!=(o=null!=(e=t.align)?e:n.getAttribute("up-align"))?o:a.align,o=null!=(o=null!=(o=t.animation)?o:l.booleanOrStringAttr(n,"up-animation"))?o:a.openAnimation,t=up.motion.animateOptions(t,n,{duration:a.openDuration,easing:a.openEasing}),u.phase="opening",u.anchor=n,u.position=i,u.align=e,c({text:s,html:r}),f(),up.animate(u.tooltip,o,t).then(function(){return u.phase="opened"})},o=function(e){return r.asap(function(){return s(e)})},s=function(e){var t;return p()?(e=n.options(e,{animation:a.closeAnimation}),t=up.motion.animateOptions(e,{duration:a.closeDuration,easing:a.closeEasing}),n.assign(e,t),u.phase="closing",up.destroy(u.tooltip,e).then(function(){return u.phase="closed",u.tether.destroy(),u.tether=null,u.tooltip=null,u.content=null,u.anchor=null})):Promise.resolve()},p=function(){return"opening"===u.phase||"opened"===u.phase},up.compiler("[up-tooltip], [up-tooltip-html]",function(e){return e.addEventListener("mouseenter",function(){return t(e)}),e.addEventListener("mouseleave",function(){return o()})}),up.on("click up:action:consumed",function(e){return o()}),up.on("up:framework:reset",e),up.event.onEscape(function(){return o()}),{config:a,attach:t,isOpen:p,close:o,sync:f})}.call(this),function(){var c,n,p,e,h,t,r,i,f,d,o,s,l,a,u,m,g,v,y;up.feedback=(c=up.util,n=up.element,p=new up.Config({currentClasses:["up-current"],navs:["[up-nav]"]}),h=e=void 0,t=function(){return p.reset(),h=e=void 0},r="a, [up-href]",i=function(){return p.navs.join(",")},f=function(e){if(c.isPresent(e))return c.normalizeUrl(e,{stripTrailingSlash:!0})},d=function(e){var t;return(t=e.upNormalizedUrls)||(t=o(e),e.upNormalizedUrls=t),t},o=function(e){var t,n,r,i,o,s,l,a,u=[];if(up.link.isSafe(e))for(t=0,r=(o=["href","up-href","up-alias"]).length;t<r;t++)if(a=o[t],a=e.getAttribute(a))for(n=0,i=(s=c.splitValues(a)).length;n<i;n++)"#"!==(l=s[n])&&(l=f(l),u.push(l));return u},s=function(){var e=[up.browser.url(),up.modal.url(),up.modal.coveredUrl(),up.popup.url(),up.popup.coveredUrl()];return new up.UrlSet(e,{normalizeUrl:f})},l=function(){if(e=h,h=s(),!c.isEqual(h,e))return a(document.body)},a=function(e){var e=n.subtree(e,i()),e=c.flatMap(e,function(e){return n.subtree(e,r)});return m(e)},u=function(e){var t;return n.closest(e,i())?(t=n.subtree(e,r),m(t)):a(e)},m=function(e){return h=h||s(),c.each(e,function(e){var t,n,r,i,o,s,l,a,u,c=d(e),f=e.classList;if(h.matchesAny(c)){for(a=[],t=0,i=(s=p.currentClasses).length;t<i;t++)r=s[t],a.push(f.add(r));return a}for(u=[],n=0,o=(l=p.currentClasses).length;n<o;n++)r=l[n],u.push(f.remove(r));return u})},g=function(e){return e=n.get(e),n.ancestor(e,r)||e},v=function(e){return g(e).classList.add("up-active")},y=function(e){return g(e).classList.remove("up-active")},up.on("up:history:pushed up:history:replaced up:history:restored up:modal:opened up:modal:closed up:popup:opened up:popup:closed",function(e){return l()}),up.on("up:fragment:inserted",function(e,t){return u(t)}),up.on("up:framework:reset",t),{config:p,start:v,stop:y}),up.legacy.renamedModule("navigation","feedback")}.call(this),function(){up.radio=function(){up.util;var e=new up.Config({hungry:["[up-hungry]"],hungryTransition:null}),t=function(){return e.reset()},n=function(){return e.hungry.join(",")};return up.on("up:framework:reset",t),{config:e,hungrySelector:n}}()}.call(this),function(){var e,i,o;up.rails=(e=up.util,i=up.element,o=function(){var e;return!!(window.Rails||null!=(e=window.jQuery)&&e.rails)},e.each(["method","confirm"],function(e){var n="data-"+e,r="up-"+e;return up.macro("["+n+"]",function(e){var t;if(o()&&up.link.isFollowable(e))return(t={})[r]=e.getAttribute(n),i.setMissingAttrs(e,t),e.removeAttribute(n)})}))}.call(this),function(){up.framework.boot()}.call(this)}},r={};function i(e){if(r[e])return r[e].exports;var t=r[e]={id:e,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),e||(t=t.getElementsByTagName("script")).length&&(e=t[t.length-1].src)),!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{"use strict";var e=i(379),t=i.n(e),n=i(240),e={insert:"head",singleton:!1},e=(t()(n.Z,e),n.Z.locals,i(655)),n={insert:"head",singleton:!1},e=(t()(e.Z,n),e.Z.locals,i(933),i(631)),r=i.n(e);i(853);up.compiler("[code-editor]",function(e){r().fromTextArea(e,{mode:"ruby",tabMode:"indent",matchBrackets:!0,indentUnit:2,lineNumbers:!0,value:"#code-editor",theme:"hopscotch"})})})()})();